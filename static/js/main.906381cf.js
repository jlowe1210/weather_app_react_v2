/*! For license information please see main.906381cf.js.LICENSE.txt */
!function(){var t={87:function(t){t.exports=function(){"use strict";function t(t,e){return t(e={exports:{}},e.exports),e.exports}var e=t((function(t){function e(t){return!r(t)}function r(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,r=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(r);try{e=new Worker(n),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(n),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var r=e.getImageData(0,0,1,1);return r&&r.width===t.width}()?(void 0===n[r=t&&t.failIfMajorPerformanceCaveat]&&(n[r]=function(t){var r=function(t){var r=document.createElement("canvas"),n=Object.create(e.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,r.probablySupportsContext?r.probablySupportsContext("webgl",n)||r.probablySupportsContext("experimental-webgl",n):r.supportsContext?r.supportsContext("webgl",n)||r.supportsContext("experimental-webgl",n):r.getContext("webgl",n)||r.getContext("experimental-webgl",n)}(t);if(!r)return!1;var n=r.createShader(r.VERTEX_SHADER);return!(!n||r.isContextLost())&&(r.shaderSource(n,"void main() {}"),r.compileShader(n),!0===r.getShaderParameter(n,r.COMPILE_STATUS))}(r)),n[r]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var r}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e,window.mapboxgl.notSupportedReason=r);var n={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),r=n;function n(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=r,this.p2y=n}n.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},n.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},n.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},n.prototype.solveCurveX=function(t,e){var r,n,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=t)<(r=0))return r;if(i>(n=1))return n;for(;r<n;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?r=i:n=i,i=.5*(n-r)+r}return i},n.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var i=o;function o(t,e){this.x=t,this.y=e}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=r*this.x+e*this.y;return this.x=e*this.x-r*this.y,this.y=n,this},_rotateAround:function(t,e){var r=Math.cos(t),n=Math.sin(t),i=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=e.x+r*(this.x-e.x)-n*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t};var a="undefined"!=typeof self?self:{};function s(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!s(t[r],e[r]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!s(t[n],e[n]))return!1;return!0}return t===e}var l=Math.pow(2,53)-1;function u(t,e,n,i){var o=new r(t,e,n,i);return function(t){return o.solve(t)}}var c=u(.25,.1,.25,1);function p(t,e,r){return Math.min(r,Math.max(e,t))}function h(t,e,r){var n=r-e,i=((t-e)%n+n)%n+e;return i===e?r:i}function f(t,e,r){if(!t.length)return r(null,[]);var n=t.length,i=new Array(t.length),o=null;t.forEach((function(t,a){e(t,(function(t,e){t&&(o=t),i[a]=e,0==--n&&r(o,i)}))}))}function d(t){var e=[];for(var r in t)e.push(t[r]);return e}function m(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];for(var n=0,i=e;n<i.length;n+=1){var o=i[n];for(var a in o)t[a]=o[a]}return t}function y(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n];i in t&&(r[i]=t[i])}return r}var g=1;function v(){return g++}function _(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function x(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function b(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))}function w(t,e){return-1!==t.indexOf(e,t.length-e.length)}function S(t,e,r){var n={};for(var i in t)n[i]=e.call(r||this,t[i],i,t);return n}function k(t,e,r){var n={};for(var i in t)e.call(r||this,t[i],i,t)&&(n[i]=t[i]);return n}function T(t){return Array.isArray(t)?t.map(T):"object"==typeof t&&t?S(t,T):t}var E={};function I(t){E[t]||("undefined"!=typeof console&&console.warn(t),E[t]=!0)}function z(t,e,r){return(r.y-t.y)*(e.x-t.x)>(e.y-t.y)*(r.x-t.x)}function C(t){for(var e=0,r=0,n=t.length,i=n-1,o=void 0,a=void 0;r<n;i=r++)e+=((a=t[i]).x-(o=t[r]).x)*(o.y+a.y);return e}function A(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function P(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(t,r,n,i){var o=n||i;return e[r]=!o||o.toLowerCase(),""})),e["max-age"]){var r=parseInt(e["max-age"],10);isNaN(r)?delete e["max-age"]:e["max-age"]=r}return e}var D=null;function M(t){if(null==D){var e=t.navigator?t.navigator.userAgent:null;D=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return D}function L(t){try{var e=a[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var R,B,O=a.performance&&a.performance.now?a.performance.now.bind(a.performance):Date.now.bind(Date),F=a.requestAnimationFrame||a.mozRequestAnimationFrame||a.webkitRequestAnimationFrame||a.msRequestAnimationFrame,N=a.cancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelAnimationFrame||a.msCancelAnimationFrame,V={now:O,frame:function(t){var e=F(t);return{cancel:function(){return N(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var r=a.document.createElement("canvas"),n=r.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return r.width=t.width,r.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return R||(R=a.document.createElement("a")),R.href=t,R.href},hardwareConcurrency:a.navigator&&a.navigator.hardwareConcurrency||4,get devicePixelRatio(){return a.devicePixelRatio},get prefersReducedMotion(){return!!a.matchMedia&&(null==B&&(B=a.matchMedia("(prefers-reduced-motion: reduce)")),B.matches)}},U={create:function(t,e,r){var n=a.document.createElement(t);return void 0!==e&&(n.className=e),r&&r.appendChild(n),n},createNS:function(t,e){return a.document.createElementNS(t,e)}},j=a.document&&a.document.documentElement.style;function q(t){if(!j)return t[0];for(var e=0;e<t.length;e++)if(t[e]in j)return t[e];return t[0]}var Z,G=q(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);U.disableDrag=function(){j&&G&&(Z=j[G],j[G]="none")},U.enableDrag=function(){j&&G&&(j[G]=Z)};var W=q(["transform","WebkitTransform"]);U.setTransform=function(t,e){t.style[W]=e};var H=!1;try{var X=Object.defineProperty({},"passive",{get:function(){H=!0}});a.addEventListener("test",X,X),a.removeEventListener("test",X,X)}catch(t){H=!1}U.addEventListener=function(t,e,r,n){void 0===n&&(n={}),t.addEventListener(e,r,"passive"in n&&H?n:n.capture)},U.removeEventListener=function(t,e,r,n){void 0===n&&(n={}),t.removeEventListener(e,r,"passive"in n&&H?n:n.capture)};var K=function t(e){e.preventDefault(),e.stopPropagation(),a.removeEventListener("click",t,!0)};U.suppressClick=function(){a.addEventListener("click",K,!0),a.setTimeout((function(){a.removeEventListener("click",K,!0)}),0)},U.mousePos=function(t,e){var r=t.getBoundingClientRect();return new i(e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop)},U.touchPos=function(t,e){for(var r=t.getBoundingClientRect(),n=[],o=0;o<e.length;o++)n.push(new i(e[o].clientX-r.left-t.clientLeft,e[o].clientY-r.top-t.clientTop));return n},U.mouseButton=function(t){return void 0!==a.InstallTrigger&&2===t.button&&t.ctrlKey&&a.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button},U.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var Y,Q,$={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},J={supported:!1,testSupport:function(t){!tt&&Q&&(et?rt(t):Y=t)}},tt=!1,et=!1;function rt(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,Q),t.isContextLost())return;J.supported=!0}catch(t){}t.deleteTexture(e),tt=!0}a.document&&((Q=a.document.createElement("img")).onload=function(){Y&&rt(Y),Y=null,et=!0},Q.onerror=function(){tt=!0,Y=null},Q.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var nt="01",it=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};function ot(t){return 0===t.indexOf("mapbox:")}it.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",nt,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},it.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},it.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},it.prototype.normalizeStyleURL=function(t,e){if(!ot(t))return t;var r=ut(t);return r.path="/styles/v1"+r.path,this._makeAPIURL(r,this._customAccessToken||e)},it.prototype.normalizeGlyphsURL=function(t,e){if(!ot(t))return t;var r=ut(t);return r.path="/fonts/v1"+r.path,this._makeAPIURL(r,this._customAccessToken||e)},it.prototype.normalizeSourceURL=function(t,e){if(!ot(t))return t;var r=ut(t);return r.path="/v4/"+r.authority+".json",r.params.push("secure"),this._makeAPIURL(r,this._customAccessToken||e)},it.prototype.normalizeSpriteURL=function(t,e,r,n){var i=ut(t);return ot(t)?(i.path="/styles/v1"+i.path+"/sprite"+e+r,this._makeAPIURL(i,this._customAccessToken||n)):(i.path+=""+e+r,ct(i))},it.prototype.normalizeTileURL=function(t,e){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!ot(t))return t;var r=ut(t);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,(V.devicePixelRatio>=2||512===e?"@2x":"")+(J.supported?".webp":"$1")),r.path=r.path.replace(/^.+\/v4\//,"/"),r.path="/v4"+r.path;var n=this._customAccessToken||function(t){for(var e=0,r=t;e<r.length;e+=1){var n=r[e].match(/^access_token=(.*)$/);if(n)return n[1]}return null}(r.params)||$.ACCESS_TOKEN;return $.REQUIRE_ACCESS_TOKEN&&n&&this._skuToken&&r.params.push("sku="+this._skuToken),this._makeAPIURL(r,n)},it.prototype.canonicalizeTileURL=function(t,e){var r=ut(t);if(!r.path.match(/(^\/v4\/)/)||!r.path.match(/\.[\w]+$/))return t;var n="mapbox://tiles/";n+=r.path.replace("/v4/","");var i=r.params;return e&&(i=i.filter((function(t){return!t.match(/^access_token=/)}))),i.length&&(n+="?"+i.join("&")),n},it.prototype.canonicalizeTileset=function(t,e){for(var r=!!e&&ot(e),n=[],i=0,o=t.tiles||[];i<o.length;i+=1){var a=o[i];st(a)?n.push(this.canonicalizeTileURL(a,r)):n.push(a)}return n},it.prototype._makeAPIURL=function(t,e){var r="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",n=ut($.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"http"===t.protocol){var i=t.params.indexOf("secure");i>=0&&t.params.splice(i,1)}if("/"!==n.path&&(t.path=""+n.path+t.path),!$.REQUIRE_ACCESS_TOKEN)return ct(t);if(!(e=e||$.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+r);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+r);return t.params=t.params.filter((function(t){return-1===t.indexOf("access_token")})),t.params.push("access_token="+e),ct(t)};var at=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function st(t){return at.test(t)}var lt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ut(t){var e=t.match(lt);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function ct(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function pt(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(a.atob(e[1]).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(t){return null}}var ht=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};ht.prototype.getStorageKey=function(t){var e,r=pt($.ACCESS_TOKEN);return e=r&&r.u?a.btoa(encodeURIComponent(r.u).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))}))):$.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+e:"mapbox.eventData:"+e},ht.prototype.fetchEventData=function(){var t=L("localStorage"),e=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{var n=a.localStorage.getItem(e);n&&(this.eventData=JSON.parse(n));var i=a.localStorage.getItem(r);i&&(this.anonId=i)}catch(t){I("Unable to read from LocalStorage")}},ht.prototype.saveEventData=function(){var t=L("localStorage"),e=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{a.localStorage.setItem(r,this.anonId),Object.keys(this.eventData).length>=1&&a.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){I("Unable to write to LocalStorage")}},ht.prototype.processRequests=function(t){},ht.prototype.postEvent=function(t,e,r,n){var i=this;if($.EVENTS_URL){var o=ut($.EVENTS_URL);o.params.push("access_token="+(n||$.ACCESS_TOKEN||""));var a={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:nt,userId:this.anonId},s=e?m(a,e):a,l={url:ct(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=Bt(l,(function(t){i.pendingRequest=null,r(t),i.saveEventData(),i.processRequests(n)}))}},ht.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var ft,dt,mt=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postMapLoadEvent=function(t,e,r,n){this.skuToken=r;var i=!(!n&&!$.ACCESS_TOKEN),o=Array.isArray(t)&&t.some((function(t){return ot(t)||st(t)}));$.EVENTS_URL&&i&&o&&this.queueRequest({id:e,timestamp:Date.now()},n)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var r=this.queue.shift(),n=r.id,i=r.timestamp;n&&this.success[n]||(this.anonId||this.fetchEventData(),x(this.anonId)||(this.anonId=_()),this.postEvent(i,{skuToken:this.skuToken},(function(t){t||n&&(e.success[n]=!0)}),t))}},e}(ht),yt=new(function(t){function e(e){t.call(this,"appUserTurnstile"),this._customAccessToken=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postTurnstileEvent=function(t,e){$.EVENTS_URL&&$.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return ot(t)||st(t)}))&&this.queueRequest(Date.now(),e)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var r=pt($.ACCESS_TOKEN),n=r?r.u:$.ACCESS_TOKEN,i=n!==this.eventData.tokenU;x(this.anonId)||(this.anonId=_(),i=!0);var o=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),s=new Date(o),l=(o-this.eventData.lastSuccess)/864e5;i=i||l>=1||l<-1||a.getDate()!==s.getDate()}else i=!0;if(!i)return this.processRequests();this.postEvent(o,{"enabled.telemetry":!1},(function(t){t||(e.eventData.lastSuccess=o,e.eventData.tokenU=n)}),t)}},e}(ht)),gt=yt.postTurnstileEvent.bind(yt),vt=new mt,_t=vt.postMapLoadEvent.bind(vt),xt=500,bt=50;function wt(){a.caches&&!ft&&(ft=a.caches.open("mapbox-tiles"))}function St(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}var kt,Tt=1/0;function Et(t){++Tt>bt&&(t.getActor().send("enforceCacheSizeLimit",xt),Tt=0)}function It(){return null==kt&&(kt=a.OffscreenCanvas&&new a.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof a.createImageBitmap),kt}var zt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(zt);var Ct,At,Pt=function(t){function e(e,r,n){401===r&&st(n)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=r,this.url=n,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),Dt=A()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===a.location.protocol?a.parent:a).location.href},Mt=function(t,e){if(!(/^file:/.test(r=t.url)||/^file:/.test(Dt())&&!/^\w+:/.test(r))){if(a.fetch&&a.Request&&a.AbortController&&a.Request.prototype.hasOwnProperty("signal"))return function(t,e){var r,n=new a.AbortController,i=new a.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:Dt(),signal:n.signal}),o=!1,s=!1,l=(r=i.url).indexOf("sku=")>0&&st(r);"json"===t.type&&i.headers.set("Accept","application/json");var u=function(r,n,o){if(!s){if(r&&"SecurityError"!==r.message&&I(r),n&&o)return c(n);var u=Date.now();a.fetch(i).then((function(r){if(r.ok){var n=l?r.clone():null;return c(r,n,u)}return e(new Pt(r.statusText,r.status,t.url))})).catch((function(t){20!==t.code&&e(new Error(t.message))}))}},c=function(r,n,l){("arrayBuffer"===t.type?r.arrayBuffer():"json"===t.type?r.json():r.text()).then((function(t){s||(n&&l&&function(t,e,r){if(wt(),ft){var n={status:e.status,statusText:e.statusText,headers:new a.Headers};e.headers.forEach((function(t,e){return n.headers.set(e,t)}));var i=P(e.headers.get("Cache-Control")||"");i["no-store"]||(i["max-age"]&&n.headers.set("Expires",new Date(r+1e3*i["max-age"]).toUTCString()),new Date(n.headers.get("Expires")).getTime()-r<42e4||function(t,e){if(void 0===dt)try{new Response(new ReadableStream),dt=!0}catch(t){dt=!1}dt?e(t.body):t.blob().then(e)}(e,(function(e){var r=new a.Response(e,n);wt(),ft&&ft.then((function(e){return e.put(St(t.url),r)})).catch((function(t){return I(t.message)}))})))}}(i,n,l),o=!0,e(null,t,r.headers.get("Cache-Control"),r.headers.get("Expires")))})).catch((function(t){s||e(new Error(t.message))}))};return l?function(t,e){if(wt(),!ft)return e(null);var r=St(t.url);ft.then((function(t){t.match(r).then((function(n){var i=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")||0),r=P(t.headers.get("Cache-Control")||"");return e>Date.now()&&!r["no-cache"]}(n);t.delete(r),i&&t.put(r,n.clone()),e(null,n,i)})).catch(e)})).catch(e)}(i,u):u(null,null),{cancel:function(){s=!0,o||n.abort()}}}(t,e);if(A()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var r;return function(t,e){var r=new a.XMLHttpRequest;for(var n in r.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(r.responseType="arraybuffer"),t.headers)r.setRequestHeader(n,t.headers[n]);return"json"===t.type&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials="include"===t.credentials,r.onerror=function(){e(new Error(r.statusText))},r.onload=function(){if((r.status>=200&&r.status<300||0===r.status)&&null!==r.response){var n=r.response;if("json"===t.type)try{n=JSON.parse(r.response)}catch(t){return e(t)}e(null,n,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else e(new Pt(r.statusText,r.status,t.url))},r.send(t.body),{cancel:function(){return r.abort()}}}(t,e)},Lt=function(t,e){return Mt(m(t,{type:"json"}),e)},Rt=function(t,e){return Mt(m(t,{type:"arrayBuffer"}),e)},Bt=function(t,e){return Mt(m(t,{method:"POST"}),e)},Ot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Ct=[],At=0;var Ft=function t(e,r){if(J.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),At>=$.MAX_PARALLEL_IMAGE_REQUESTS){var n={requestParameters:e,callback:r,cancelled:!1,cancel:function(){this.cancelled=!0}};return Ct.push(n),n}At++;var i=!1,o=function(){if(!i)for(i=!0,At--;Ct.length&&At<$.MAX_PARALLEL_IMAGE_REQUESTS;){var e=Ct.shift();e.cancelled||(e.cancel=t(e.requestParameters,e.callback).cancel)}},s=Rt(e,(function(t,e,n,i){o(),t?r(t):e&&(It()?function(t,e){var r=new a.Blob([new Uint8Array(t)],{type:"image/png"});a.createImageBitmap(r).then((function(t){e(null,t)})).catch((function(t){e(new Error("Could not load image because of "+t.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))}(e,r):function(t,e,r,n){var i=new a.Image,o=a.URL;i.onload=function(){e(null,i),o.revokeObjectURL(i.src),i.onload=null,a.requestAnimationFrame((function(){i.src=Ot}))},i.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var s=new a.Blob([new Uint8Array(t)],{type:"image/png"});i.cacheControl=r,i.expires=n,i.src=t.byteLength?o.createObjectURL(s):Ot}(e,r,n,i))}));return{cancel:function(){s.cancel(),o()}}};function Nt(t,e,r){r[t]&&-1!==r[t].indexOf(e)||(r[t]=r[t]||[],r[t].push(e))}function Vt(t,e,r){if(r&&r[t]){var n=r[t].indexOf(e);-1!==n&&r[t].splice(n,1)}}var Ut=function(t,e){void 0===e&&(e={}),m(this,e),this.type=t},jt=function(t){function e(e,r){void 0===r&&(r={}),t.call(this,"error",m({error:e},r))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Ut),qt=function(){};qt.prototype.on=function(t,e){return this._listeners=this._listeners||{},Nt(t,e,this._listeners),this},qt.prototype.off=function(t,e){return Vt(t,e,this._listeners),Vt(t,e,this._oneTimeListeners),this},qt.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},Nt(t,e,this._oneTimeListeners),this},qt.prototype.fire=function(t,e){"string"==typeof t&&(t=new Ut(t,e||{}));var r=t.type;if(this.listens(r)){t.target=this;for(var n=0,i=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];n<i.length;n+=1)i[n].call(this,t);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];o<a.length;o+=1){var s=a[o];Vt(r,s,this._oneTimeListeners),s.call(this,t)}var l=this._eventedParent;l&&(m(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),l.fire(t))}else t instanceof jt&&console.error(t.error);return this},qt.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},qt.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var Zt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Gt=function(t,e,r,n){this.message=(t?t+": ":"")+r,n&&(this.identifier=n),null!=e&&e.__line__&&(this.line=e.__line__)};function Wt(t){var e=t.value;return e?[new Gt(t.key,e,"constants have been deprecated as of v8")]:[]}function Ht(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];for(var n=0,i=e;n<i.length;n+=1){var o=i[n];for(var a in o)t[a]=o[a]}return t}function Xt(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Kt(t){if(Array.isArray(t))return t.map(Kt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var r in t)e[r]=Kt(t[r]);return e}return Xt(t)}var Yt=function(t){function e(e,r){t.call(this,r),this.message=r,this.key=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),Qt=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var r=0,n=e;r<n.length;r+=1){var i=n[r];this.bindings[i[0]]=i[1]}};Qt.prototype.concat=function(t){return new Qt(this,t)},Qt.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Qt.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var $t={kind:"null"},Jt={kind:"number"},te={kind:"string"},ee={kind:"boolean"},re={kind:"color"},ne={kind:"object"},ie={kind:"value"},oe={kind:"collator"},ae={kind:"formatted"},se={kind:"resolvedImage"};function le(t,e){return{kind:"array",itemType:t,N:e}}function ue(t){if("array"===t.kind){var e=ue(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var ce=[$t,Jt,te,ee,re,ae,ne,le(ie),se];function pe(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!pe(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var r=0,n=ce;r<n.length;r+=1)if(!pe(n[r],e))return null}return"Expected "+ue(t)+" but found "+ue(e)+" instead."}function he(t,e){return e.some((function(e){return e.kind===t.kind}))}function fe(t,e){return e.some((function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t}))}var de=t((function(t,e){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return n("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function a(t,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}try{e.parseCSSColor=function(t){var e,s=t.replace(/ /g,"").toLowerCase();if(s in r)return r[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=s.indexOf("("),u=s.indexOf(")");if(-1!==l&&u+1===s.length){var c=s.substr(0,l),p=s.substr(l+1,u-(l+1)).split(","),h=1;switch(c){case"rgba":if(4!==p.length)return null;h=o(p.pop());case"rgb":return 3!==p.length?null:[i(p[0]),i(p[1]),i(p[2]),h];case"hsla":if(4!==p.length)return null;h=o(p.pop());case"hsl":if(3!==p.length)return null;var f=(parseFloat(p[0])%360+360)%360/360,d=o(p[1]),m=o(p[2]),y=m<=.5?m*(d+1):m+d-m*d,g=2*m-y;return[n(255*a(g,y,f+1/3)),n(255*a(g,y,f)),n(255*a(g,y,f-1/3)),h];default:return null}}return null}}catch(t){}})).parseCSSColor,me=function(t,e,r,n){void 0===n&&(n=1),this.r=t,this.g=e,this.b=r,this.a=n};me.parse=function(t){if(t){if(t instanceof me)return t;if("string"==typeof t){var e=de(t);if(e)return new me(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},me.prototype.toString=function(){var t=this.toArray(),e=t[1],r=t[2],n=t[3];return"rgba("+Math.round(t[0])+","+Math.round(e)+","+Math.round(r)+","+n+")"},me.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},me.black=new me(0,0,0,1),me.white=new me(1,1,1,1),me.transparent=new me(0,0,0,0),me.red=new me(1,0,0,1);var ye=function(t,e,r){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ye.prototype.compare=function(t,e){return this.collator.compare(t,e)},ye.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ge=function(t,e,r,n,i){this.text=t,this.image=e,this.scale=r,this.fontStack=n,this.textColor=i},ve=function(t){this.sections=t};ve.fromString=function(t){return new ve([new ge(t,null,null,null,null)])},ve.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))},ve.factory=function(t){return t instanceof ve?t:ve.fromString(t)},ve.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")},ve.prototype.serialize=function(){for(var t=["format"],e=0,r=this.sections;e<r.length;e+=1){var n=r[e];if(n.image)t.push(["image",n.image.name]);else{t.push(n.text);var i={};n.fontStack&&(i["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(i["font-scale"]=n.scale),n.textColor&&(i["text-color"]=["rgba"].concat(n.textColor.toArray())),t.push(i)}}return t};var _e=function(t){this.name=t.name,this.available=t.available};function xe(t,e,r,n){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:"Invalid rgba value ["+[t,e,r,n].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof n?[t,e,r,n]:[t,e,r]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function be(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof me)return!0;if(t instanceof ye)return!0;if(t instanceof ve)return!0;if(t instanceof _e)return!0;if(Array.isArray(t)){for(var e=0,r=t;e<r.length;e+=1)if(!be(r[e]))return!1;return!0}if("object"==typeof t){for(var n in t)if(!be(t[n]))return!1;return!0}return!1}function we(t){if(null===t)return $t;if("string"==typeof t)return te;if("boolean"==typeof t)return ee;if("number"==typeof t)return Jt;if(t instanceof me)return re;if(t instanceof ye)return oe;if(t instanceof ve)return ae;if(t instanceof _e)return se;if(Array.isArray(t)){for(var e,r=t.length,n=0,i=t;n<i.length;n+=1){var o=we(i[n]);if(e){if(e===o)continue;e=ie;break}e=o}return le(e||ie,r)}return ne}function Se(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof me||t instanceof ve||t instanceof _e?t.toString():JSON.stringify(t)}_e.prototype.toString=function(){return this.name},_e.fromString=function(t){return t?new _e({name:t,available:!1}):null},_e.prototype.serialize=function(){return["image",this.name]};var ke=function(t,e){this.type=t,this.value=e};ke.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!be(t[1]))return e.error("invalid value");var r=t[1],n=we(r),i=e.expectedType;return"array"!==n.kind||0!==n.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(n=i),new ke(n,r)},ke.prototype.evaluate=function(){return this.value},ke.prototype.eachChild=function(){},ke.prototype.outputDefined=function(){return!0},ke.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof me?["rgba"].concat(this.value.toArray()):this.value instanceof ve?this.value.serialize():this.value};var Te=function(t){this.name="ExpressionEvaluationError",this.message=t};Te.prototype.toJSON=function(){return this.message};var Ee={string:te,number:Jt,boolean:ee,object:ne},Ie=function(t,e){this.type=t,this.args=e};Ie.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r,n=1,i=t[0];if("array"===i){var o,a;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in Ee)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);o=Ee[s],n++}else o=ie;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],n++}r=le(o,a)}else r=Ee[i];for(var l=[];n<t.length;n++){var u=e.parse(t[n],n,ie);if(!u)return null;l.push(u)}return new Ie(r,l)},Ie.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var r=this.args[e].evaluate(t);if(!pe(this.type,we(r)))return r;if(e===this.args.length-1)throw new Te("Expected value to be of type "+ue(this.type)+", but found "+ue(we(r))+" instead.")}return null},Ie.prototype.eachChild=function(t){this.args.forEach(t)},Ie.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},Ie.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var r=t.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){e.push(r.kind);var n=t.N;("number"==typeof n||this.args.length>1)&&e.push(n)}}return e.concat(this.args.map((function(t){return t.serialize()})))};var ze=function(t){this.type=ae,this.sections=t};ze.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r=t[1];if(!Array.isArray(r)&&"object"==typeof r)return e.error("First argument must be an image or text section.");for(var n=[],i=!1,o=1;o<=t.length-1;++o){var a=t[o];if(i&&"object"==typeof a&&!Array.isArray(a)){i=!1;var s=null;if(a["font-scale"]&&!(s=e.parse(a["font-scale"],1,Jt)))return null;var l=null;if(a["text-font"]&&!(l=e.parse(a["text-font"],1,le(te))))return null;var u=null;if(a["text-color"]&&!(u=e.parse(a["text-color"],1,re)))return null;var c=n[n.length-1];c.scale=s,c.font=l,c.textColor=u}else{var p=e.parse(t[o],1,ie);if(!p)return null;var h=p.type.kind;if("string"!==h&&"value"!==h&&"null"!==h&&"resolvedImage"!==h)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,n.push({content:p,scale:null,font:null,textColor:null})}}return new ze(n)},ze.prototype.evaluate=function(t){return new ve(this.sections.map((function(e){var r=e.content.evaluate(t);return we(r)===se?new ge("",r,null,null,null):new ge(Se(r),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))},ze.prototype.eachChild=function(t){for(var e=0,r=this.sections;e<r.length;e+=1){var n=r[e];t(n.content),n.scale&&t(n.scale),n.font&&t(n.font),n.textColor&&t(n.textColor)}},ze.prototype.outputDefined=function(){return!1},ze.prototype.serialize=function(){for(var t=["format"],e=0,r=this.sections;e<r.length;e+=1){var n=r[e];t.push(n.content.serialize());var i={};n.scale&&(i["font-scale"]=n.scale.serialize()),n.font&&(i["text-font"]=n.font.serialize()),n.textColor&&(i["text-color"]=n.textColor.serialize()),t.push(i)}return t};var Ce=function(t){this.type=se,this.input=t};Ce.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var r=e.parse(t[1],1,te);return r?new Ce(r):e.error("No image name provided.")},Ce.prototype.evaluate=function(t){var e=this.input.evaluate(t),r=_e.fromString(e);return r&&t.availableImages&&(r.available=t.availableImages.indexOf(e)>-1),r},Ce.prototype.eachChild=function(t){t(this.input)},Ce.prototype.outputDefined=function(){return!1},Ce.prototype.serialize=function(){return["image",this.input.serialize()]};var Ae={"to-boolean":ee,"to-color":re,"to-number":Jt,"to-string":te},Pe=function(t,e){this.type=t,this.args=e};Pe.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r=t[0];if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return e.error("Expected one argument.");for(var n=Ae[r],i=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,ie);if(!a)return null;i.push(a)}return new Pe(n,i)},Pe.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,r,n=0,i=this.args;n<i.length;n+=1){if(r=null,(e=i[n].evaluate(t))instanceof me)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(r=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":xe(e[0],e[1],e[2],e[3])))return new me(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Te(r||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var a=null,s=0,l=this.args;s<l.length;s+=1){if(null===(a=l[s].evaluate(t)))return 0;var u=Number(a);if(!isNaN(u))return u}throw new Te("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?ve.fromString(Se(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?_e.fromString(Se(this.args[0].evaluate(t))):Se(this.args[0].evaluate(t))},Pe.prototype.eachChild=function(t){this.args.forEach(t)},Pe.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},Pe.prototype.serialize=function(){if("formatted"===this.type.kind)return new ze([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Ce(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild((function(e){t.push(e.serialize())})),t};var De=["Unknown","Point","LineString","Polygon"],Me=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Me.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Me.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?De[this.feature.type]:this.feature.type:null},Me.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Me.prototype.canonicalID=function(){return this.canonical},Me.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Me.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=me.parse(t)),e};var Le=function(t,e,r,n){this.name=t,this.type=e,this._evaluate=r,this.args=n};Le.prototype.evaluate=function(t){return this._evaluate(t,this.args)},Le.prototype.eachChild=function(t){this.args.forEach(t)},Le.prototype.outputDefined=function(){return!1},Le.prototype.serialize=function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))},Le.parse=function(t,e){var r,n=t[0],i=Le.definitions[n];if(!i)return e.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=a.filter((function(e){var r=e[0];return!Array.isArray(r)||r.length===t.length-1})),l=null,u=0,c=s;u<c.length;u+=1){var p=c[u],h=p[0],f=p[1];l=new rr(e.registry,e.path,null,e.scope);for(var d=[],m=!1,y=1;y<t.length;y++){var g=t[y],v=Array.isArray(h)?h[y-1]:h.type,_=l.parse(g,1+d.length,v);if(!_){m=!0;break}d.push(_)}if(!m)if(Array.isArray(h)&&h.length!==d.length)l.error("Expected "+h.length+" arguments, but found "+d.length+" instead.");else{for(var x=0;x<d.length;x++){var b=Array.isArray(h)?h[x]:h.type,w=d[x];l.concat(x+1).checkSubtype(b,w.type)}if(0===l.errors.length)return new Le(n,o,f,d)}}if(1===s.length)(r=e.errors).push.apply(r,l.errors);else{for(var S=(s.length?s:a).map((function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(ue).join(", ")+")":"("+ue(e.type)+"...)"})).join(" | "),k=[],T=1;T<t.length;T++){var E=e.parse(t[T],1+k.length);if(!E)return null;k.push(ue(E.type))}e.error("Expected arguments of type "+S+", but found ("+k.join(", ")+") instead.")}return null},Le.register=function(t,e){for(var r in Le.definitions=e,e)t[r]=Le};var Re=function(t,e,r){this.type=oe,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=e};function Be(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Oe(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Fe(t,e){var r=(180+t[0])/360,n=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,i=Math.pow(2,e.z);return[Math.round(r*i*8192),Math.round(n*i*8192)]}function Ne(t,e,r){return e[1]>t[1]!=r[1]>t[1]&&t[0]<(r[0]-e[0])*(t[1]-e[1])/(r[1]-e[1])+e[0]}function Ve(t,e){for(var r,n,i,o,a,s,l,u=!1,c=0,p=e.length;c<p;c++)for(var h=e[c],f=0,d=h.length;f<d-1;f++){if((o=(r=t)[0]-(n=h[f])[0])*(l=r[1]-(i=h[f+1])[1])-(s=r[0]-i[0])*(a=r[1]-n[1])==0&&o*s<=0&&a*l<=0)return!1;Ne(t,h[f],h[f+1])&&(u=!u)}return u}function Ue(t,e){for(var r=0;r<e.length;r++)if(Ve(t,e[r]))return!0;return!1}function je(t,e,r,n){var i=n[0]-r[0],o=n[1]-r[1],a=(t[0]-r[0])*o-i*(t[1]-r[1]),s=(e[0]-r[0])*o-i*(e[1]-r[1]);return a>0&&s<0||a<0&&s>0}function qe(t,e,r){for(var n=0,i=r;n<i.length;n+=1)for(var o=i[n],a=0;a<o.length-1;++a)if(0!=(p=[(c=o[a+1])[0]-(u=o[a])[0],c[1]-u[1]])[0]*(h=[(l=e)[0]-(s=t)[0],l[1]-s[1]])[1]-p[1]*h[0]&&je(s,l,u,c)&&je(u,c,s,l))return!0;var s,l,u,c,p,h;return!1}function Ze(t,e){for(var r=0;r<t.length;++r)if(!Ve(t[r],e))return!1;for(var n=0;n<t.length-1;++n)if(qe(t[n],t[n+1],e))return!1;return!0}function Ge(t,e){for(var r=0;r<e.length;r++)if(Ze(t,e[r]))return!0;return!1}function We(t,e,r){for(var n=[],i=0;i<t.length;i++){for(var o=[],a=0;a<t[i].length;a++){var s=Fe(t[i][a],r);Be(e,s),o.push(s)}n.push(o)}return n}function He(t,e,r){for(var n=[],i=0;i<t.length;i++){var o=We(t[i],e,r);n.push(o)}return n}function Xe(t,e,r,n){if(t[0]<r[0]||t[0]>r[2]){var i=.5*n,o=t[0]-r[0]>i?-n:r[0]-t[0]>i?n:0;0===o&&(o=t[0]-r[2]>i?-n:r[2]-t[0]>i?n:0),t[0]+=o}Be(e,t)}function Ke(t,e,r,n){for(var i=8192*Math.pow(2,n.z),o=[8192*n.x,8192*n.y],a=[],s=0,l=t;s<l.length;s+=1)for(var u=0,c=l[s];u<c.length;u+=1){var p=c[u],h=[p.x+o[0],p.y+o[1]];Xe(h,e,r,i),a.push(h)}return a}function Ye(t,e,r,n){for(var i,o=8192*Math.pow(2,n.z),a=[8192*n.x,8192*n.y],s=[],l=0,u=t;l<u.length;l+=1){for(var c=[],p=0,h=u[l];p<h.length;p+=1){var f=h[p],d=[f.x+a[0],f.y+a[1]];Be(e,d),c.push(d)}s.push(c)}if(e[2]-e[0]<=o/2){(i=e)[0]=i[1]=1/0,i[2]=i[3]=-1/0;for(var m=0,y=s;m<y.length;m+=1)for(var g=0,v=y[m];g<v.length;g+=1)Xe(v[g],e,r,o)}return s}Re.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var r=t[1];if("object"!=typeof r||Array.isArray(r))return e.error("Collator options argument must be an object.");var n=e.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,ee);if(!n)return null;var i=e.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,ee);if(!i)return null;var o=null;return r.locale&&!(o=e.parse(r.locale,1,te))?null:new Re(n,i,o)},Re.prototype.evaluate=function(t){return new ye(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},Re.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},Re.prototype.outputDefined=function(){return!1},Re.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Qe=function(t,e){this.type=ee,this.geojson=t,this.geometries=e};function $e(t){if(t instanceof Le){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Qe)return!1;var e=!0;return t.eachChild((function(t){e&&!$e(t)&&(e=!1)})),e}function Je(t){if(t instanceof Le&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!Je(t)&&(e=!1)})),e}function tr(t,e){if(t instanceof Le&&e.indexOf(t.name)>=0)return!1;var r=!0;return t.eachChild((function(t){r&&!tr(t,e)&&(r=!1)})),r}Qe.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(be(t[1])){var r=t[1];if("FeatureCollection"===r.type)for(var n=0;n<r.features.length;++n){var i=r.features[n].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new Qe(r,r.features[n].geometry)}else if("Feature"===r.type){var o=r.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new Qe(r,r.geometry)}else if("Polygon"===r.type||"MultiPolygon"===r.type)return new Qe(r,r)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Qe.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){var o=We(e.coordinates,n,i),a=Ke(t.geometry(),r,n,i);if(!Oe(r,n))return!1;for(var s=0,l=a;s<l.length;s+=1)if(!Ve(l[s],o))return!1}if("MultiPolygon"===e.type){var u=He(e.coordinates,n,i),c=Ke(t.geometry(),r,n,i);if(!Oe(r,n))return!1;for(var p=0,h=c;p<h.length;p+=1)if(!Ue(h[p],u))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){var o=We(e.coordinates,n,i),a=Ye(t.geometry(),r,n,i);if(!Oe(r,n))return!1;for(var s=0,l=a;s<l.length;s+=1)if(!Ze(l[s],o))return!1}if("MultiPolygon"===e.type){var u=He(e.coordinates,n,i),c=Ye(t.geometry(),r,n,i);if(!Oe(r,n))return!1;for(var p=0,h=c;p<h.length;p+=1)if(!Ge(h[p],u))return!1}return!0}(t,this.geometries)}return!1},Qe.prototype.eachChild=function(){},Qe.prototype.outputDefined=function(){return!0},Qe.prototype.serialize=function(){return["within",this.geojson]};var er=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};er.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var r=t[1];return e.scope.has(r)?new er(r,e.scope.get(r)):e.error('Unknown variable "'+r+'". Make sure "'+r+'" has been bound in an enclosing "let" expression before using it.',1)},er.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},er.prototype.eachChild=function(){},er.prototype.outputDefined=function(){return!1},er.prototype.serialize=function(){return["var",this.name]};var rr=function(t,e,r,n,i){void 0===e&&(e=[]),void 0===n&&(n=new Qt),void 0===i&&(i=[]),this.registry=t,this.path=e,this.key=e.map((function(t){return"["+t+"]"})).join(""),this.scope=n,this.errors=i,this.expectedType=r};function nr(t,e){for(var r,n=t.length-1,i=0,o=n,a=0;i<=o;)if((r=t[a=Math.floor((i+o)/2)])<=e){if(a===n||e<t[a+1])return a;i=a+1}else{if(!(r>e))throw new Te("Input is not a number.");o=a-1}return 0}rr.prototype.parse=function(t,e,r,n,i){return void 0===i&&(i={}),e?this.concat(e,r,n)._parse(t,i):this._parse(t,i)},rr.prototype._parse=function(t,e){function r(t,e,r){return"assert"===r?new Ie(e,[t]):"coerce"===r?new Pe(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=t[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[n];if(i){var o=i.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=r(o,a,e.typeAnnotation||"coerce");else o=r(o,a,e.typeAnnotation||"assert")}if(!(o instanceof ke)&&"resolvedImage"!==o.type.kind&&function t(e){if(e instanceof er)return t(e.boundExpression);if(e instanceof Le&&"error"===e.name)return!1;if(e instanceof Re)return!1;if(e instanceof Qe)return!1;var r=e instanceof Pe||e instanceof Ie,n=!0;return e.eachChild((function(e){n=r?n&&t(e):n&&e instanceof ke})),!!n&&$e(e)&&tr(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var l=new Me;try{o=new ke(o.type,o.evaluate(l))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},rr.prototype.concat=function(t,e,r){var n="number"==typeof t?this.path.concat(t):this.path,i=r?this.scope.concat(r):this.scope;return new rr(this.registry,n,e||null,i,this.errors)},rr.prototype.error=function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];var n=""+this.key+e.map((function(t){return"["+t+"]"})).join("");this.errors.push(new Yt(n,t))},rr.prototype.checkSubtype=function(t,e){var r=pe(t,e);return r&&this.error(r),r};var ir=function(t,e,r){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var n=0,i=r;n<i.length;n+=1){var o=i[n],a=o[1];this.labels.push(o[0]),this.outputs.push(a)}};function or(t,e,r){return t*(1-r)+e*r}ir.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var r=e.parse(t[1],1,Jt);if(!r)return null;var n=[],i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var o=1;o<t.length;o+=2){var a=1===o?-1/0:t[o],s=t[o+1],l=o,u=o+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(n.length&&n[n.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var c=e.parse(s,u,i);if(!c)return null;i=i||c.type,n.push([a,c])}return new ir(i,r,n)},ir.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);var i=e.length;return n>=e[i-1]?r[i-1].evaluate(t):r[nr(e,n)].evaluate(t)},ir.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1)t(r[e])},ir.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},ir.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var ar=Object.freeze({__proto__:null,number:or,color:function(t,e,r){return new me(or(t.r,e.r,r),or(t.g,e.g,r),or(t.b,e.b,r),or(t.a,e.a,r))},array:function(t,e,r){return t.map((function(t,n){return or(t,e[n],r)}))}}),sr=6/29*3*(6/29),lr=Math.PI/180,ur=180/Math.PI;function cr(t){return t>.008856451679035631?Math.pow(t,1/3):t/sr+4/29}function pr(t){return t>6/29?t*t*t:sr*(t-4/29)}function hr(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function fr(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function dr(t){var e=fr(t.r),r=fr(t.g),n=fr(t.b),i=cr((.4124564*e+.3575761*r+.1804375*n)/.95047),o=cr((.2126729*e+.7151522*r+.072175*n)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-cr((.0193339*e+.119192*r+.9503041*n)/1.08883)),alpha:t.a}}function mr(t){var e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=1*pr(e),r=.95047*pr(r),n=1.08883*pr(n),new me(hr(3.2404542*r-1.5371385*e-.4985314*n),hr(-.969266*r+1.8760108*e+.041556*n),hr(.0556434*r-.2040259*e+1.0572252*n),t.alpha)}function yr(t,e,r){var n=e-t;return t+r*(n>180||n<-180?n-360*Math.round(n/360):n)}var gr={forward:dr,reverse:mr,interpolate:function(t,e,r){return{l:or(t.l,e.l,r),a:or(t.a,e.a,r),b:or(t.b,e.b,r),alpha:or(t.alpha,e.alpha,r)}}},vr={forward:function(t){var e=dr(t),r=e.l,n=e.a,i=e.b,o=Math.atan2(i,n)*ur;return{h:o<0?o+360:o,c:Math.sqrt(n*n+i*i),l:r,alpha:t.a}},reverse:function(t){var e=t.h*lr,r=t.c;return mr({l:t.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})},interpolate:function(t,e,r){return{h:yr(t.h,e.h,r),c:or(t.c,e.c,r),l:or(t.l,e.l,r),alpha:or(t.alpha,e.alpha,r)}}},_r=Object.freeze({__proto__:null,lab:gr,hcl:vr}),xr=function(t,e,r,n,i){this.type=t,this.operator=e,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(var o=0,a=i;o<a.length;o+=1){var s=a[o],l=s[1];this.labels.push(s[0]),this.outputs.push(l)}};function br(t,e,r,n){var i=n-r,o=t-r;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}xr.interpolationFactor=function(t,e,n,i){var o=0;if("exponential"===t.name)o=br(e,t.base,n,i);else if("linear"===t.name)o=br(e,1,n,i);else if("cubic-bezier"===t.name){var a=t.controlPoints;o=new r(a[0],a[1],a[2],a[3]).solve(br(e,1,n,i))}return o},xr.parse=function(t,e){var r=t[0],n=t[1],i=t[2],o=t.slice(3);if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var a=n[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:a}}else{if("cubic-bezier"!==n[0])return e.error("Unknown interpolation type "+String(n[0]),1,0);var s=n.slice(1);if(4!==s.length||s.some((function(t){return"number"!=typeof t||t<0||t>1})))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(i=e.parse(i,2,Jt)))return null;var l=[],u=null;"interpolate-hcl"===r||"interpolate-lab"===r?u=re:e.expectedType&&"value"!==e.expectedType.kind&&(u=e.expectedType);for(var c=0;c<o.length;c+=2){var p=o[c],h=o[c+1],f=c+3,d=c+4;if("number"!=typeof p)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(l.length&&l[l.length-1][0]>=p)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',f);var m=e.parse(h,d,u);if(!m)return null;u=u||m.type,l.push([p,m])}return"number"===u.kind||"color"===u.kind||"array"===u.kind&&"number"===u.itemType.kind&&"number"==typeof u.N?new xr(u,r,n,i,l):e.error("Type "+ue(u)+" is not interpolatable.")},xr.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);var i=e.length;if(n>=e[i-1])return r[i-1].evaluate(t);var o=nr(e,n),a=xr.interpolationFactor(this.interpolation,n,e[o],e[o+1]),s=r[o].evaluate(t),l=r[o+1].evaluate(t);return"interpolate"===this.operator?ar[this.type.kind.toLowerCase()](s,l,a):"interpolate-hcl"===this.operator?vr.reverse(vr.interpolate(vr.forward(s),vr.forward(l),a)):gr.reverse(gr.interpolate(gr.forward(s),gr.forward(l),a))},xr.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1)t(r[e])},xr.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},xr.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],r=0;r<this.labels.length;r++)e.push(this.labels[r],this.outputs[r].serialize());return e};var wr=function(t,e){this.type=t,this.args=e};wr.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var r=null,n=e.expectedType;n&&"value"!==n.kind&&(r=n);for(var i=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=e.parse(a[o],1+i.length,r,void 0,{typeAnnotation:"omit"});if(!s)return null;r=r||s.type,i.push(s)}var l=n&&i.some((function(t){return pe(n,t.type)}));return new wr(l?ie:r,i)},wr.prototype.evaluate=function(t){for(var e,r=null,n=0,i=0,o=this.args;i<o.length&&(n++,(r=o[i].evaluate(t))&&r instanceof _e&&!r.available&&(e||(e=r.name),r=null,n===this.args.length&&(r=e)),null===r);i+=1);return r},wr.prototype.eachChild=function(t){this.args.forEach(t)},wr.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},wr.prototype.serialize=function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t};var Sr=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};Sr.prototype.evaluate=function(t){return this.result.evaluate(t)},Sr.prototype.eachChild=function(t){for(var e=0,r=this.bindings;e<r.length;e+=1)t(r[e][1]);t(this.result)},Sr.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var r=[],n=1;n<t.length-1;n+=2){var i=t[n];if("string"!=typeof i)return e.error("Expected string, but found "+typeof i+" instead.",n);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);var o=e.parse(t[n+1],n+1);if(!o)return null;r.push([i,o])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,r);return a?new Sr(r,a):null},Sr.prototype.outputDefined=function(){return this.result.outputDefined()},Sr.prototype.serialize=function(){for(var t=["let"],e=0,r=this.bindings;e<r.length;e+=1){var n=r[e];t.push(n[0],n[1].serialize())}return t.push(this.result.serialize()),t};var kr=function(t,e,r){this.type=t,this.index=e,this.input=r};kr.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,Jt),n=e.parse(t[2],2,le(e.expectedType||ie));return r&&n?new kr(n.type.itemType,r,n):null},kr.prototype.evaluate=function(t){var e=this.index.evaluate(t),r=this.input.evaluate(t);if(e<0)throw new Te("Array index out of bounds: "+e+" < 0.");if(e>=r.length)throw new Te("Array index out of bounds: "+e+" > "+(r.length-1)+".");if(e!==Math.floor(e))throw new Te("Array index must be an integer, but found "+e+" instead.");return r[e]},kr.prototype.eachChild=function(t){t(this.index),t(this.input)},kr.prototype.outputDefined=function(){return!1},kr.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Tr=function(t,e){this.type=ee,this.needle=t,this.haystack=e};Tr.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,ie),n=e.parse(t[2],2,ie);return r&&n?he(r.type,[ee,te,Jt,$t,ie])?new Tr(r,n):e.error("Expected first argument to be of type boolean, string, number or null, but found "+ue(r.type)+" instead"):null},Tr.prototype.evaluate=function(t){var e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!r)return!1;if(!fe(e,["boolean","string","number","null"]))throw new Te("Expected first argument to be of type boolean, string, number or null, but found "+ue(we(e))+" instead.");if(!fe(r,["string","array"]))throw new Te("Expected second argument to be of type array or string, but found "+ue(we(r))+" instead.");return r.indexOf(e)>=0},Tr.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},Tr.prototype.outputDefined=function(){return!0},Tr.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Er=function(t,e,r){this.type=Jt,this.needle=t,this.haystack=e,this.fromIndex=r};Er.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,ie),n=e.parse(t[2],2,ie);if(!r||!n)return null;if(!he(r.type,[ee,te,Jt,$t,ie]))return e.error("Expected first argument to be of type boolean, string, number or null, but found "+ue(r.type)+" instead");if(4===t.length){var i=e.parse(t[3],3,Jt);return i?new Er(r,n,i):null}return new Er(r,n)},Er.prototype.evaluate=function(t){var e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!fe(e,["boolean","string","number","null"]))throw new Te("Expected first argument to be of type boolean, string, number or null, but found "+ue(we(e))+" instead.");if(!fe(r,["string","array"]))throw new Te("Expected second argument to be of type array or string, but found "+ue(we(r))+" instead.");if(this.fromIndex){var n=this.fromIndex.evaluate(t);return r.indexOf(e,n)}return r.indexOf(e)},Er.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},Er.prototype.outputDefined=function(){return!1},Er.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ir=function(t,e,r,n,i,o){this.inputType=t,this.type=e,this.input=r,this.cases=n,this.outputs=i,this.otherwise=o};Ir.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var r,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var i={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],l=t[a+1];Array.isArray(s)||(s=[s]);var u=e.concat(a);if(0===s.length)return u.error("Expected at least one branch label.");for(var c=0,p=s;c<p.length;c+=1){var h=p[c];if("number"!=typeof h&&"string"!=typeof h)return u.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return u.error("Numeric branch labels must be integer values.");if(r){if(u.checkSubtype(r,we(h)))return null}else r=we(h);if(void 0!==i[String(h)])return u.error("Branch labels must be unique.");i[String(h)]=o.length}var f=e.parse(l,a,n);if(!f)return null;n=n||f.type,o.push(f)}var d=e.parse(t[1],1,ie);if(!d)return null;var m=e.parse(t[t.length-1],t.length-1,n);return m?"value"!==d.type.kind&&e.concat(1).checkSubtype(r,d.type)?null:new Ir(r,n,d,i,o,m):null},Ir.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(we(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},Ir.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},Ir.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()},Ir.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],r=[],n={},i=0,o=Object.keys(this.cases).sort();i<o.length;i+=1){var a=o[i];void 0===(p=n[this.cases[a]])?(n[this.cases[a]]=r.length,r.push([this.cases[a],[a]])):r[p][1].push(a)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},l=0,u=r;l<u.length;l+=1){var c=u[l],p=c[0],h=c[1];e.push(1===h.length?s(h[0]):h.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var zr=function(t,e,r){this.type=t,this.branches=e,this.otherwise=r};zr.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var n=[],i=1;i<t.length-1;i+=2){var o=e.parse(t[i],i,ee);if(!o)return null;var a=e.parse(t[i+1],i+1,r);if(!a)return null;n.push([o,a]),r=r||a.type}var s=e.parse(t[t.length-1],t.length-1,r);return s?new zr(r,n,s):null},zr.prototype.evaluate=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var n=r[e],i=n[1];if(n[0].evaluate(t))return i.evaluate(t)}return this.otherwise.evaluate(t)},zr.prototype.eachChild=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var n=r[e],i=n[1];t(n[0]),t(i)}t(this.otherwise)},zr.prototype.outputDefined=function(){return this.branches.every((function(t){return t[1].outputDefined()}))&&this.otherwise.outputDefined()},zr.prototype.serialize=function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t};var Cr=function(t,e,r,n){this.type=t,this.input=e,this.beginIndex=r,this.endIndex=n};function Ar(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Pr(t,e,r,n){return 0===n.compare(e,r)}function Dr(t,e,r){var n="=="!==t&&"!="!==t;return function(){function i(t,e,r){this.type=ee,this.lhs=t,this.rhs=e,this.collator=r,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return i.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var r=t[0],o=e.parse(t[1],1,ie);if(!o)return null;if(!Ar(r,o.type))return e.concat(1).error('"'+r+"\" comparisons are not supported for type '"+ue(o.type)+"'.");var a=e.parse(t[2],2,ie);if(!a)return null;if(!Ar(r,a.type))return e.concat(2).error('"'+r+"\" comparisons are not supported for type '"+ue(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '"+ue(o.type)+"' and '"+ue(a.type)+"'.");n&&("value"===o.type.kind&&"value"!==a.type.kind?o=new Ie(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new Ie(o.type,[a])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,oe)))return null}return new i(o,a,s)},i.prototype.evaluate=function(i){var o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(n&&this.hasUntypedArgument){var s=we(o),l=we(a);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new Te('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+l.kind+") instead.")}if(this.collator&&!n&&this.hasUntypedArgument){var u=we(o),c=we(a);if("string"!==u.kind||"string"!==c.kind)return e(i,o,a)}return this.collator?r(i,o,a,this.collator.evaluate(i)):e(i,o,a)},i.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},i.prototype.outputDefined=function(){return!0},i.prototype.serialize=function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e},i}()}Cr.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,ie),n=e.parse(t[2],2,Jt);if(!r||!n)return null;if(!he(r.type,[le(ie),te,ie]))return e.error("Expected first argument to be of type array or string, but found "+ue(r.type)+" instead");if(4===t.length){var i=e.parse(t[3],3,Jt);return i?new Cr(r.type,r,n,i):null}return new Cr(r.type,r,n)},Cr.prototype.evaluate=function(t){var e=this.input.evaluate(t),r=this.beginIndex.evaluate(t);if(!fe(e,["string","array"]))throw new Te("Expected first argument to be of type array or string, but found "+ue(we(e))+" instead.");if(this.endIndex){var n=this.endIndex.evaluate(t);return e.slice(r,n)}return e.slice(r)},Cr.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},Cr.prototype.outputDefined=function(){return!1},Cr.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Mr=Dr("==",(function(t,e,r){return e===r}),Pr),Lr=Dr("!=",(function(t,e,r){return e!==r}),(function(t,e,r,n){return!Pr(0,e,r,n)})),Rr=Dr("<",(function(t,e,r){return e<r}),(function(t,e,r,n){return n.compare(e,r)<0})),Br=Dr(">",(function(t,e,r){return e>r}),(function(t,e,r,n){return n.compare(e,r)>0})),Or=Dr("<=",(function(t,e,r){return e<=r}),(function(t,e,r,n){return n.compare(e,r)<=0})),Fr=Dr(">=",(function(t,e,r){return e>=r}),(function(t,e,r,n){return n.compare(e,r)>=0})),Nr=function(t,e,r,n,i){this.type=te,this.number=t,this.locale=e,this.currency=r,this.minFractionDigits=n,this.maxFractionDigits=i};Nr.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var r=e.parse(t[1],1,Jt);if(!r)return null;var n=t[2];if("object"!=typeof n||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");var i=null;if(n.locale&&!(i=e.parse(n.locale,1,te)))return null;var o=null;if(n.currency&&!(o=e.parse(n.currency,1,te)))return null;var a=null;if(n["min-fraction-digits"]&&!(a=e.parse(n["min-fraction-digits"],1,Jt)))return null;var s=null;return n["max-fraction-digits"]&&!(s=e.parse(n["max-fraction-digits"],1,Jt))?null:new Nr(r,i,o,a,s)},Nr.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},Nr.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},Nr.prototype.outputDefined=function(){return!1},Nr.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var Vr=function(t){this.type=Jt,this.input=t};Vr.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?e.error("Expected argument of type string or array, but found "+ue(r.type)+" instead."):new Vr(r):null},Vr.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Te("Expected value to be of type string or array, but found "+ue(we(e))+" instead.")},Vr.prototype.eachChild=function(t){t(this.input)},Vr.prototype.outputDefined=function(){return!1},Vr.prototype.serialize=function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t};var Ur={"==":Mr,"!=":Lr,">":Br,"<":Rr,">=":Fr,"<=":Or,array:Ie,at:kr,boolean:Ie,case:zr,coalesce:wr,collator:Re,format:ze,image:Ce,in:Tr,"index-of":Er,interpolate:xr,"interpolate-hcl":xr,"interpolate-lab":xr,length:Vr,let:Sr,literal:ke,match:Ir,number:Ie,"number-format":Nr,object:Ie,slice:Cr,step:ir,string:Ie,"to-boolean":Pe,"to-color":Pe,"to-number":Pe,"to-string":Pe,var:er,within:Qe};function jr(t,e){var r=e[0],n=e[1],i=e[2],o=e[3];r=r.evaluate(t),n=n.evaluate(t),i=i.evaluate(t);var a=o?o.evaluate(t):1,s=xe(r,n,i,a);if(s)throw new Te(s);return new me(r/255*a,n/255*a,i/255*a,a)}function qr(t,e){return t in e}function Zr(t,e){var r=e[t];return void 0===r?null:r}function Gr(t){return{type:t}}function Wr(t){return{result:"success",value:t}}function Hr(t){return{result:"error",value:t}}function Xr(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Kr(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Yr(t){return!!t.expression&&t.expression.interpolated}function Qr(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function $r(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Jr(t){return t}function tn(t,e,r){return void 0!==t?t:void 0!==e?e:void 0!==r?r:void 0}function en(t,e,r,n,i){return tn(typeof r===i?n[r]:void 0,t.default,e.default)}function rn(t,e,r){if("number"!==Qr(r))return tn(t.default,e.default);var n=t.stops.length;if(1===n)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[n-1][0])return t.stops[n-1][1];var i=nr(t.stops.map((function(t){return t[0]})),r);return t.stops[i][1]}function nn(t,e,r){var n=void 0!==t.base?t.base:1;if("number"!==Qr(r))return tn(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[i-1][0])return t.stops[i-1][1];var o=nr(t.stops.map((function(t){return t[0]})),r),a=function(t,e,r,n){var i=n-r,o=t-r;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(r,n,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],l=t.stops[o+1][1],u=ar[e.type]||Jr;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=_r[t.colorSpace];u=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=s.evaluate.apply(void 0,t),n=l.evaluate.apply(void 0,t);if(void 0!==r&&void 0!==n)return u(r,n,a)}}:u(s,l,a)}function on(t,e,r){return"color"===e.type?r=me.parse(r):"formatted"===e.type?r=ve.fromString(r.toString()):"resolvedImage"===e.type?r=_e.fromString(r.toString()):Qr(r)===e.type||"enum"===e.type&&e.values[r]||(r=void 0),tn(r,t.default,e.default)}Le.register(Ur,{error:[{kind:"error"},[te],function(t,e){throw new Te(e[0].evaluate(t))}],typeof:[te,[ie],function(t,e){return ue(we(e[0].evaluate(t)))}],"to-rgba":[le(Jt,4),[re],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[re,[Jt,Jt,Jt],jr],rgba:[re,[Jt,Jt,Jt,Jt],jr],has:{type:ee,overloads:[[[te],function(t,e){return qr(e[0].evaluate(t),t.properties())}],[[te,ne],function(t,e){var r=e[1];return qr(e[0].evaluate(t),r.evaluate(t))}]]},get:{type:ie,overloads:[[[te],function(t,e){return Zr(e[0].evaluate(t),t.properties())}],[[te,ne],function(t,e){var r=e[1];return Zr(e[0].evaluate(t),r.evaluate(t))}]]},"feature-state":[ie,[te],function(t,e){return Zr(e[0].evaluate(t),t.featureState||{})}],properties:[ne,[],function(t){return t.properties()}],"geometry-type":[te,[],function(t){return t.geometryType()}],id:[ie,[],function(t){return t.id()}],zoom:[Jt,[],function(t){return t.globals.zoom}],"heatmap-density":[Jt,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Jt,[],function(t){return t.globals.lineProgress||0}],accumulated:[ie,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[Jt,Gr(Jt),function(t,e){for(var r=0,n=0,i=e;n<i.length;n+=1)r+=i[n].evaluate(t);return r}],"*":[Jt,Gr(Jt),function(t,e){for(var r=1,n=0,i=e;n<i.length;n+=1)r*=i[n].evaluate(t);return r}],"-":{type:Jt,overloads:[[[Jt,Jt],function(t,e){var r=e[1];return e[0].evaluate(t)-r.evaluate(t)}],[[Jt],function(t,e){return-e[0].evaluate(t)}]]},"/":[Jt,[Jt,Jt],function(t,e){var r=e[1];return e[0].evaluate(t)/r.evaluate(t)}],"%":[Jt,[Jt,Jt],function(t,e){var r=e[1];return e[0].evaluate(t)%r.evaluate(t)}],ln2:[Jt,[],function(){return Math.LN2}],pi:[Jt,[],function(){return Math.PI}],e:[Jt,[],function(){return Math.E}],"^":[Jt,[Jt,Jt],function(t,e){var r=e[1];return Math.pow(e[0].evaluate(t),r.evaluate(t))}],sqrt:[Jt,[Jt],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[Jt,[Jt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[Jt,[Jt],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[Jt,[Jt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[Jt,[Jt],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[Jt,[Jt],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[Jt,[Jt],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[Jt,[Jt],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[Jt,[Jt],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[Jt,[Jt],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[Jt,Gr(Jt),function(t,e){return Math.min.apply(Math,e.map((function(e){return e.evaluate(t)})))}],max:[Jt,Gr(Jt),function(t,e){return Math.max.apply(Math,e.map((function(e){return e.evaluate(t)})))}],abs:[Jt,[Jt],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[Jt,[Jt],function(t,e){var r=e[0].evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[Jt,[Jt],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[Jt,[Jt],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[ee,[te,ie],function(t,e){var r=e[0],n=e[1];return t.properties()[r.value]===n.value}],"filter-id-==":[ee,[ie],function(t,e){var r=e[0];return t.id()===r.value}],"filter-type-==":[ee,[te],function(t,e){var r=e[0];return t.geometryType()===r.value}],"filter-<":[ee,[te,ie],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],o=n.value;return typeof i==typeof o&&i<o}],"filter-id-<":[ee,[ie],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n<i}],"filter->":[ee,[te,ie],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],o=n.value;return typeof i==typeof o&&i>o}],"filter-id->":[ee,[ie],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n>i}],"filter-<=":[ee,[te,ie],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],o=n.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[ee,[ie],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n<=i}],"filter->=":[ee,[te,ie],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],o=n.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[ee,[ie],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n>=i}],"filter-has":[ee,[ie],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[ee,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[ee,[le(te)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[ee,[le(ie)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[ee,[te,le(ie)],function(t,e){var r=e[0];return e[1].value.indexOf(t.properties()[r.value])>=0}],"filter-in-large":[ee,[te,le(ie)],function(t,e){var r=e[0],n=e[1];return function(t,e,r,n){for(;r<=n;){var i=r+n>>1;if(e[i]===t)return!0;e[i]>t?n=i-1:r=i+1}return!1}(t.properties()[r.value],n.value,0,n.value.length-1)}],all:{type:ee,overloads:[[[ee,ee],function(t,e){var r=e[1];return e[0].evaluate(t)&&r.evaluate(t)}],[Gr(ee),function(t,e){for(var r=0,n=e;r<n.length;r+=1)if(!n[r].evaluate(t))return!1;return!0}]]},any:{type:ee,overloads:[[[ee,ee],function(t,e){var r=e[1];return e[0].evaluate(t)||r.evaluate(t)}],[Gr(ee),function(t,e){for(var r=0,n=e;r<n.length;r+=1)if(n[r].evaluate(t))return!0;return!1}]]},"!":[ee,[ee],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[ee,[te],function(t,e){var r=t.globals&&t.globals.isSupportedScript;return!r||r(e[0].evaluate(t))}],upcase:[te,[te],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[te,[te],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[te,Gr(ie),function(t,e){return e.map((function(e){return Se(e.evaluate(t))})).join("")}],"resolved-locale":[te,[oe],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var an=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Me,this._defaultValue=e?function(t){return"color"===t.type&&$r(t.default)?new me(0,0,0,0):"color"===t.type?me.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};function sn(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Ur}function ln(t,e){var r=new rr(Ur,[],e?function(t){var e={color:re,string:te,number:Jt,enum:te,boolean:ee,formatted:ae,resolvedImage:se};return"array"===t.type?le(e[t.value]||ie,t.length):e[t.type]}(e):void 0),n=r.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return n?Wr(new an(n,e)):Hr(r.errors)}an.prototype.evaluateWithoutErrorHandling=function(t,e,r,n,i,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=r,this._evaluator.canonical=n,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)},an.prototype.evaluate=function(t,e,r,n,i,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=r||null,this._evaluator.canonical=n,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new Te("Expected value to be one of "+Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var un=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!Je(e.expression)};un.prototype.evaluateWithoutErrorHandling=function(t,e,r,n,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i,o)},un.prototype.evaluate=function(t,e,r,n,i,o){return this._styleExpression.evaluate(t,e,r,n,i,o)};var cn=function(t,e,r,n){this.kind=t,this.zoomStops=r,this._styleExpression=e,this.isStateDependent="camera"!==t&&!Je(e.expression),this.interpolationType=n};function pn(t,e){if("error"===(t=ln(t,e)).result)return t;var r=t.value.expression,n=$e(r);if(!n&&!Xr(e))return Hr([new Yt("","data expressions not supported")]);var i=tr(r,["zoom"]);if(!i&&!Kr(e))return Hr([new Yt("","zoom expressions not supported")]);var o=function t(e){var r=null;if(e instanceof Sr)r=t(e.result);else if(e instanceof wr)for(var n=0,i=e.args;n<i.length&&!(r=t(i[n]));n+=1);else(e instanceof ir||e instanceof xr)&&e.input instanceof Le&&"zoom"===e.input.name&&(r=e);return r instanceof Yt||e.eachChild((function(e){var n=t(e);n instanceof Yt?r=n:!r&&n?r=new Yt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&n&&r!==n&&(r=new Yt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),r}(r);return o||i?o instanceof Yt?Hr([o]):o instanceof xr&&!Yr(e)?Hr([new Yt("",'"interpolate" expressions cannot be used with this property')]):Wr(o?new cn(n?"camera":"composite",t.value,o.labels,o instanceof xr?o.interpolation:void 0):new un(n?"constant":"source",t.value)):Hr([new Yt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}cn.prototype.evaluateWithoutErrorHandling=function(t,e,r,n,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i,o)},cn.prototype.evaluate=function(t,e,r,n,i,o){return this._styleExpression.evaluate(t,e,r,n,i,o)},cn.prototype.interpolationFactor=function(t,e,r){return this.interpolationType?xr.interpolationFactor(this.interpolationType,t,e,r):0};var hn=function(t,e){this._parameters=t,this._specification=e,Ht(this,function t(e,r){var n,i,o,a="color"===r.type,s=e.stops&&"object"==typeof e.stops[0][0],l=s||!(s||void 0!==e.property),u=e.type||(Yr(r)?"exponential":"interval");if(a&&((e=Ht({},e)).stops&&(e.stops=e.stops.map((function(t){return[t[0],me.parse(t[1])]}))),e.default=me.parse(e.default?e.default:r.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!_r[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===u)n=nn;else if("interval"===u)n=rn;else if("categorical"===u){n=en,i=Object.create(null);for(var c=0,p=e.stops;c<p.length;c+=1){var h=p[c];i[h[0]]=h[1]}o=typeof e.stops[0][0]}else{if("identity"!==u)throw new Error('Unknown function type "'+u+'"');n=on}if(s){for(var f={},d=[],m=0;m<e.stops.length;m++){var y=e.stops[m],g=y[0].zoom;void 0===f[g]&&(f[g]={zoom:g,type:e.type,property:e.property,default:e.default,stops:[]},d.push(g)),f[g].stops.push([y[0].value,y[1]])}for(var v=[],_=0,x=d;_<x.length;_+=1){var b=x[_];v.push([f[b].zoom,t(f[b],r)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:xr.interpolationFactor.bind(void 0,w),zoomStops:v.map((function(t){return t[0]})),evaluate:function(t,n){var i=t.zoom;return nn({stops:v,base:e.base},r,i).evaluate(i,n)}}}if(l){var S="exponential"===u?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:S,interpolationFactor:xr.interpolationFactor.bind(void 0,S),zoomStops:e.stops.map((function(t){return t[0]})),evaluate:function(t){return n(e,r,t.zoom,i,o)}}}return{kind:"source",evaluate:function(t,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?tn(e.default,r.default):n(e,r,s,i,o)}}}(this._parameters,this._specification))};function fn(t){var e=t.key,r=t.value,n=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],l=Qr(r);if("object"!==l)return[new Gt(e,r,"object expected, "+l+" found")];for(var u in r){var c=u.split(".")[0],p=n[c]||n["*"],h=void 0;if(i[c])h=i[c];else if(n[c])h=Fn;else if(i["*"])h=i["*"];else{if(!n["*"]){s.push(new Gt(e,r[u],'unknown property "'+u+'"'));continue}h=Fn}s=s.concat(h({key:(e?e+".":e)+u,value:r[u],valueSpec:p,style:o,styleSpec:a,object:r,objectKey:u},r))}for(var f in n)i[f]||n[f].required&&void 0===n[f].default&&void 0===r[f]&&s.push(new Gt(e,r,'missing required property "'+f+'"'));return s}function dn(t){var e=t.value,r=t.valueSpec,n=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||Fn;if("array"!==Qr(e))return[new Gt(o,e,"array expected, "+Qr(e)+" found")];if(r.length&&e.length!==r.length)return[new Gt(o,e,"array length "+r.length+" expected, length "+e.length+" found")];if(r["min-length"]&&e.length<r["min-length"])return[new Gt(o,e,"array length at least "+r["min-length"]+" expected, length "+e.length+" found")];var s={type:r.value,values:r.values};i.$version<7&&(s.function=r.function),"object"===Qr(r.value)&&(s=r.value);for(var l=[],u=0;u<e.length;u++)l=l.concat(a({array:e,arrayIndex:u,value:e[u],valueSpec:s,style:n,styleSpec:i,key:o+"["+u+"]"}));return l}function mn(t){var e=t.key,r=t.value,n=t.valueSpec,i=Qr(r);return"number"===i&&r!=r&&(i="NaN"),"number"!==i?[new Gt(e,r,"number expected, "+i+" found")]:"minimum"in n&&r<n.minimum?[new Gt(e,r,r+" is less than the minimum value "+n.minimum)]:"maximum"in n&&r>n.maximum?[new Gt(e,r,r+" is greater than the maximum value "+n.maximum)]:[]}function yn(t){var e,r,n,i=t.valueSpec,o=Xt(t.value.type),a={},s="categorical"!==o&&void 0===t.value.property,l=!s,u="array"===Qr(t.value.stops)&&"array"===Qr(t.value.stops[0])&&"object"===Qr(t.value.stops[0][0]),c=fn({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===o)return[new Gt(t.key,t.value,'identity function may not have a "stops" property')];var e=[],r=t.value;return e=e.concat(dn({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:p})),"array"===Qr(r)&&0===r.length&&e.push(new Gt(t.key,r,"array must have at least one stop")),e},default:function(t){return Fn({key:t.key,value:t.value,valueSpec:i,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===o&&s&&c.push(new Gt(t.key,t.value,'missing required property "property"')),"identity"===o||t.value.stops||c.push(new Gt(t.key,t.value,'missing required property "stops"')),"exponential"===o&&t.valueSpec.expression&&!Yr(t.valueSpec)&&c.push(new Gt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!Xr(t.valueSpec)?c.push(new Gt(t.key,t.value,"property functions not supported")):s&&!Kr(t.valueSpec)&&c.push(new Gt(t.key,t.value,"zoom functions not supported"))),"categorical"!==o&&!u||void 0!==t.value.property||c.push(new Gt(t.key,t.value,'"property" property is required')),c;function p(t){var e=[],o=t.value,s=t.key;if("array"!==Qr(o))return[new Gt(s,o,"array expected, "+Qr(o)+" found")];if(2!==o.length)return[new Gt(s,o,"array length 2 expected, length "+o.length+" found")];if(u){if("object"!==Qr(o[0]))return[new Gt(s,o,"object expected, "+Qr(o[0])+" found")];if(void 0===o[0].zoom)return[new Gt(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new Gt(s,o,"object stop key must have value")];if(n&&n>Xt(o[0].zoom))return[new Gt(s,o[0].zoom,"stop zoom values must appear in ascending order")];Xt(o[0].zoom)!==n&&(n=Xt(o[0].zoom),r=void 0,a={}),e=e.concat(fn({key:s+"[0]",value:o[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:mn,value:h}}))}else e=e.concat(h({key:s+"[0]",value:o[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},o));return sn(Kt(o[1]))?e.concat([new Gt(s+"[1]",o[1],"expressions are not allowed in function stops.")]):e.concat(Fn({key:s+"[1]",value:o[1],valueSpec:i,style:t.style,styleSpec:t.styleSpec}))}function h(t,n){var s=Qr(t.value),l=Xt(t.value),u=null!==t.value?t.value:n;if(e){if(s!==e)return[new Gt(t.key,u,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Gt(t.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var c="number expected, "+s+" found";return Xr(i)&&void 0===o&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Gt(t.key,u,c)]}return"categorical"!==o||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==o&&"number"===s&&void 0!==r&&l<r?[new Gt(t.key,u,"stop domain values must appear in ascending order")]:(r=l,"categorical"===o&&l in a?[new Gt(t.key,u,"stop domain values must be unique")]:(a[l]=!0,[])):[new Gt(t.key,u,"integer expected, found "+l)]}}function gn(t){var e=("property"===t.expressionContext?pn:ln)(Kt(t.value),t.valueSpec);if("error"===e.result)return e.value.map((function(e){return new Gt(""+t.key+e.key,t.value,e.message)}));var r=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!r.outputDefined())return[new Gt(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!Je(r))return[new Gt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!Je(r))return[new Gt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!tr(r,["zoom","feature-state"]))return[new Gt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!$e(r))return[new Gt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function vn(t){var e=t.key,r=t.value,n=t.valueSpec,i=[];return Array.isArray(n.values)?-1===n.values.indexOf(Xt(r))&&i.push(new Gt(e,r,"expected one of ["+n.values.join(", ")+"], "+JSON.stringify(r)+" found")):-1===Object.keys(n.values).indexOf(Xt(r))&&i.push(new Gt(e,r,"expected one of ["+Object.keys(n.values).join(", ")+"], "+JSON.stringify(r)+" found")),i}function _n(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,r=t.slice(1);e<r.length;e+=1){var n=r[e];if(!_n(n)&&"boolean"!=typeof n)return!1}return!0;default:return!0}}hn.deserialize=function(t){return new hn(t._parameters,t._specification)},hn.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var xn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function bn(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};_n(t)||(t=Sn(t));var e=ln(t,xn);if("error"===e.result)throw new Error(e.value.map((function(t){return t.key+": "+t.message})).join(", "));return{filter:function(t,r,n){return e.value.evaluate(t,r,{},n)},needGeometry:function t(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var r=1;r<e.length;r++)if(t(e[r]))return!0;return!1}(t)}}function wn(t,e){return t<e?-1:t>e?1:0}function Sn(t){if(!t)return!0;var e,r=t[0];return t.length<=1?"any"!==r:"=="===r?kn(t[1],t[2],"=="):"!="===r?In(kn(t[1],t[2],"==")):"<"===r||">"===r||"<="===r||">="===r?kn(t[1],t[2],r):"any"===r?(e=t.slice(1),["any"].concat(e.map(Sn))):"all"===r?["all"].concat(t.slice(1).map(Sn)):"none"===r?["all"].concat(t.slice(1).map(Sn).map(In)):"in"===r?Tn(t[1],t.slice(2)):"!in"===r?In(Tn(t[1],t.slice(2))):"has"===r?En(t[1]):"!has"===r?In(En(t[1])):"within"!==r||t}function kn(t,e,r){switch(t){case"$type":return["filter-type-"+r,e];case"$id":return["filter-id-"+r,e];default:return["filter-"+r,t,e]}}function Tn(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return typeof t!=typeof e[0]}))?["filter-in-large",t,["literal",e.sort(wn)]]:["filter-in-small",t,["literal",e]]}}function En(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function In(t){return["!",t]}function zn(t){return _n(Kt(t.value))?gn(Ht({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var r=e.value,n=e.key;if("array"!==Qr(r))return[new Gt(n,r,"array expected, "+Qr(r)+" found")];var i,o=e.styleSpec,a=[];if(r.length<1)return[new Gt(n,r,"filter array must have at least 1 element")];switch(a=a.concat(vn({key:n+"[0]",value:r[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),Xt(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&"$type"===Xt(r[1])&&a.push(new Gt(n,r,'"$type" cannot be use with operator "'+r[0]+'"'));case"==":case"!=":3!==r.length&&a.push(new Gt(n,r,'filter array for operator "'+r[0]+'" must have 3 elements'));case"in":case"!in":r.length>=2&&"string"!==(i=Qr(r[1]))&&a.push(new Gt(n+"[1]",r[1],"string expected, "+i+" found"));for(var s=2;s<r.length;s++)i=Qr(r[s]),"$type"===Xt(r[1])?a=a.concat(vn({key:n+"["+s+"]",value:r[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new Gt(n+"["+s+"]",r[s],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(var l=1;l<r.length;l++)a=a.concat(t({key:n+"["+l+"]",value:r[l],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=Qr(r[1]),2!==r.length?a.push(new Gt(n,r,'filter array for "'+r[0]+'" operator must have 2 elements')):"string"!==i&&a.push(new Gt(n+"[1]",r[1],"string expected, "+i+" found"));break;case"within":i=Qr(r[1]),2!==r.length?a.push(new Gt(n,r,'filter array for "'+r[0]+'" operator must have 2 elements')):"object"!==i&&a.push(new Gt(n+"[1]",r[1],"object expected, "+i+" found"))}return a}(t)}function Cn(t,e){var r=t.key,n=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i[e+"_"+t.layerType];if(!s)return[];var l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return Fn({key:r,value:o,valueSpec:i.transition,style:n,styleSpec:i});var u,c=t.valueSpec||s[a];if(!c)return[new Gt(r,o,'unknown property "'+a+'"')];if("string"===Qr(o)&&Xr(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new Gt(r,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(u[1])+" }`.")];var p=[];return"symbol"===t.layerType&&("text-field"===a&&n&&!n.glyphs&&p.push(new Gt(r,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&$r(Kt(o))&&"identity"===Xt(o.type)&&p.push(new Gt(r,o,'"text-font" does not support identity functions'))),p.concat(Fn({key:t.key,value:o,valueSpec:c,style:n,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function An(t){return Cn(t,"paint")}function Pn(t){return Cn(t,"layout")}function Dn(t){var e=[],r=t.value,n=t.key,i=t.style,o=t.styleSpec;r.type||r.ref||e.push(new Gt(n,r,'either "type" or "ref" is required'));var a,s=Xt(r.type),l=Xt(r.ref);if(r.id)for(var u=Xt(r.id),c=0;c<t.arrayIndex;c++){var p=i.layers[c];Xt(p.id)===u&&e.push(new Gt(n,r.id,'duplicate layer id "'+r.id+'", previously used at line '+p.id.__line__))}if("ref"in r)["type","source","source-layer","filter","layout"].forEach((function(t){t in r&&e.push(new Gt(n,r[t],'"'+t+'" is prohibited for ref layers'))})),i.layers.forEach((function(t){Xt(t.id)===l&&(a=t)})),a?a.ref?e.push(new Gt(n,r.ref,"ref cannot reference another ref layer")):s=Xt(a.type):e.push(new Gt(n,r.ref,'ref layer "'+l+'" not found'));else if("background"!==s)if(r.source){var h=i.sources&&i.sources[r.source],f=h&&Xt(h.type);h?"vector"===f&&"raster"===s?e.push(new Gt(n,r.source,'layer "'+r.id+'" requires a raster source')):"raster"===f&&"raster"!==s?e.push(new Gt(n,r.source,'layer "'+r.id+'" requires a vector source')):"vector"!==f||r["source-layer"]?"raster-dem"===f&&"hillshade"!==s?e.push(new Gt(n,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!r.paint||!r.paint["line-gradient"]||"geojson"===f&&h.lineMetrics||e.push(new Gt(n,r,'layer "'+r.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new Gt(n,r,'layer "'+r.id+'" must specify a "source-layer"')):e.push(new Gt(n,r.source,'source "'+r.source+'" not found'))}else e.push(new Gt(n,r,'missing required property "source"'));return e=e.concat(fn({key:n,value:r,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Fn({key:n+".type",value:r.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:r,objectKey:"type"})},filter:zn,layout:function(t){return fn({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Pn(Ht({layerType:s},t))}}})},paint:function(t){return fn({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return An(Ht({layerType:s},t))}}})}}}))}function Mn(t){var e=t.value,r=t.key,n=Qr(e);return"string"!==n?[new Gt(r,e,"string expected, "+n+" found")]:[]}var Ln={promoteId:function(t){var e=t.key,r=t.value;if("string"===Qr(r))return Mn({key:e,value:r});var n=[];for(var i in r)n.push.apply(n,Mn({key:e+"."+i,value:r[i]}));return n}};function Rn(t){var e=t.value,r=t.key,n=t.styleSpec,i=t.style;if(!e.type)return[new Gt(r,e,'"type" is required')];var o,a=Xt(e.type);switch(a){case"vector":case"raster":case"raster-dem":return fn({key:r,value:e,valueSpec:n["source_"+a.replace("-","_")],style:t.style,styleSpec:n,objectElementValidators:Ln});case"geojson":if(o=fn({key:r,value:e,valueSpec:n.source_geojson,style:i,styleSpec:n,objectElementValidators:Ln}),e.cluster)for(var s in e.clusterProperties){var l=e.clusterProperties[s],u=l[0],c="string"==typeof u?[u,["accumulated"],["get",s]]:u;o.push.apply(o,gn({key:r+"."+s+".map",value:l[1],expressionContext:"cluster-map"})),o.push.apply(o,gn({key:r+"."+s+".reduce",value:c,expressionContext:"cluster-reduce"}))}return o;case"video":return fn({key:r,value:e,valueSpec:n.source_video,style:i,styleSpec:n});case"image":return fn({key:r,value:e,valueSpec:n.source_image,style:i,styleSpec:n});case"canvas":return[new Gt(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return vn({key:r+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:n})}}function Bn(t){var e=t.value,r=t.styleSpec,n=r.light,i=t.style,o=[],a=Qr(e);if(void 0===e)return o;if("object"!==a)return o.concat([new Gt("light",e,"object expected, "+a+" found")]);for(var s in e){var l=s.match(/^(.*)-transition$/);o=o.concat(l&&n[l[1]]&&n[l[1]].transition?Fn({key:s,value:e[s],valueSpec:r.transition,style:i,styleSpec:r}):n[s]?Fn({key:s,value:e[s],valueSpec:n[s],style:i,styleSpec:r}):[new Gt(s,e[s],'unknown property "'+s+'"')])}return o}var On={"*":function(){return[]},array:dn,boolean:function(t){var e=t.value,r=t.key,n=Qr(e);return"boolean"!==n?[new Gt(r,e,"boolean expected, "+n+" found")]:[]},number:mn,color:function(t){var e=t.key,r=t.value,n=Qr(r);return"string"!==n?[new Gt(e,r,"color expected, "+n+" found")]:null===de(r)?[new Gt(e,r,'color expected, "'+r+'" found')]:[]},constants:Wt,enum:vn,filter:zn,function:yn,layer:Dn,object:fn,source:Rn,light:Bn,string:Mn,formatted:function(t){return 0===Mn(t).length?[]:gn(t)},resolvedImage:function(t){return 0===Mn(t).length?[]:gn(t)}};function Fn(t){var e=t.value,r=t.valueSpec,n=t.styleSpec;return r.expression&&$r(Xt(e))?yn(t):r.expression&&sn(Kt(e))?gn(t):r.type&&On[r.type]?On[r.type](t):fn(Ht({},t,{valueSpec:r.type?n[r.type]:r}))}function Nn(t){var e=t.value,r=t.key,n=Mn(t);return n.length||(-1===e.indexOf("{fontstack}")&&n.push(new Gt(r,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&n.push(new Gt(r,e,'"glyphs" url must include a "{range}" token'))),n}function Vn(t,e){void 0===e&&(e=Zt);var r=[];return r=r.concat(Fn({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Nn,"*":function(){return[]}}})),t.constants&&(r=r.concat(Wt({key:"constants",value:t.constants,style:t,styleSpec:e}))),Un(r)}function Un(t){return[].concat(t).sort((function(t,e){return t.line-e.line}))}function jn(t){return function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return Un(t.apply(this,e))}}Vn.source=jn(Rn),Vn.light=jn(Bn),Vn.layer=jn(Dn),Vn.filter=jn(zn),Vn.paintProperty=jn(An),Vn.layoutProperty=jn(Pn);var qn=Vn,Zn=qn.light,Gn=qn.paintProperty,Wn=qn.layoutProperty;function Hn(t,e){var r=!1;if(e&&e.length)for(var n=0,i=e;n<i.length;n+=1)t.fire(new jt(new Error(i[n].message))),r=!0;return r}var Xn=Kn;function Kn(t,e,r){var n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],this.d=(e=i[1])+2*(r=i[2]);for(var o=0;o<this.d*this.d;o++){var a=i[3+o],s=i[3+o+1];n.push(a===s?null:i.subarray(a,s))}var l=i[3+n.length+1];this.keys=i.subarray(i[3+n.length],l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*r;for(var u=0;u<this.d*this.d;u++)n.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=r,this.scale=e/t,this.uid=0;var c=r/e*t;this.min=-c,this.max=t+c}Kn.prototype.insert=function(t,e,r,n,i){this._forEachCell(e,r,n,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)},Kn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Kn.prototype._insertCell=function(t,e,r,n,i,o){this.cells[i].push(o)},Kn.prototype.query=function(t,e,r,n,i){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=r&&a<=n&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,r,n,this._queryCell,s,{},i),s},Kn.prototype._queryCell=function(t,e,r,n,i,o,a,s){var l=this.cells[i];if(null!==l)for(var u=this.keys,c=this.bboxes,p=0;p<l.length;p++){var h=l[p];if(void 0===a[h]){var f=4*h;(s?s(c[f+0],c[f+1],c[f+2],c[f+3]):t<=c[f+2]&&e<=c[f+3]&&r>=c[f+0]&&n>=c[f+1])?(a[h]=!0,o.push(u[h])):a[h]=!1}}},Kn.prototype._forEachCell=function(t,e,r,n,i,o,a,s){for(var l=this._convertToCellCoord(t),u=this._convertToCellCoord(e),c=this._convertToCellCoord(r),p=this._convertToCellCoord(n),h=l;h<=c;h++)for(var f=u;f<=p;f++){var d=this.d*f+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(f),this._convertFromCellCoord(h+1),this._convertFromCellCoord(f+1)))&&i.call(this,t,e,r,n,d,o,a,s))return}},Kn.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Kn.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Kn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,r=0,n=0;n<this.cells.length;n++)r+=this.cells[n].length;var i=new Int32Array(e+r+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];i[3+a]=o,i.set(s,o),o+=s.length}return i[3+t.length]=o,i.set(this.keys,o),i[3+t.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var Yn=a.ImageData,Qn=a.ImageBitmap,$n={};function Jn(t,e,r){void 0===r&&(r={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),$n[t]={klass:e,omit:r.omit||[],shallow:r.shallow||[]}}for(var ti in Jn("Object",Object),Xn.serialize=function(t,e){var r=t.toArrayBuffer();return e&&e.push(r),{buffer:r}},Xn.deserialize=function(t){return new Xn(t.buffer)},Jn("Grid",Xn),Jn("Color",me),Jn("Error",Error),Jn("ResolvedImage",_e),Jn("StylePropertyFunction",hn),Jn("StyleExpression",an,{omit:["_evaluator"]}),Jn("ZoomDependentExpression",cn),Jn("ZoomConstantExpression",un),Jn("CompoundExpression",Le,{omit:["_evaluate"]}),Ur)Ur[ti]._classRegistryKey||Jn("Expression_"+ti,Ur[ti]);function ei(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function ri(t){return Qn&&t instanceof Qn}function ni(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(ei(t)||ri(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var r=t;return e&&e.push(r.buffer),r}if(t instanceof Yn)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var n=[],i=0,o=t;i<o.length;i+=1)n.push(ni(o[i],e));return n}if("object"==typeof t){var a=t.constructor,s=a._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var l=a.serialize?a.serialize(t,e):{};if(!a.serialize){for(var u in t)if(t.hasOwnProperty(u)&&!($n[s].omit.indexOf(u)>=0)){var c=t[u];l[u]=$n[s].shallow.indexOf(u)>=0?c:ni(c,e)}t instanceof Error&&(l.message=t.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(l.$name=s),l}throw new Error("can't serialize object of type "+typeof t)}function ii(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||ei(t)||ri(t)||ArrayBuffer.isView(t)||t instanceof Yn)return t;if(Array.isArray(t))return t.map(ii);if("object"==typeof t){var e=t.$name||"Object",r=$n[e].klass;if(!r)throw new Error("can't deserialize unregistered class "+e);if(r.deserialize)return r.deserialize(t);for(var n=Object.create(r.prototype),i=0,o=Object.keys(t);i<o.length;i+=1){var a=o[i];if("$name"!==a){var s=t[a];n[a]=$n[e].shallow.indexOf(a)>=0?s:ii(s)}}return n}throw new Error("can't deserialize object of type "+typeof t)}var oi=function(){this.first=!0};oi.prototype.update=function(t,e){var r=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=r,!0))};var ai=function(t){return t>=12288&&t<=12351},si=function(t){return t>=12352&&t<=12447},li=function(t){return t>=12448&&t<=12543},ui=function(t){return t>=19968&&t<=40959},ci=function(t){return t>=44032&&t<=55215},pi=function(t){return t>=65072&&t<=65103},hi=function(t){return t>=65104&&t<=65135},fi=function(t){return t>=65280&&t<=65519};function di(t){for(var e=0,r=t;e<r.length;e+=1)if(mi(r[e].charCodeAt(0)))return!0;return!1}function mi(t){return!(746!==t&&747!==t&&(t<4352||!(function(t){return t>=12704&&t<=12735}(t)||function(t){return t>=12544&&t<=12591}(t)||pi(t)&&!(t>=65097&&t<=65103)||function(t){return t>=63744&&t<=64255}(t)||function(t){return t>=13056&&t<=13311}(t)||function(t){return t>=11904&&t<=12031}(t)||function(t){return t>=12736&&t<=12783}(t)||!(!ai(t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||function(t){return t>=13312&&t<=19903}(t)||ui(t)||function(t){return t>=12800&&t<=13055}(t)||function(t){return t>=12592&&t<=12687}(t)||function(t){return t>=43360&&t<=43391}(t)||function(t){return t>=55216&&t<=55295}(t)||function(t){return t>=4352&&t<=4607}(t)||ci(t)||si(t)||function(t){return t>=12272&&t<=12287}(t)||function(t){return t>=12688&&t<=12703}(t)||function(t){return t>=12032&&t<=12255}(t)||function(t){return t>=12784&&t<=12799}(t)||li(t)&&12540!==t||!(!fi(t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!hi(t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||function(t){return t>=5120&&t<=5759}(t)||function(t){return t>=6320&&t<=6399}(t)||function(t){return t>=65040&&t<=65055}(t)||function(t){return t>=19904&&t<=19967}(t)||function(t){return t>=40960&&t<=42127}(t)||function(t){return t>=42128&&t<=42191}(t))))}function yi(t){return!(mi(t)||function(t){return!!(function(t){return t>=128&&t<=255}(t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||function(t){return t>=8192&&t<=8303}(t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||function(t){return t>=8448&&t<=8527}(t)||function(t){return t>=8528&&t<=8591}(t)||function(t){return t>=8960&&t<=9215}(t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||function(t){return t>=9216&&t<=9279}(t)&&9251!==t||function(t){return t>=9280&&t<=9311}(t)||function(t){return t>=9312&&t<=9471}(t)||function(t){return t>=9632&&t<=9727}(t)||function(t){return t>=9728&&t<=9983}(t)&&!(t>=9754&&t<=9759)||function(t){return t>=11008&&t<=11263}(t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||ai(t)||li(t)||function(t){return t>=57344&&t<=63743}(t)||pi(t)||hi(t)||fi(t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function gi(t){return t>=1424&&t<=2303||function(t){return t>=64336&&t<=65023}(t)||function(t){return t>=65136&&t<=65279}(t)}function vi(t,e){return!(!e&&gi(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||function(t){return t>=6016&&t<=6143}(t))}function _i(t){for(var e=0,r=t;e<r.length;e+=1)if(gi(r[e].charCodeAt(0)))return!0;return!1}var xi=null,bi="unavailable",wi=null,Si=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(bi="error"),xi&&xi(t)};function ki(){Ti.fire(new Ut("pluginStateChange",{pluginStatus:bi,pluginURL:wi}))}var Ti=new qt,Ei=function(){return bi},Ii=function(){if("deferred"!==bi||!wi)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");bi="loading",ki(),wi&&Rt({url:wi},(function(t){t?Si(t):(bi="loaded",ki())}))},zi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===bi||null!=zi.applyArabicShaping},isLoading:function(){return"loading"===bi},setState:function(t){bi=t.pluginStatus,wi=t.pluginURL},isParsed:function(){return null!=zi.applyArabicShaping&&null!=zi.processBidirectionalText&&null!=zi.processStyledBidirectionalText},getPluginURL:function(){return wi}},Ci=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new oi,this.transition={})};Ci.prototype.isSupportedScript=function(t){return function(t,e){for(var r=0,n=t;r<n.length;r+=1)if(!vi(n[r].charCodeAt(0),e))return!1;return!0}(t,zi.isLoaded())},Ci.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Ci.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),r=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*r}:{fromScale:.5,toScale:1,t:1-(1-r)*e}};var Ai=function(t,e){this.property=t,this.value=e,this.expression=function(t,e){if($r(t))return new hn(t,e);if(sn(t)){var r=pn(t,e);if("error"===r.result)throw new Error(r.value.map((function(t){return t.key+": "+t.message})).join(", "));return r.value}var n=t;return"string"==typeof t&&"color"===e.type&&(n=me.parse(t)),{kind:"constant",evaluate:function(){return n}}}(void 0===e?t.specification.default:e,t.specification)};Ai.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Ai.prototype.possiblyEvaluate=function(t,e,r){return this.property.possiblyEvaluate(this,t,e,r)};var Pi=function(t){this.property=t,this.value=new Ai(t,void 0)};Pi.prototype.transitioned=function(t,e){return new Mi(this.property,this.value,e,m({},t.transition,this.transition),t.now)},Pi.prototype.untransitioned=function(){return new Mi(this.property,this.value,null,{},0)};var Di=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};Di.prototype.getValue=function(t){return T(this._values[t].value.value)},Di.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Pi(this._values[t].property)),this._values[t].value=new Ai(this._values[t].property,null===e?void 0:T(e))},Di.prototype.getTransition=function(t){return T(this._values[t].transition)},Di.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Pi(this._values[t].property)),this._values[t].transition=T(e)||void 0},Di.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e],i=this.getValue(n);void 0!==i&&(t[n]=i);var o=this.getTransition(n);void 0!==o&&(t[n+"-transition"]=o)}return t},Di.prototype.transitioned=function(t,e){for(var r=new Li(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var o=i[n];r._values[o]=this._values[o].transitioned(t,e._values[o])}return r},Di.prototype.untransitioned=function(){for(var t=new Li(this._properties),e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e];t._values[n]=this._values[n].untransitioned()}return t};var Mi=function(t,e,r,n,i){this.property=t,this.value=e,this.begin=i+n.delay||0,this.end=this.begin+n.duration||0,t.specification.transition&&(n.delay||n.duration)&&(this.prior=r)};Mi.prototype.possiblyEvaluate=function(t,e,r){var n=t.now||0,i=this.value.possiblyEvaluate(t,e,r),o=this.prior;if(o){if(n>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(n<this.begin)return o.possiblyEvaluate(t,e,r);var a=(n-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,r),i,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)}(a))}return i};var Li=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};Li.prototype.possiblyEvaluate=function(t,e,r){for(var n=new Oi(this._properties),i=0,o=Object.keys(this._values);i<o.length;i+=1){var a=o[i];n._values[a]=this._values[a].possiblyEvaluate(t,e,r)}return n},Li.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var Ri=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};Ri.prototype.getValue=function(t){return T(this._values[t].value)},Ri.prototype.setValue=function(t,e){this._values[t]=new Ai(this._values[t].property,null===e?void 0:T(e))},Ri.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e],i=this.getValue(n);void 0!==i&&(t[n]=i)}return t},Ri.prototype.possiblyEvaluate=function(t,e,r){for(var n=new Oi(this._properties),i=0,o=Object.keys(this._values);i<o.length;i+=1){var a=o[i];n._values[a]=this._values[a].possiblyEvaluate(t,e,r)}return n};var Bi=function(t,e,r){this.property=t,this.value=e,this.parameters=r};Bi.prototype.isConstant=function(){return"constant"===this.value.kind},Bi.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},Bi.prototype.evaluate=function(t,e,r,n){return this.property.evaluate(this.value,this.parameters,t,e,r,n)};var Oi=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};Oi.prototype.get=function(t){return this._values[t]};var Fi=function(t){this.specification=t};Fi.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},Fi.prototype.interpolate=function(t,e,r){var n=ar[this.specification.type];return n?n(t,e,r):t};var Ni=function(t,e){this.specification=t,this.overrides=e};Ni.prototype.possiblyEvaluate=function(t,e,r,n){return new Bi(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},r,n)}:t.expression,e)},Ni.prototype.interpolate=function(t,e,r){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Bi(this,{kind:"constant",value:void 0},t.parameters);var n=ar[this.specification.type];return n?new Bi(this,{kind:"constant",value:n(t.value.value,e.value.value,r)},t.parameters):t},Ni.prototype.evaluate=function(t,e,r,n,i,o){return"constant"===t.kind?t.value:t.evaluate(e,r,n,i,o)};var Vi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(t,e,r,n){if(void 0===t.value)return new Bi(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},r,n),o="resolvedImage"===t.property.specification.type&&"string"!=typeof i?i.name:i,a=this._calculate(o,o,o,e);return new Bi(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){var s=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new Bi(this,{kind:"constant",value:s},e)}return new Bi(this,t.expression,e)},e.prototype.evaluate=function(t,e,r,n,i,o){if("source"===t.kind){var a=t.evaluate(e,r,n,i,o);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},r,n),t.evaluate({zoom:Math.floor(e.zoom)},r,n),t.evaluate({zoom:Math.floor(e.zoom)+1},r,n),e):t.value},e.prototype._calculate=function(t,e,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}},e.prototype.interpolate=function(t){return t},e}(Ni),Ui=function(t){this.specification=t};Ui.prototype.possiblyEvaluate=function(t,e,r,n){if(void 0!==t.value){if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},r,n);return this._calculate(i,i,i,e)}return this._calculate(t.expression.evaluate(new Ci(Math.floor(e.zoom-1),e)),t.expression.evaluate(new Ci(Math.floor(e.zoom),e)),t.expression.evaluate(new Ci(Math.floor(e.zoom+1),e)),e)}},Ui.prototype._calculate=function(t,e,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}},Ui.prototype.interpolate=function(t){return t};var ji=function(t){this.specification=t};ji.prototype.possiblyEvaluate=function(t,e,r,n){return!!t.expression.evaluate(e,null,{},r,n)},ji.prototype.interpolate=function(){return!1};var qi=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var r=t[e];r.specification.overridable&&this.overridableProperties.push(e);var n=this.defaultPropertyValues[e]=new Ai(r,void 0),i=this.defaultTransitionablePropertyValues[e]=new Pi(r);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=n.possiblyEvaluate({})}};Jn("DataDrivenProperty",Ni),Jn("DataConstantProperty",Fi),Jn("CrossFadedDataDrivenProperty",Vi),Jn("CrossFadedProperty",Ui),Jn("ColorRampProperty",ji);var Zi=function(t){function e(e,r){if(t.call(this),this.id=e.id,this.type=e.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),r.layout&&(this._unevaluatedLayout=new Ri(r.layout)),r.paint)){for(var n in this._transitionablePaint=new Di(r.paint),e.paint)this.setPaintProperty(n,e.paint[n],{validate:!1});for(var i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Oi(r.paint)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,r){void 0===r&&(r={}),null!=e&&this._validate(Wn,"layers."+this.id+".layout."+t,t,e,r)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)},e.prototype.getPaintProperty=function(t){return w(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,r){if(void 0===r&&(r={}),null!=e&&this._validate(Gn,"layers."+this.id+".paint."+t,t,e,r))return!1;if(w(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var n=this._transitionablePaint._values[t],i="cross-faded-data-driven"===n.property.specification["property-type"],o=n.value.isDataDriven(),a=n.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var s=this._transitionablePaint._values[t].value;return s.isDataDriven()||o||i||this._handleOverridablePaintPropertyUpdate(t,a,s)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype._handleOverridablePaintPropertyUpdate=function(t,e,r){return!1},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),k(t,(function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)}))},e.prototype._validate=function(t,e,r,n,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&Hn(this,t.call(qn,{key:e,layerType:this.type,objectKey:r,value:n,styleSpec:Zt,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof Bi&&Xr(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(qt),Gi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Wi=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Hi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Xi(t,e){void 0===e&&(e=1);var r=0,n=0;return{members:t.map((function(t){var i=Gi[t.type].BYTES_PER_ELEMENT,o=r=Ki(r,Math.max(e,i)),a=t.components||1;return n=Math.max(n,i),r+=i*a,{name:t.name,type:t.type,components:a,offset:o}})),size:Ki(r,Math.max(n,e)),alignment:e}}function Ki(t,e){return Math.ceil(t/e)*e}Hi.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},Hi.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},Hi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Hi.prototype.clear=function(){this.length=0},Hi.prototype.resize=function(t){this.reserve(t),this.length=t},Hi.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},Hi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Yi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var n=2*t;return this.int16[n+0]=e,this.int16[n+1]=r,t},e}(Hi);Yi.prototype.bytesPerElement=4,Jn("StructArrayLayout2i4",Yi);var Qi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)},e.prototype.emplace=function(t,e,r,n,i){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=r,this.int16[o+2]=n,this.int16[o+3]=i,t},e}(Hi);Qi.prototype.bytesPerElement=8,Jn("StructArrayLayout4i8",Qi);var $i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,n,i,o)},e.prototype.emplace=function(t,e,r,n,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Hi);$i.prototype.bytesPerElement=12,Jn("StructArrayLayout2i4i12",$i);var Ji=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,n,i,o)},e.prototype.emplace=function(t,e,r,n,i,o,a){var s=4*t,l=8*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.uint8[l+4]=n,this.uint8[l+5]=i,this.uint8[l+6]=o,this.uint8[l+7]=a,t},e}(Hi);Ji.prototype.bytesPerElement=8,Jn("StructArrayLayout2i4ub8",Ji);var to=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var n=2*t;return this.float32[n+0]=e,this.float32[n+1]=r,t},e}(Hi);to.prototype.bytesPerElement=8,Jn("StructArrayLayout2f8",to);var eo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,o,a,s,l,u){var c=this.length;return this.resize(c+1),this.emplace(c,t,e,r,n,i,o,a,s,l,u)},e.prototype.emplace=function(t,e,r,n,i,o,a,s,l,u,c){var p=10*t;return this.uint16[p+0]=e,this.uint16[p+1]=r,this.uint16[p+2]=n,this.uint16[p+3]=i,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=l,this.uint16[p+8]=u,this.uint16[p+9]=c,t},e}(Hi);eo.prototype.bytesPerElement=20,Jn("StructArrayLayout10ui20",eo);var ro=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,o,a,s,l,u,c,p){var h=this.length;return this.resize(h+1),this.emplace(h,t,e,r,n,i,o,a,s,l,u,c,p)},e.prototype.emplace=function(t,e,r,n,i,o,a,s,l,u,c,p,h){var f=12*t;return this.int16[f+0]=e,this.int16[f+1]=r,this.int16[f+2]=n,this.int16[f+3]=i,this.uint16[f+4]=o,this.uint16[f+5]=a,this.uint16[f+6]=s,this.uint16[f+7]=l,this.int16[f+8]=u,this.int16[f+9]=c,this.int16[f+10]=p,this.int16[f+11]=h,t},e}(Hi);ro.prototype.bytesPerElement=24,Jn("StructArrayLayout4i4ui4i24",ro);var no=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e.prototype.emplace=function(t,e,r,n){var i=3*t;return this.float32[i+0]=e,this.float32[i+1]=r,this.float32[i+2]=n,t},e}(Hi);no.prototype.bytesPerElement=12,Jn("StructArrayLayout3f12",no);var io=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint32[1*t+0]=e,t},e}(Hi);io.prototype.bytesPerElement=4,Jn("StructArrayLayout1ul4",io);var oo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,o,a,s,l){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,r,n,i,o,a,s,l)},e.prototype.emplace=function(t,e,r,n,i,o,a,s,l,u){var c=10*t,p=5*t;return this.int16[c+0]=e,this.int16[c+1]=r,this.int16[c+2]=n,this.int16[c+3]=i,this.int16[c+4]=o,this.int16[c+5]=a,this.uint32[p+3]=s,this.uint16[c+8]=l,this.uint16[c+9]=u,t},e}(Hi);oo.prototype.bytesPerElement=20,Jn("StructArrayLayout6i1ul2ui20",oo);var ao=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,n,i,o)},e.prototype.emplace=function(t,e,r,n,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Hi);ao.prototype.bytesPerElement=12,Jn("StructArrayLayout2i2i2i12",ao);var so=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,r,n,i)},e.prototype.emplace=function(t,e,r,n,i,o){var a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=r,this.float32[a+2]=n,this.int16[s+6]=i,this.int16[s+7]=o,t},e}(Hi);so.prototype.bytesPerElement=16,Jn("StructArrayLayout2f1f2i16",so);var lo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)},e.prototype.emplace=function(t,e,r,n,i){var o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=r,this.float32[a+1]=n,this.float32[a+2]=i,t},e}(Hi);lo.prototype.bytesPerElement=12,Jn("StructArrayLayout2ub2f12",lo);var uo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e.prototype.emplace=function(t,e,r,n){var i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=r,this.uint16[i+2]=n,t},e}(Hi);uo.prototype.bytesPerElement=6,Jn("StructArrayLayout3ui6",uo);var co=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,o,a,s,l,u,c,p,h,f,d,m,y){var g=this.length;return this.resize(g+1),this.emplace(g,t,e,r,n,i,o,a,s,l,u,c,p,h,f,d,m,y)},e.prototype.emplace=function(t,e,r,n,i,o,a,s,l,u,c,p,h,f,d,m,y,g){var v=24*t,_=12*t,x=48*t;return this.int16[v+0]=e,this.int16[v+1]=r,this.uint16[v+2]=n,this.uint16[v+3]=i,this.uint32[_+2]=o,this.uint32[_+3]=a,this.uint32[_+4]=s,this.uint16[v+10]=l,this.uint16[v+11]=u,this.uint16[v+12]=c,this.float32[_+7]=p,this.float32[_+8]=h,this.uint8[x+36]=f,this.uint8[x+37]=d,this.uint8[x+38]=m,this.uint32[_+10]=y,this.int16[v+22]=g,t},e}(Hi);co.prototype.bytesPerElement=48,Jn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",co);var po=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,o,a,s,l,u,c,p,h,f,d,m,y,g,v,_,x,b,w,S,k,T,E,I){var z=this.length;return this.resize(z+1),this.emplace(z,t,e,r,n,i,o,a,s,l,u,c,p,h,f,d,m,y,g,v,_,x,b,w,S,k,T,E,I)},e.prototype.emplace=function(t,e,r,n,i,o,a,s,l,u,c,p,h,f,d,m,y,g,v,_,x,b,w,S,k,T,E,I,z){var C=34*t,A=17*t;return this.int16[C+0]=e,this.int16[C+1]=r,this.int16[C+2]=n,this.int16[C+3]=i,this.int16[C+4]=o,this.int16[C+5]=a,this.int16[C+6]=s,this.int16[C+7]=l,this.uint16[C+8]=u,this.uint16[C+9]=c,this.uint16[C+10]=p,this.uint16[C+11]=h,this.uint16[C+12]=f,this.uint16[C+13]=d,this.uint16[C+14]=m,this.uint16[C+15]=y,this.uint16[C+16]=g,this.uint16[C+17]=v,this.uint16[C+18]=_,this.uint16[C+19]=x,this.uint16[C+20]=b,this.uint16[C+21]=w,this.uint16[C+22]=S,this.uint32[A+12]=k,this.float32[A+13]=T,this.float32[A+14]=E,this.float32[A+15]=I,this.float32[A+16]=z,t},e}(Hi);po.prototype.bytesPerElement=68,Jn("StructArrayLayout8i15ui1ul4f68",po);var ho=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.float32[1*t+0]=e,t},e}(Hi);ho.prototype.bytesPerElement=4,Jn("StructArrayLayout1f4",ho);var fo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e.prototype.emplace=function(t,e,r,n){var i=3*t;return this.int16[i+0]=e,this.int16[i+1]=r,this.int16[i+2]=n,t},e}(Hi);fo.prototype.bytesPerElement=6,Jn("StructArrayLayout3i6",fo);var mo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e.prototype.emplace=function(t,e,r,n){var i=4*t;return this.uint32[2*t+0]=e,this.uint16[i+2]=r,this.uint16[i+3]=n,t},e}(Hi);mo.prototype.bytesPerElement=8,Jn("StructArrayLayout1ul2ui8",mo);var yo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var n=2*t;return this.uint16[n+0]=e,this.uint16[n+1]=r,t},e}(Hi);yo.prototype.bytesPerElement=4,Jn("StructArrayLayout2ui4",yo);var go=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint16[1*t+0]=e,t},e}(Hi);go.prototype.bytesPerElement=2,Jn("StructArrayLayout1ui2",go);var vo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)},e.prototype.emplace=function(t,e,r,n,i){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=r,this.float32[o+2]=n,this.float32[o+3]=i,t},e}(Hi);vo.prototype.bytesPerElement=16,Jn("StructArrayLayout4f16",vo);var _o=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return r.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},r.x1.get=function(){return this._structArray.int16[this._pos2+2]},r.y1.get=function(){return this._structArray.int16[this._pos2+3]},r.x2.get=function(){return this._structArray.int16[this._pos2+4]},r.y2.get=function(){return this._structArray.int16[this._pos2+5]},r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.anchorPoint.get=function(){return new i(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,r),e}(Wi);_o.prototype.size=20;var xo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new _o(this,t)},e}(oo);Jn("CollisionBoxArray",xo);var bo=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},r.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},r.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},r.segment.get=function(){return this._structArray.uint16[this._pos2+10]},r.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},r.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},r.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},r.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},r.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},r.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},r.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},r.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},r.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},r.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},r.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(e.prototype,r),e}(Wi);bo.prototype.size=48;var wo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new bo(this,t)},e}(co);Jn("PlacedSymbolArray",wo);var So=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},r.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},r.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},r.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},r.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},r.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},r.key.get=function(){return this._structArray.uint16[this._pos2+8]},r.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},r.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},r.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},r.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},r.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},r.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},r.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},r.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},r.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},r.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},r.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},r.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},r.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},r.crossTileID.set=function(t){this._structArray.uint32[this._pos4+12]=t},r.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},r.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},r.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},r.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(e.prototype,r),e}(Wi);So.prototype.size=68;var ko=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new So(this,t)},e}(po);Jn("SymbolInstanceArray",ko);var To=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e}(ho);Jn("GlyphOffsetArray",To);var Eo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e}(fo);Jn("SymbolLineVertexArray",Eo);var Io=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(e.prototype,r),e}(Wi);Io.prototype.size=8;var zo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Io(this,t)},e}(mo);Jn("FeatureIndexArray",zo);var Co=Xi([{name:"a_pos",components:2,type:"Int16"}],4).members,Ao=function(t){void 0===t&&(t=[]),this.segments=t};function Po(t,e){return 256*(t=p(Math.floor(t),0,255))+p(Math.floor(e),0,255)}Ao.prototype.prepareSegment=function(t,e,r,n){var i=this.segments[this.segments.length-1];return t>Ao.MAX_VERTEX_ARRAY_LENGTH&&I("Max vertices per segment is "+Ao.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!i||i.vertexLength+t>Ao.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==n)&&(i={vertexOffset:e.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==n&&(i.sortKey=n),this.segments.push(i)),i},Ao.prototype.get=function(){return this.segments},Ao.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var r=e[t];for(var n in r.vaos)r.vaos[n].destroy()}},Ao.simpleSegment=function(t,e,r,n){return new Ao([{vertexOffset:t,primitiveOffset:e,vertexLength:r,primitiveLength:n,vaos:{},sortKey:0}])},Ao.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Jn("SegmentVector",Ao);var Do=Xi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Mo=t((function(t){t.exports=function(t,e){var r,n,i,o,a,s,l,u;for(n=t.length-(r=3&t.length),i=e,a=3432918353,s=461845907,u=0;u<n;)l=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24,++u,i=27492+(65535&(o=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,r){case 3:l^=(255&t.charCodeAt(u+2))<<16;case 2:l^=(255&t.charCodeAt(u+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(u)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}})),Lo=t((function(t){t.exports=function(t,e){for(var r,n=t.length,i=e^n,o=0;n>=4;)r=1540483477*(65535&(r=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(r>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),n-=4,++o;switch(n){case 3:i^=(255&t.charCodeAt(o+2))<<16;case 2:i^=(255&t.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}})),Ro=Mo,Bo=Lo;Ro.murmur3=Mo,Ro.murmur2=Bo;var Oo=function(){this.ids=[],this.positions=[],this.indexed=!1};Oo.prototype.add=function(t,e,r,n){this.ids.push(No(t)),this.positions.push(e,r,n)},Oo.prototype.getPositions=function(t){for(var e=No(t),r=0,n=this.ids.length-1;r<n;){var i=r+n>>1;this.ids[i]>=e?n=i:r=i+1}for(var o=[];this.ids[r]===e;)o.push({index:this.positions[3*r],start:this.positions[3*r+1],end:this.positions[3*r+2]}),r++;return o},Oo.serialize=function(t,e){var r=new Float64Array(t.ids),n=new Uint32Array(t.positions);return function t(e,r,n,i){for(;n<i;){for(var o=e[n+i>>1],a=n-1,s=i+1;;){do{a++}while(e[a]<o);do{s--}while(e[s]>o);if(a>=s)break;Vo(e,a,s),Vo(r,3*a,3*s),Vo(r,3*a+1,3*s+1),Vo(r,3*a+2,3*s+2)}s-n<i-s?(t(e,r,n,s),n=s+1):(t(e,r,s+1,i),i=s)}}(r,n,0,r.length-1),e&&e.push(r.buffer,n.buffer),{ids:r,positions:n}},Oo.deserialize=function(t){var e=new Oo;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var Fo=Math.pow(2,53)-1;function No(t){var e=+t;return!isNaN(e)&&e<=Fo?e:Ro(String(t))}function Vo(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}Jn("FeaturePositionMap",Oo);var Uo=function(t,e){this.gl=t.gl,this.location=e},jo=function(t){function e(e,r){t.call(this,e,r),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(Uo),qo=function(t){function e(e,r){t.call(this,e,r),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(Uo),Zo=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(Uo),Go=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(Uo),Wo=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(Uo),Ho=function(t){function e(e,r){t.call(this,e,r),this.current=me.transparent}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(Uo),Xo=new Float32Array(16),Ko=function(t){function e(e,r){t.call(this,e,r),this.current=Xo}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(Uo);function Yo(t){return[Po(255*t.r,255*t.g),Po(255*t.b,255*t.a)]}var Qo=function(t,e,r){this.value=t,this.uniformNames=e.map((function(t){return"u_"+t})),this.type=r};Qo.prototype.setUniform=function(t,e,r){t.set(r.constantOr(this.value))},Qo.prototype.getBinding=function(t,e,r){return"color"===this.type?new Ho(t,e):new qo(t,e)};var $o=function(t,e){this.uniformNames=e.map((function(t){return"u_"+t})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};$o.prototype.setConstantPatternPositions=function(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr},$o.prototype.setUniform=function(t,e,r,n){var i="u_pattern_to"===n?this.patternTo:"u_pattern_from"===n?this.patternFrom:"u_pixel_ratio_to"===n?this.pixelRatioTo:"u_pixel_ratio_from"===n?this.pixelRatioFrom:null;i&&t.set(i)},$o.prototype.getBinding=function(t,e,r){return"u_pattern"===r.substr(0,9)?new Wo(t,e):new qo(t,e)};var Jo=function(t,e,r,n){this.expression=t,this.type=r,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===r?2:1,offset:0}})),this.paintVertexArray=new n};Jo.prototype.populatePaintArray=function(t,e,r,n,i){var o=this.paintVertexArray.length,a=this.expression.evaluate(new Ci(0),e,{},n,[],i);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)},Jo.prototype.updatePaintArray=function(t,e,r,n){var i=this.expression.evaluate({zoom:0},r,n);this._setPaintValue(t,e,i)},Jo.prototype._setPaintValue=function(t,e,r){if("color"===this.type)for(var n=Yo(r),i=t;i<e;i++)this.paintVertexArray.emplace(i,n[0],n[1]);else{for(var o=t;o<e;o++)this.paintVertexArray.emplace(o,r);this.maxValue=Math.max(this.maxValue,Math.abs(r))}},Jo.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Jo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var ta=function(t,e,r,n,i,o){this.expression=t,this.uniformNames=e.map((function(t){return"u_"+t+"_t"})),this.type=r,this.useIntegerZoom=n,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===r?4:2,offset:0}})),this.paintVertexArray=new o};ta.prototype.populatePaintArray=function(t,e,r,n,i){var o=this.expression.evaluate(new Ci(this.zoom),e,{},n,[],i),a=this.expression.evaluate(new Ci(this.zoom+1),e,{},n,[],i),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,a)},ta.prototype.updatePaintArray=function(t,e,r,n){var i=this.expression.evaluate({zoom:this.zoom},r,n),o=this.expression.evaluate({zoom:this.zoom+1},r,n);this._setPaintValue(t,e,i,o)},ta.prototype._setPaintValue=function(t,e,r,n){if("color"===this.type)for(var i=Yo(r),o=Yo(n),a=t;a<e;a++)this.paintVertexArray.emplace(a,i[0],i[1],o[0],o[1]);else{for(var s=t;s<e;s++)this.paintVertexArray.emplace(s,r,n);this.maxValue=Math.max(this.maxValue,Math.abs(r),Math.abs(n))}},ta.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ta.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ta.prototype.setUniform=function(t,e){var r=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,n=p(this.expression.interpolationFactor(r,this.zoom,this.zoom+1),0,1);t.set(n)},ta.prototype.getBinding=function(t,e,r){return new qo(t,e)};var ea=function(t,e,r,n,i,o){this.expression=t,this.type=e,this.useIntegerZoom=r,this.zoom=n,this.layerId=o,this.zoomInPaintVertexArray=new i,this.zoomOutPaintVertexArray=new i};ea.prototype.populatePaintArray=function(t,e,r){var n=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(n,t,e.patterns&&e.patterns[this.layerId],r)},ea.prototype.updatePaintArray=function(t,e,r,n,i){this._setPaintValues(t,e,r.patterns&&r.patterns[this.layerId],i)},ea.prototype._setPaintValues=function(t,e,r,n){if(n&&r){var i=n[r.min],o=n[r.mid],a=n[r.max];if(i&&o&&a)for(var s=t;s<e;s++)this.zoomInPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],i.tl[0],i.tl[1],i.br[0],i.br[1],o.pixelRatio,i.pixelRatio),this.zoomOutPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],o.pixelRatio,a.pixelRatio)}},ea.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,Do.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,Do.members,this.expression.isStateDependent))},ea.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ra=function(t,e,r){this.binders={},this._buffers=[];var n=[];for(var i in t.paint._values)if(r(i)){var o=t.paint.get(i);if(o instanceof Bi&&Xr(o.property.specification)){var a=ia(i,t.type),s=o.value,l=o.property.specification.type,u=o.property.useIntegerZoom,c=o.property.specification["property-type"],p="cross-faded"===c||"cross-faded-data-driven"===c;if("constant"===s.kind)this.binders[i]=p?new $o(s.value,a):new Qo(s.value,a,l),n.push("/u_"+i);else if("source"===s.kind||p){var h=oa(i,l,"source");this.binders[i]=p?new ea(s,l,u,e,h,t.id):new Jo(s,a,l,h),n.push("/a_"+i)}else{var f=oa(i,l,"composite");this.binders[i]=new ta(s,a,l,u,e,f),n.push("/z_"+i)}}}this.cacheKey=n.sort().join("")};ra.prototype.getMaxValue=function(t){var e=this.binders[t];return e instanceof Jo||e instanceof ta?e.maxValue:0},ra.prototype.populatePaintArrays=function(t,e,r,n,i){for(var o in this.binders){var a=this.binders[o];(a instanceof Jo||a instanceof ta||a instanceof ea)&&a.populatePaintArray(t,e,r,n,i)}},ra.prototype.setConstantPatternPositions=function(t,e){for(var r in this.binders){var n=this.binders[r];n instanceof $o&&n.setConstantPatternPositions(t,e)}},ra.prototype.updatePaintArrays=function(t,e,r,n,i){var o=!1;for(var a in t)for(var s=0,l=e.getPositions(a);s<l.length;s+=1){var u=l[s],c=r.feature(u.index);for(var p in this.binders){var h=this.binders[p];if((h instanceof Jo||h instanceof ta||h instanceof ea)&&!0===h.expression.isStateDependent){var f=n.paint.get(p);h.expression=f.value,h.updatePaintArray(u.start,u.end,c,t[a],i),o=!0}}}return o},ra.prototype.defines=function(){var t=[];for(var e in this.binders){var r=this.binders[e];(r instanceof Qo||r instanceof $o)&&t.push.apply(t,r.uniformNames.map((function(t){return"#define HAS_UNIFORM_"+t})))}return t},ra.prototype.getBinderAttributes=function(){var t=[];for(var e in this.binders){var r=this.binders[e];if(r instanceof Jo||r instanceof ta)for(var n=0;n<r.paintVertexAttributes.length;n++)t.push(r.paintVertexAttributes[n].name);else if(r instanceof ea)for(var i=0;i<Do.members.length;i++)t.push(Do.members[i].name)}return t},ra.prototype.getBinderUniforms=function(){var t=[];for(var e in this.binders){var r=this.binders[e];if(r instanceof Qo||r instanceof $o||r instanceof ta)for(var n=0,i=r.uniformNames;n<i.length;n+=1)t.push(i[n])}return t},ra.prototype.getPaintVertexBuffers=function(){return this._buffers},ra.prototype.getUniforms=function(t,e){var r=[];for(var n in this.binders){var i=this.binders[n];if(i instanceof Qo||i instanceof $o||i instanceof ta)for(var o=0,a=i.uniformNames;o<a.length;o+=1){var s=a[o];if(e[s]){var l=i.getBinding(t,e[s],s);r.push({name:s,property:n,binding:l})}}}return r},ra.prototype.setUniforms=function(t,e,r,n){for(var i=0,o=e;i<o.length;i+=1){var a=o[i],s=a.name,l=a.property;this.binders[l].setUniform(a.binding,n,r.get(l),s)}},ra.prototype.updatePaintBuffers=function(t){for(var e in this._buffers=[],this.binders){var r=this.binders[e];if(t&&r instanceof ea){var n=2===t.fromScale?r.zoomInPaintVertexBuffer:r.zoomOutPaintVertexBuffer;n&&this._buffers.push(n)}else(r instanceof Jo||r instanceof ta)&&r.paintVertexBuffer&&this._buffers.push(r.paintVertexBuffer)}},ra.prototype.upload=function(t){for(var e in this.binders){var r=this.binders[e];(r instanceof Jo||r instanceof ta||r instanceof ea)&&r.upload(t)}this.updatePaintBuffers()},ra.prototype.destroy=function(){for(var t in this.binders){var e=this.binders[t];(e instanceof Jo||e instanceof ta||e instanceof ea)&&e.destroy()}};var na=function(t,e,r){void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var n=0,i=t;n<i.length;n+=1){var o=i[n];this.programConfigurations[o.id]=new ra(o,e,r)}this.needsUpload=!1,this._featureMap=new Oo,this._bufferOffset=0};function ia(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function oa(t,e,r){var n={color:{source:to,composite:vo},number:{source:ho,composite:to}},i=function(t){return{"line-pattern":{source:eo,composite:eo},"fill-pattern":{source:eo,composite:eo},"fill-extrusion-pattern":{source:eo,composite:eo}}[t]}(t);return i&&i[r]||n[e][r]}na.prototype.populatePaintArrays=function(t,e,r,n,i,o){for(var a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,n,i,o);void 0!==e.id&&this._featureMap.add(e.id,r,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},na.prototype.updatePaintArrays=function(t,e,r,n){for(var i=0,o=r;i<o.length;i+=1){var a=o[i];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,this._featureMap,e,a,n)||this.needsUpload}},na.prototype.get=function(t){return this.programConfigurations[t]},na.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},na.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},Jn("ConstantBinder",Qo),Jn("CrossFadedConstantBinder",$o),Jn("SourceExpressionBinder",Jo),Jn("CrossFadedCompositeBinder",ea),Jn("CompositeExpressionBinder",ta),Jn("ProgramConfiguration",ra,{omit:["_buffers"]}),Jn("ProgramConfigurationSet",na);var aa=Math.pow(2,14)-1,sa=-aa-1;function la(t){for(var e=8192/t.extent,r=t.loadGeometry(),n=0;n<r.length;n++)for(var i=r[n],o=0;o<i.length;o++){var a=i[o],s=Math.round(a.x*e),l=Math.round(a.y*e);a.x=p(s,sa,aa),a.y=p(l,sa,aa),(s<a.x||s>a.x+1||l<a.y||l>a.y+1)&&I("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return r}function ua(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?la(t):[]}}function ca(t,e,r,n,i){t.emplaceBack(2*e+(n+1)/2,2*r+(i+1)/2)}var pa=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Yi,this.indexArray=new uo,this.segments=new Ao,this.programConfigurations=new na(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function ha(t,e){for(var r=0;r<t.length;r++)if(ba(e,t[r]))return!0;for(var n=0;n<e.length;n++)if(ba(t,e[n]))return!0;return!!ya(t,e)}function fa(t,e,r){return!!ba(t,e)||!!va(e,t,r)}function da(t,e){if(1===t.length)return xa(e,t[0]);for(var r=0;r<e.length;r++)for(var n=e[r],i=0;i<n.length;i++)if(ba(t,n[i]))return!0;for(var o=0;o<t.length;o++)if(xa(e,t[o]))return!0;for(var a=0;a<e.length;a++)if(ya(t,e[a]))return!0;return!1}function ma(t,e,r){if(t.length>1){if(ya(t,e))return!0;for(var n=0;n<e.length;n++)if(va(e[n],t,r))return!0}for(var i=0;i<t.length;i++)if(va(t[i],e,r))return!0;return!1}function ya(t,e){if(0===t.length||0===e.length)return!1;for(var r=0;r<t.length-1;r++)for(var n=t[r],i=t[r+1],o=0;o<e.length-1;o++)if(ga(n,i,e[o],e[o+1]))return!0;return!1}function ga(t,e,r,n){return z(t,r,n)!==z(e,r,n)&&z(t,e,r)!==z(t,e,n)}function va(t,e,r){var n=r*r;if(1===e.length)return t.distSqr(e[0])<n;for(var i=1;i<e.length;i++)if(_a(t,e[i-1],e[i])<n)return!0;return!1}function _a(t,e,r){var n=e.distSqr(r);if(0===n)return t.distSqr(e);var i=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/n;return t.distSqr(i<0?e:i>1?r:r.sub(e)._mult(i)._add(e))}function xa(t,e){for(var r,n,i,o=!1,a=0;a<t.length;a++)for(var s=0,l=(r=t[a]).length-1;s<r.length;l=s++)(n=r[s]).y>e.y!=(i=r[l]).y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(o=!o);return o}function ba(t,e){for(var r=!1,n=0,i=t.length-1;n<t.length;i=n++){var o=t[n],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(r=!r)}return r}function wa(t,e,r){var n=r[0],i=r[2];if(t.x<n.x&&e.x<n.x||t.x>i.x&&e.x>i.x||t.y<n.y&&e.y<n.y||t.y>i.y&&e.y>i.y)return!1;var o=z(t,e,r[0]);return o!==z(t,e,r[1])||o!==z(t,e,r[2])||o!==z(t,e,r[3])}function Sa(t,e,r){var n=e.paint.get(t).value;return"constant"===n.kind?n.value:r.programConfigurations.get(e.id).getMaxValue(t)}function ka(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Ta(t,e,r,n,o){if(!e[0]&&!e[1])return t;var a=i.convert(e)._mult(o);"viewport"===r&&a._rotate(-n);for(var s=[],l=0;l<t.length;l++)s.push(t[l].sub(a));return s}pa.prototype.populate=function(t,e,r){var n=this.layers[0],i=[],o=null;"circle"===n.type&&(o=n.layout.get("circle-sort-key"));for(var a=0,s=t;a<s.length;a+=1){var l=s[a],u=l.feature,c=l.id,p=l.index,h=l.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,d=ua(u,f);if(this.layers[0]._featureFilter.filter(new Ci(this.zoom),d,r)){var m=o?o.evaluate(d,{},r):void 0,y={id:c,properties:u.properties,type:u.type,sourceLayerIndex:h,index:p,geometry:f?d.geometry:la(u),patterns:{},sortKey:m};i.push(y)}}o&&i.sort((function(t,e){return t.sortKey-e.sortKey}));for(var g=0,v=i;g<v.length;g+=1){var _=v[g],x=_.geometry,b=_.index,w=_.sourceLayerIndex,S=t[b].feature;this.addFeature(_,x,b,r),e.featureIndex.insert(S,x,b,w,this.index)}},pa.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},pa.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},pa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},pa.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Co),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},pa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},pa.prototype.addFeature=function(t,e,r,n){for(var i=0,o=e;i<o.length;i+=1)for(var a=0,s=o[i];a<s.length;a+=1){var l=s[a],u=l.x,c=l.y;if(!(u<0||u>=8192||c<0||c>=8192)){var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),h=p.vertexLength;ca(this.layoutVertexArray,u,c,-1,-1),ca(this.layoutVertexArray,u,c,1,-1),ca(this.layoutVertexArray,u,c,1,1),ca(this.layoutVertexArray,u,c,-1,1),this.indexArray.emplaceBack(h,h+1,h+2),this.indexArray.emplaceBack(h,h+3,h+2),p.vertexLength+=4,p.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,{},n)},Jn("CircleBucket",pa,{omit:["layers"]});var Ea=new qi({"circle-sort-key":new Ni(Zt.layout_circle["circle-sort-key"])}),Ia={paint:new qi({"circle-radius":new Ni(Zt.paint_circle["circle-radius"]),"circle-color":new Ni(Zt.paint_circle["circle-color"]),"circle-blur":new Ni(Zt.paint_circle["circle-blur"]),"circle-opacity":new Ni(Zt.paint_circle["circle-opacity"]),"circle-translate":new Fi(Zt.paint_circle["circle-translate"]),"circle-translate-anchor":new Fi(Zt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Fi(Zt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Fi(Zt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ni(Zt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ni(Zt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ni(Zt.paint_circle["circle-stroke-opacity"])}),layout:Ea},za="undefined"!=typeof Float32Array?Float32Array:Array;function Ca(){var t=new za(16);return za!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Aa(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Pa(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],p=e[9],h=e[10],f=e[11],d=e[12],m=e[13],y=e[14],g=e[15],v=r*s-n*a,_=r*l-i*a,x=r*u-o*a,b=n*l-i*s,w=n*u-o*s,S=i*u-o*l,k=c*m-p*d,T=c*y-h*d,E=c*g-f*d,I=p*y-h*m,z=p*g-f*m,C=h*g-f*y,A=v*C-_*z+x*I+b*E-w*T+S*k;return A?(t[0]=(s*C-l*z+u*I)*(A=1/A),t[1]=(i*z-n*C-o*I)*A,t[2]=(m*S-y*w+g*b)*A,t[3]=(h*w-p*S-f*b)*A,t[4]=(l*E-a*C-u*T)*A,t[5]=(r*C-i*E+o*T)*A,t[6]=(y*x-d*S-g*_)*A,t[7]=(c*S-h*x+f*_)*A,t[8]=(a*z-s*E+u*k)*A,t[9]=(n*E-r*z-o*k)*A,t[10]=(d*w-m*x+g*v)*A,t[11]=(p*x-c*w-f*v)*A,t[12]=(s*T-a*I-l*k)*A,t[13]=(r*I-n*T+i*k)*A,t[14]=(m*_-d*b-y*v)*A,t[15]=(c*b-p*_+h*v)*A,t):null}function Da(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],m=e[12],y=e[13],g=e[14],v=e[15],_=r[0],x=r[1],b=r[2],w=r[3];return t[0]=_*n+x*s+b*p+w*m,t[1]=_*i+x*l+b*h+w*y,t[2]=_*o+x*u+b*f+w*g,t[3]=_*a+x*c+b*d+w*v,t[4]=(_=r[4])*n+(x=r[5])*s+(b=r[6])*p+(w=r[7])*m,t[5]=_*i+x*l+b*h+w*y,t[6]=_*o+x*u+b*f+w*g,t[7]=_*a+x*c+b*d+w*v,t[8]=(_=r[8])*n+(x=r[9])*s+(b=r[10])*p+(w=r[11])*m,t[9]=_*i+x*l+b*h+w*y,t[10]=_*o+x*u+b*f+w*g,t[11]=_*a+x*c+b*d+w*v,t[12]=(_=r[12])*n+(x=r[13])*s+(b=r[14])*p+(w=r[15])*m,t[13]=_*i+x*l+b*h+w*y,t[14]=_*o+x*u+b*f+w*g,t[15]=_*a+x*c+b*d+w*v,t}function Ma(t,e,r){var n,i,o,a,s,l,u,c,p,h,f,d,m=r[0],y=r[1],g=r[2];return e===t?(t[12]=e[0]*m+e[4]*y+e[8]*g+e[12],t[13]=e[1]*m+e[5]*y+e[9]*g+e[13],t[14]=e[2]*m+e[6]*y+e[10]*g+e[14],t[15]=e[3]*m+e[7]*y+e[11]*g+e[15]):(i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],t[0]=n=e[0],t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=p,t[9]=h,t[10]=f,t[11]=d,t[12]=n*m+s*y+p*g+e[12],t[13]=i*m+l*y+h*g+e[13],t[14]=o*m+u*y+f*g+e[14],t[15]=a*m+c*y+d*g+e[15]),t}function La(t,e,r){var n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ra(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],p=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+u*n,t[1]=a*i+c*n,t[2]=s*i+p*n,t[3]=l*i+h*n,t[4]=u*i-o*n,t[5]=c*i-a*n,t[6]=p*i-s*n,t[7]=h*i-l*n,t}function Ba(t,e,r,n,i,o,a){var s=1/(e-r),l=1/(n-i),u=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*l,t[14]=(a+o)*u,t[15]=1,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,r=arguments.length;r--;)e+=t[r]*t[r];return Math.sqrt(e)});var Oa=Da;function Fa(t){var e=new za(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}var Na,Va=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t};function Ua(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,t}Na=new za(3),za!=Float32Array&&(Na[0]=0,Na[1]=0,Na[2]=0),function(){var t=new za(4);za!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var ja=function(t){var e=t[0],r=t[1];return e*e+r*r},qa=(function(){var t=new za(2);za!=Float32Array&&(t[0]=0,t[1]=0)}(),function(t){function e(e){t.call(this,e,Ia)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new pa(t)},e.prototype.queryRadius=function(t){var e=t;return Sa("circle-radius",this,e)+Sa("circle-stroke-width",this,e)+ka(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,n,i,o,a,s){for(var l=Ta(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),u=this.paint.get("circle-radius").evaluate(e,r)+this.paint.get("circle-stroke-width").evaluate(e,r),c="map"===this.paint.get("circle-pitch-alignment"),p=c?l:function(t,e){return t.map((function(t){return Za(t,e)}))}(l,s),h=c?u*a:u,f=0,d=n;f<d.length;f+=1)for(var m=0,y=d[f];m<y.length;m+=1){var g=y[m],v=c?g:Za(g,s),_=h,x=Ua([],[g.x,g.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?_*=x[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(_*=o.cameraToCenterDistance/x[3]),fa(p,v,_))return!0}return!1},e}(Zi));function Za(t,e){var r=Ua([],[t.x,t.y,0,1],e);return new i(r[0]/r[3],r[1]/r[3])}var Ga=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(pa);function Wa(t,e,r,n){var i=e.width,o=e.height;if(n){if(n instanceof Uint8ClampedArray)n=new Uint8Array(n.buffer);else if(n.length!==i*o*r)throw new RangeError("mismatched image size")}else n=new Uint8Array(i*o*r);return t.width=i,t.height=o,t.data=n,t}function Ha(t,e,r){var n=e.width,i=e.height;if(n!==t.width||i!==t.height){var o=Wa({},{width:n,height:i},r);Xa(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,n),height:Math.min(t.height,i)},r),t.width=n,t.height=i,t.data=o.data}}function Xa(t,e,r,n,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,l=0;l<i.height;l++)for(var u=((r.y+l)*t.width+r.x)*o,c=((n.y+l)*e.width+n.x)*o,p=0;p<i.width*o;p++)s[c+p]=a[u+p];return e}Jn("HeatmapBucket",Ga,{omit:["layers"]});var Ka=function(t,e){Wa(this,t,1,e)};Ka.prototype.resize=function(t){Ha(this,t,1)},Ka.prototype.clone=function(){return new Ka({width:this.width,height:this.height},new Uint8Array(this.data))},Ka.copy=function(t,e,r,n,i){Xa(t,e,r,n,i,1)};var Ya=function(t,e){Wa(this,t,4,e)};Ya.prototype.resize=function(t){Ha(this,t,4)},Ya.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},Ya.prototype.clone=function(){return new Ya({width:this.width,height:this.height},new Uint8Array(this.data))},Ya.copy=function(t,e,r,n,i){Xa(t,e,r,n,i,4)},Jn("AlphaImage",Ka),Jn("RGBAImage",Ya);var Qa={paint:new qi({"heatmap-radius":new Ni(Zt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ni(Zt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Fi(Zt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ji(Zt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Fi(Zt.paint_heatmap["heatmap-opacity"])})};function $a(t){var e={},r=t.resolution||256,n=t.clips?t.clips.length:1,i=t.image||new Ya({width:r,height:n}),o=function(r,n,o){e[t.evaluationKey]=o;var a=t.expression.evaluate(e);i.data[r+n+0]=Math.floor(255*a.r/a.a),i.data[r+n+1]=Math.floor(255*a.g/a.a),i.data[r+n+2]=Math.floor(255*a.b/a.a),i.data[r+n+3]=Math.floor(255*a.a)};if(t.clips)for(var a=0,s=0;a<n;++a,s+=4*r)for(var l=0,u=0;l<r;l++,u+=4){var c=l/(r-1),p=t.clips[a];o(s,u,p.start*(1-c)+p.end*c)}else for(var h=0,f=0;h<r;h++,f+=4)o(0,f,h/(r-1));return i}var Ja=function(t){function e(e){t.call(this,e,Qa),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new Ga(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=$a({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(Zi),ts={paint:new qi({"hillshade-illumination-direction":new Fi(Zt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Fi(Zt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Fi(Zt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Fi(Zt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Fi(Zt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Fi(Zt.paint_hillshade["hillshade-accent-color"])})},es=function(t){function e(e){t.call(this,e,ts)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(Zi),rs=Xi([{name:"a_pos",components:2,type:"Int16"}],4).members,ns=os,is=os;function os(t,e,r){r=r||2;var n,i,o,a,s,l,u,c=e&&e.length,p=c?e[0]*r:t.length,h=as(t,0,p,r,!0),f=[];if(!h||h.next===h.prev)return f;if(c&&(h=function(t,e,r,n){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=as(t,e[i]*n,i<o-1?e[i+1]*n:t.length,n,!1))===a.next&&(a.steiner=!0),s.push(gs(a));for(s.sort(fs),i=0;i<s.length;i++)ds(s[i],r),r=ss(r,r.next);return r}(t,e,h,r)),t.length>80*r){n=o=t[0],i=a=t[1];for(var d=r;d<p;d+=r)(s=t[d])<n&&(n=s),(l=t[d+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);u=0!==(u=Math.max(o-n,a-i))?1/u:0}return ls(h,f,r,n,i,u),f}function as(t,e,r,n,i){var o,a;if(i===As(t,e,r,n)>0)for(o=e;o<r;o+=n)a=Is(o,t[o],t[o+1],a);else for(o=r-n;o>=e;o-=n)a=Is(o,t[o],t[o+1],a);return a&&bs(a,a.next)&&(zs(a),a=a.next),a}function ss(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!bs(n,n.next)&&0!==xs(n.prev,n,n.next))n=n.next;else{if(zs(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function ls(t,e,r,n,i,o,a){if(t){!a&&o&&function(t,e,r,n){var i=t;do{null===i.z&&(i.z=ys(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,o,a,s,l,u=1;do{for(r=t,t=null,o=null,a=0;r;){for(a++,n=r,s=0,e=0;e<u&&(s++,n=n.nextZ);e++);for(l=u;s>0||l>0&&n;)0!==s&&(0===l||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(a>1)}(i)}(t,n,i,o);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?cs(t,n,i,o):us(t))e.push(s.i/r),e.push(t.i/r),e.push(l.i/r),zs(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?ls(t=ps(ss(t),e,r),e,r,n,i,o,2):2===a&&hs(t,e,r,n,i,o):ls(ss(t),e,r,n,i,o,1);break}}}function us(t){var e=t.prev,r=t,n=t.next;if(xs(e,r,n)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(vs(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&xs(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function cs(t,e,r,n){var i=t.prev,o=t,a=t.next;if(xs(i,o,a)>=0)return!1;for(var s=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,u=ys(i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,e,r,n),c=ys(s,l,e,r,n),p=t.prevZ,h=t.nextZ;p&&p.z>=u&&h&&h.z<=c;){if(p!==t.prev&&p!==t.next&&vs(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&xs(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,h!==t.prev&&h!==t.next&&vs(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&xs(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(;p&&p.z>=u;){if(p!==t.prev&&p!==t.next&&vs(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&xs(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;h&&h.z<=c;){if(h!==t.prev&&h!==t.next&&vs(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&xs(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function ps(t,e,r){var n=t;do{var i=n.prev,o=n.next.next;!bs(i,o)&&ws(i,n,n.next,o)&&Ts(i,o)&&Ts(o,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(o.i/r),zs(n),zs(n.next),n=t=o),n=n.next}while(n!==t);return ss(n)}function hs(t,e,r,n,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&_s(a,s)){var l=Es(a,s);return a=ss(a,a.next),l=ss(l,l.next),ls(a,e,r,n,i,o),void ls(l,e,r,n,i,o)}s=s.next}a=a.next}while(a!==t)}function fs(t,e){return t.x-e.x}function ds(t,e){if(e=function(t,e){var r,n=e,i=t.x,o=t.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>a){if(a=s,s===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(i===a)return r;var l,u=r,c=r.x,p=r.y,h=1/0;n=r;do{i>=n.x&&n.x>=c&&i!==n.x&&vs(o<p?i:a,o,c,p,o<p?a:i,o,n.x,n.y)&&(l=Math.abs(o-n.y)/(i-n.x),Ts(n,t)&&(l<h||l===h&&(n.x>r.x||n.x===r.x&&ms(r,n)))&&(r=n,h=l)),n=n.next}while(n!==u);return r}(t,e)){var r=Es(e,t);ss(e,e.next),ss(r,r.next)}}function ms(t,e){return xs(t.prev,t,e.prev)<0&&xs(e.next,t,t.next)<0}function ys(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function gs(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function vs(t,e,r,n,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(n-s)-(r-a)*(e-s)>=0&&(r-a)*(o-s)-(i-a)*(n-s)>=0}function _s(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&ws(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(Ts(t,e)&&Ts(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)&&(xs(t.prev,t,e.prev)||xs(t,e.prev,e))||bs(t,e)&&xs(t.prev,t,t.next)>0&&xs(e.prev,e,e.next)>0)}function xs(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function bs(t,e){return t.x===e.x&&t.y===e.y}function ws(t,e,r,n){var i=ks(xs(t,e,r)),o=ks(xs(t,e,n)),a=ks(xs(r,n,t)),s=ks(xs(r,n,e));return i!==o&&a!==s||!(0!==i||!Ss(t,r,e))||!(0!==o||!Ss(t,n,e))||!(0!==a||!Ss(r,t,n))||!(0!==s||!Ss(r,e,n))}function Ss(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function ks(t){return t>0?1:t<0?-1:0}function Ts(t,e){return xs(t.prev,t,t.next)<0?xs(t,e,t.next)>=0&&xs(t,t.prev,e)>=0:xs(t,e,t.prev)<0||xs(t,t.next,e)<0}function Es(t,e){var r=new Cs(t.i,t.x,t.y),n=new Cs(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function Is(t,e,r,n){var i=new Cs(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function zs(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Cs(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function As(t,e,r,n){for(var i=0,o=e,a=r-n;o<r;o+=n)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function Ps(t,e,r,n,i){!function t(e,r,n,i,o){for(;i>n;){if(i-n>600){var a=i-n+1,s=r-n+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);t(e,r,Math.max(n,Math.floor(r-s*u/a+c)),Math.min(i,Math.floor(r+(a-s)*u/a+c)),o)}var p=e[r],h=n,f=i;for(Ds(e,n,r),o(e[i],p)>0&&Ds(e,n,i);h<f;){for(Ds(e,h,f),h++,f--;o(e[h],p)<0;)h++;for(;o(e[f],p)>0;)f--}0===o(e[n],p)?Ds(e,n,f):Ds(e,++f,i),f<=r&&(n=f+1),r<=f&&(i=f-1)}}(t,e,r||0,n||t.length-1,i||Ms)}function Ds(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function Ms(t,e){return t<e?-1:t>e?1:0}function Ls(t,e){var r=t.length;if(r<=1)return[t];for(var n,i,o=[],a=0;a<r;a++){var s=C(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(n&&o.push(n),n=[t[a]]):n.push(t[a]))}if(n&&o.push(n),e>1)for(var l=0;l<o.length;l++)o[l].length<=e||(Ps(o[l],e,1,o[l].length-1,Rs),o[l]=o[l].slice(0,e));return o}function Rs(t,e){return e.area-t.area}function Bs(t,e,r){for(var n=r.patternDependencies,i=!1,o=0,a=e;o<a.length;o+=1){var s=a[o].paint.get(t+"-pattern");s.isConstant()||(i=!0);var l=s.constantOr(null);l&&(i=!0,n[l.to]=!0,n[l.from]=!0)}return i}function Os(t,e,r,n,i){for(var o=i.patternDependencies,a=0,s=e;a<s.length;a+=1){var l=s[a],u=l.paint.get(t+"-pattern").value;if("constant"!==u.kind){var c=u.evaluate({zoom:n-1},r,{},i.availableImages),p=u.evaluate({zoom:n},r,{},i.availableImages),h=u.evaluate({zoom:n+1},r,{},i.availableImages);p=p&&p.name?p.name:p,h=h&&h.name?h.name:h,o[c=c&&c.name?c.name:c]=!0,o[p]=!0,o[h]=!0,r.patterns[l.id]={min:c,mid:p,max:h}}}return r}os.deviation=function(t,e,r,n){var i=e&&e.length,o=Math.abs(As(t,0,i?e[0]*r:t.length,r));if(i)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(As(t,e[a]*r,a<s-1?e[a+1]*r:t.length,r));var l=0;for(a=0;a<n.length;a+=3){var u=n[a]*r,c=n[a+1]*r,p=n[a+2]*r;l+=Math.abs((t[u]-t[p])*(t[c+1]-t[u+1])-(t[u]-t[c])*(t[p+1]-t[u+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},os.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)r.vertices.push(t[i][o][a]);i>0&&r.holes.push(n+=t[i-1].length)}return r},ns.default=is;var Fs=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Yi,this.indexArray=new uo,this.indexArray2=new yo,this.programConfigurations=new na(t.layers,t.zoom),this.segments=new Ao,this.segments2=new Ao,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};Fs.prototype.populate=function(t,e,r){this.hasPattern=Bs("fill",this.layers,e);for(var n=this.layers[0].layout.get("fill-sort-key"),i=[],o=0,a=t;o<a.length;o+=1){var s=a[o],l=s.feature,u=s.id,c=s.index,p=s.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,f=ua(l,h);if(this.layers[0]._featureFilter.filter(new Ci(this.zoom),f,r)){var d=n?n.evaluate(f,{},r,e.availableImages):void 0,m={id:u,properties:l.properties,type:l.type,sourceLayerIndex:p,index:c,geometry:h?f.geometry:la(l),patterns:{},sortKey:d};i.push(m)}}n&&i.sort((function(t,e){return t.sortKey-e.sortKey}));for(var y=0,g=i;y<g.length;y+=1){var v=g[y],_=v.geometry,x=v.index,b=v.sourceLayerIndex;if(this.hasPattern){var w=Os("fill",this.layers,v,this.zoom,e);this.patternFeatures.push(w)}else this.addFeature(v,_,x,r,{});e.featureIndex.insert(t[x].feature,_,x,b,this.index)}},Fs.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},Fs.prototype.addFeatures=function(t,e,r){for(var n=0,i=this.patternFeatures;n<i.length;n+=1){var o=i[n];this.addFeature(o,o.geometry,o.index,e,r)}},Fs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Fs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Fs.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,rs),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},Fs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Fs.prototype.addFeature=function(t,e,r,n,i){for(var o=0,a=Ls(e,500);o<a.length;o+=1){for(var s=a[o],l=0,u=0,c=s;u<c.length;u+=1)l+=c[u].length;for(var p=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray),h=p.vertexLength,f=[],d=[],m=0,y=s;m<y.length;m+=1){var g=y[m];if(0!==g.length){g!==s[0]&&d.push(f.length/2);var v=this.segments2.prepareSegment(g.length,this.layoutVertexArray,this.indexArray2),_=v.vertexLength;this.layoutVertexArray.emplaceBack(g[0].x,g[0].y),this.indexArray2.emplaceBack(_+g.length-1,_),f.push(g[0].x),f.push(g[0].y);for(var x=1;x<g.length;x++)this.layoutVertexArray.emplaceBack(g[x].x,g[x].y),this.indexArray2.emplaceBack(_+x-1,_+x),f.push(g[x].x),f.push(g[x].y);v.vertexLength+=g.length,v.primitiveLength+=g.length}}for(var b=ns(f,d),w=0;w<b.length;w+=3)this.indexArray.emplaceBack(h+b[w],h+b[w+1],h+b[w+2]);p.vertexLength+=l,p.primitiveLength+=b.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,i,n)},Jn("FillBucket",Fs,{omit:["layers","patternFeatures"]});var Ns=new qi({"fill-sort-key":new Ni(Zt.layout_fill["fill-sort-key"])}),Vs={paint:new qi({"fill-antialias":new Fi(Zt.paint_fill["fill-antialias"]),"fill-opacity":new Ni(Zt.paint_fill["fill-opacity"]),"fill-color":new Ni(Zt.paint_fill["fill-color"]),"fill-outline-color":new Ni(Zt.paint_fill["fill-outline-color"]),"fill-translate":new Fi(Zt.paint_fill["fill-translate"]),"fill-translate-anchor":new Fi(Zt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Vi(Zt.paint_fill["fill-pattern"])}),layout:Ns},Us=function(t){function e(e){t.call(this,e,Vs)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,r){t.prototype.recalculate.call(this,e,r);var n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new Fs(t)},e.prototype.queryRadius=function(){return ka(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,n,i,o,a){return da(Ta(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),n)},e.prototype.isTileClipped=function(){return!0},e}(Zi),js=Xi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,qs=Zs;function Zs(t,e,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=i,t.readFields(Gs,this,e)}function Gs(t,e,r){1==t?e.id=r.readVarint():2==t?function(t,e){for(var r=t.readVarint()+t.pos;t.pos<r;){var n=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[n]=i}}(r,e):3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos)}function Ws(t){for(var e,r,n=0,i=0,o=t.length,a=o-1;i<o;a=i++)n+=((r=t[a]).x-(e=t[i]).x)*(e.y+r.y);return n}Zs.types=["Unknown","Point","LineString","Polygon"],Zs.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,n=1,o=0,a=0,s=0,l=[];t.pos<r;){if(o<=0){var u=t.readVarint();n=7&u,o=u>>3}if(o--,1===n||2===n)a+=t.readSVarint(),s+=t.readSVarint(),1===n&&(e&&l.push(e),e=[]),e.push(new i(a,s));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&l.push(e),l},Zs.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,n=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,u=-1/0;t.pos<e;){if(n<=0){var c=t.readVarint();r=7&c,n=c>>3}if(n--,1===r||2===r)(i+=t.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=t.readSVarint())<l&&(l=o),o>u&&(u=o);else if(7!==r)throw new Error("unknown command "+r)}return[a,l,s,u]},Zs.prototype.toGeoJSON=function(t,e,r){var n,i,o=this.extent*Math.pow(2,r),a=this.extent*t,s=this.extent*e,l=this.loadGeometry(),u=Zs.types[this.type];function c(t){for(var e=0;e<t.length;e++){var r=t[e];t[e]=[360*(r.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(r.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(n=0;n<l.length;n++)p[n]=l[n][0];c(l=p);break;case 2:for(n=0;n<l.length;n++)c(l[n]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var r,n,i=[],o=0;o<e;o++){var a=Ws(t[o]);0!==a&&(void 0===n&&(n=a<0),n===a<0?(r&&i.push(r),r=[t[o]]):r.push(t[o]))}return r&&i.push(r),i}(l),n=0;n<l.length;n++)for(i=0;i<l[n].length;i++)c(l[n][i])}1===l.length?l=l[0]:u="Multi"+u;var h={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(h.id=this.id),h};var Hs=Xs;function Xs(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Ks,this,e),this.length=this._features.length}function Ks(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(function(t){for(var e=null,r=t.readVarint()+t.pos;t.pos<r;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}(r))}function Ys(t,e,r){if(3===t){var n=new Hs(r,r.readVarint()+r.pos);n.length&&(e[n.name]=n)}}Xs.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new qs(this._pbf,e,this.extent,this._keys,this._values)};var Qs={VectorTile:function(t,e){this.layers=t.readFields(Ys,{},e)},VectorTileFeature:qs,VectorTileLayer:Hs},$s=Qs.VectorTileFeature.types,Js=Math.pow(2,13);function tl(t,e,r,n,i,o,a,s){t.emplaceBack(e,r,2*Math.floor(n*Js)+a,i*Js*2,o*Js*2,Math.round(s))}var el=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new $i,this.indexArray=new uo,this.programConfigurations=new na(t.layers,t.zoom),this.segments=new Ao,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function rl(t,e){return t.x===e.x&&(t.x<0||t.x>8192)||t.y===e.y&&(t.y<0||t.y>8192)}el.prototype.populate=function(t,e,r){this.features=[],this.hasPattern=Bs("fill-extrusion",this.layers,e);for(var n=0,i=t;n<i.length;n+=1){var o=i[n],a=o.feature,s=o.id,l=o.index,u=o.sourceLayerIndex,c=this.layers[0]._featureFilter.needGeometry,p=ua(a,c);if(this.layers[0]._featureFilter.filter(new Ci(this.zoom),p,r)){var h={id:s,sourceLayerIndex:u,index:l,geometry:c?p.geometry:la(a),properties:a.properties,type:a.type,patterns:{}};this.hasPattern?this.features.push(Os("fill-extrusion",this.layers,h,this.zoom,e)):this.addFeature(h,h.geometry,l,r,{}),e.featureIndex.insert(a,h.geometry,l,u,this.index,!0)}}},el.prototype.addFeatures=function(t,e,r){for(var n=0,i=this.features;n<i.length;n+=1){var o=i[n];this.addFeature(o,o.geometry,o.index,e,r)}},el.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},el.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},el.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},el.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,js),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},el.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},el.prototype.addFeature=function(t,e,r,n,i){for(var o=0,a=Ls(e,500);o<a.length;o+=1){for(var s=a[o],l=0,u=0,c=s;u<c.length;u+=1)l+=c[u].length;for(var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),h=0,f=s;h<f.length;h+=1){var d=f[h];if(0!==d.length&&!((D=d).every((function(t){return t.x<0}))||D.every((function(t){return t.x>8192}))||D.every((function(t){return t.y<0}))||D.every((function(t){return t.y>8192}))))for(var m=0,y=0;y<d.length;y++){var g=d[y];if(y>=1){var v=d[y-1];if(!rl(g,v)){p.vertexLength+4>Ao.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var _=g.sub(v)._perp()._unit(),x=v.dist(g);m+x>32768&&(m=0),tl(this.layoutVertexArray,g.x,g.y,_.x,_.y,0,0,m),tl(this.layoutVertexArray,g.x,g.y,_.x,_.y,0,1,m),tl(this.layoutVertexArray,v.x,v.y,_.x,_.y,0,0,m+=x),tl(this.layoutVertexArray,v.x,v.y,_.x,_.y,0,1,m);var b=p.vertexLength;this.indexArray.emplaceBack(b,b+2,b+1),this.indexArray.emplaceBack(b+1,b+2,b+3),p.vertexLength+=4,p.primitiveLength+=2}}}}if(p.vertexLength+l>Ao.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray)),"Polygon"===$s[t.type]){for(var w=[],S=[],k=p.vertexLength,T=0,E=s;T<E.length;T+=1){var I=E[T];if(0!==I.length){I!==s[0]&&S.push(w.length/2);for(var z=0;z<I.length;z++){var C=I[z];tl(this.layoutVertexArray,C.x,C.y,0,0,1,1,0),w.push(C.x),w.push(C.y)}}}for(var A=ns(w,S),P=0;P<A.length;P+=3)this.indexArray.emplaceBack(k+A[P],k+A[P+2],k+A[P+1]);p.primitiveLength+=A.length/3,p.vertexLength+=l}}var D;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,i,n)},Jn("FillExtrusionBucket",el,{omit:["layers","features"]});var nl={paint:new qi({"fill-extrusion-opacity":new Fi(Zt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ni(Zt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Fi(Zt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Fi(Zt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Vi(Zt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ni(Zt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ni(Zt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Fi(Zt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},il=function(t){function e(e){t.call(this,e,nl)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new el(t)},e.prototype.queryRadius=function(){return ka(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(t,e,r,n,o,a,s,l){var u=Ta(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,s),c=this.paint.get("fill-extrusion-height").evaluate(e,r),p=this.paint.get("fill-extrusion-base").evaluate(e,r),h=function(t,e,r,n){for(var o=[],a=0,s=t;a<s.length;a+=1){var l=s[a],u=[l.x,l.y,0,1];Ua(u,u,e),o.push(new i(u[0]/u[3],u[1]/u[3]))}return o}(u,l),f=function(t,e,r,n){for(var o=[],a=[],s=n[8]*e,l=n[9]*e,u=n[10]*e,c=n[11]*e,p=n[8]*r,h=n[9]*r,f=n[10]*r,d=n[11]*r,m=0,y=t;m<y.length;m+=1){for(var g=[],v=[],_=0,x=y[m];_<x.length;_+=1){var b=x[_],w=b.x,S=b.y,k=n[0]*w+n[4]*S+n[12],T=n[1]*w+n[5]*S+n[13],E=n[2]*w+n[6]*S+n[14],I=n[3]*w+n[7]*S+n[15],z=E+u,C=I+c,A=k+p,P=T+h,D=E+f,M=I+d,L=new i((k+s)/C,(T+l)/C);L.z=z/C,g.push(L);var R=new i(A/M,P/M);R.z=D/M,v.push(R)}o.push(g),a.push(v)}return[o,a]}(n,p,c,l);return function(t,e,r){var n=1/0;da(r,e)&&(n=al(r,e[0]));for(var i=0;i<e.length;i++)for(var o=e[i],a=t[i],s=0;s<o.length-1;s++){var l=o[s],u=[l,o[s+1],a[s+1],a[s],l];ha(r,u)&&(n=Math.min(n,al(r,u)))}return n!==1/0&&n}(f[0],f[1],h)},e}(Zi);function ol(t,e){return t.x*e.x+t.y*e.y}function al(t,e){if(1===t.length){for(var r,n=0,i=e[n++];!r||i.equals(r);)if(!(r=e[n++]))return 1/0;for(;n<e.length;n++){var o=e[n],a=t[0],s=r.sub(i),l=o.sub(i),u=a.sub(i),c=ol(s,s),p=ol(s,l),h=ol(l,l),f=ol(u,s),d=ol(u,l),m=c*h-p*p,y=(h*f-p*d)/m,g=(c*d-p*f)/m,v=i.z*(1-y-g)+r.z*y+o.z*g;if(isFinite(v))return v}return 1/0}for(var _=1/0,x=0,b=e;x<b.length;x+=1)_=Math.min(_,b[x].z);return _}var sl=Xi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,ll=Xi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,ul=Qs.VectorTileFeature.types,cl=Math.cos(Math.PI/180*37.5),pl=Math.pow(2,14)/.5,hl=function(t){var e=this;this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(t){e.gradients[t.id]={}})),this.layoutVertexArray=new Ji,this.layoutVertexArray2=new to,this.indexArray=new uo,this.programConfigurations=new na(t.layers,t.zoom),this.segments=new Ao,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};hl.prototype.populate=function(t,e,r){this.hasPattern=Bs("line",this.layers,e);for(var n=this.layers[0].layout.get("line-sort-key"),i=[],o=0,a=t;o<a.length;o+=1){var s=a[o],l=s.feature,u=s.id,c=s.index,p=s.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,f=ua(l,h);if(this.layers[0]._featureFilter.filter(new Ci(this.zoom),f,r)){var d=n?n.evaluate(f,{},r):void 0,m={id:u,properties:l.properties,type:l.type,sourceLayerIndex:p,index:c,geometry:h?f.geometry:la(l),patterns:{},sortKey:d};i.push(m)}}n&&i.sort((function(t,e){return t.sortKey-e.sortKey}));for(var y=0,g=i;y<g.length;y+=1){var v=g[y],_=v.geometry,x=v.index,b=v.sourceLayerIndex;if(this.hasPattern){var w=Os("line",this.layers,v,this.zoom,e);this.patternFeatures.push(w)}else this.addFeature(v,_,x,r,{});e.featureIndex.insert(t[x].feature,_,x,b,this.index)}},hl.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},hl.prototype.addFeatures=function(t,e,r){for(var n=0,i=this.patternFeatures;n<i.length;n+=1){var o=i[n];this.addFeature(o,o.geometry,o.index,e,r)}},hl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},hl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},hl.prototype.upload=function(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,ll)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,sl),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},hl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},hl.prototype.lineFeatureClips=function(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}},hl.prototype.addFeature=function(t,e,r,n,i){var o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap"),l=o.get("line-miter-limit"),u=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(var c=0,p=e;c<p.length;c+=1)this.addLine(p[c],t,a,s,l,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,i,n)},hl.prototype.addLine=function(t,e,r,n,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var a=0;a<t.length-1;a++)this.totalDistance+=t[a].dist(t[a+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===ul[e.type],l=t.length;l>=2&&t[l-1].equals(t[l-2]);)l--;for(var u=0;u<l-1&&t[u].equals(t[u+1]);)u++;if(!(l<(s?3:2))){"bevel"===r&&(i=1.05);var c,p=this.overscaling<=16?122880/(512*this.overscaling):0,h=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray),f=void 0,d=void 0,m=void 0,y=void 0;this.e1=this.e2=-1,s&&(y=t[u].sub(c=t[l-2])._unit()._perp());for(var g=u;g<l;g++)if(!(d=g===l-1?s?t[u+1]:void 0:t[g+1])||!t[g].equals(d)){y&&(m=y),c&&(f=c),c=t[g],y=d?d.sub(c)._unit()._perp():m;var v=(m=m||y).add(y);0===v.x&&0===v.y||v._unit();var _=m.x*y.x+m.y*y.y,x=v.x*y.x+v.y*y.y,b=0!==x?1/x:1/0,w=2*Math.sqrt(2-2*x),S=x<cl&&f&&d,k=m.x*y.y-m.y*y.x>0;if(S&&g>u){var T=c.dist(f);if(T>2*p){var E=c.sub(c.sub(f)._mult(p/T)._round());this.updateDistance(f,E),this.addCurrentVertex(E,m,0,0,h),f=E}}var I=f&&d,z=I?r:s?"butt":n;if(I&&"round"===z&&(b<o?z="miter":b<=2&&(z="fakeround")),"miter"===z&&b>i&&(z="bevel"),"bevel"===z&&(b>2&&(z="flipbevel"),b<i&&(z="miter")),f&&this.updateDistance(f,c),"miter"===z)v._mult(b),this.addCurrentVertex(c,v,0,0,h);else if("flipbevel"===z){if(b>100)v=y.mult(-1);else{var C=b*m.add(y).mag()/m.sub(y).mag();v._perp()._mult(C*(k?-1:1))}this.addCurrentVertex(c,v,0,0,h),this.addCurrentVertex(c,v.mult(-1),0,0,h)}else if("bevel"===z||"fakeround"===z){var A=-Math.sqrt(b*b-1),P=k?A:0,D=k?0:A;if(f&&this.addCurrentVertex(c,m,P,D,h),"fakeround"===z)for(var M=Math.round(180*w/Math.PI/20),L=1;L<M;L++){var R=L/M;if(.5!==R){var B=R-.5;R+=R*B*(R-1)*((1.0904+_*(_*(3.55645-1.43519*_)-3.2452))*B*B+(.848013+_*(.215638*_-1.06021)))}var O=y.sub(m)._mult(R)._add(m)._unit()._mult(k?-1:1);this.addHalfVertex(c,O.x,O.y,!1,k,0,h)}d&&this.addCurrentVertex(c,y,-P,-D,h)}else if("butt"===z)this.addCurrentVertex(c,v,0,0,h);else if("square"===z){var F=f?1:-1;this.addCurrentVertex(c,v,F,F,h)}else"round"===z&&(f&&(this.addCurrentVertex(c,m,0,0,h),this.addCurrentVertex(c,m,1,1,h,!0)),d&&(this.addCurrentVertex(c,y,-1,-1,h,!0),this.addCurrentVertex(c,y,0,0,h)));if(S&&g<l-1){var N=c.dist(d);if(N>2*p){var V=c.add(d.sub(c)._mult(p/N)._round());this.updateDistance(c,V),this.addCurrentVertex(V,y,0,0,h),c=V}}}}},hl.prototype.addCurrentVertex=function(t,e,r,n,i,o){void 0===o&&(o=!1);var a=e.y*n-e.x,s=-e.y-e.x*n;this.addHalfVertex(t,e.x+e.y*r,e.y-e.x*r,o,!1,r,i),this.addHalfVertex(t,a,s,o,!0,-n,i),this.distance>pl/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,r,n,i,o))},hl.prototype.addHalfVertex=function(t,e,r,n,i,o,a){var s=.5*(this.lineClips?this.scaledDistance*(pl-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t.x<<1)+(n?1:0),(t.y<<1)+(i?1:0),Math.round(63*e)+128,Math.round(63*r)+128,1+(0===o?0:o<0?-1:1)|(63&s)<<2,s>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var l=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),a.primitiveLength++),i?this.e2=l:this.e1=l},hl.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},hl.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()},Jn("LineBucket",hl,{omit:["layers","patternFeatures"]});var fl=new qi({"line-cap":new Fi(Zt.layout_line["line-cap"]),"line-join":new Ni(Zt.layout_line["line-join"]),"line-miter-limit":new Fi(Zt.layout_line["line-miter-limit"]),"line-round-limit":new Fi(Zt.layout_line["line-round-limit"]),"line-sort-key":new Ni(Zt.layout_line["line-sort-key"])}),dl={paint:new qi({"line-opacity":new Ni(Zt.paint_line["line-opacity"]),"line-color":new Ni(Zt.paint_line["line-color"]),"line-translate":new Fi(Zt.paint_line["line-translate"]),"line-translate-anchor":new Fi(Zt.paint_line["line-translate-anchor"]),"line-width":new Ni(Zt.paint_line["line-width"]),"line-gap-width":new Ni(Zt.paint_line["line-gap-width"]),"line-offset":new Ni(Zt.paint_line["line-offset"]),"line-blur":new Ni(Zt.paint_line["line-blur"]),"line-dasharray":new Ui(Zt.paint_line["line-dasharray"]),"line-pattern":new Vi(Zt.paint_line["line-pattern"]),"line-gradient":new ji(Zt.paint_line["line-gradient"])}),layout:fl},ml=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(e,r){return r=new Ci(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),t.prototype.possiblyEvaluate.call(this,e,r)},e.prototype.evaluate=function(e,r,n,i){return r=m({},r,{zoom:Math.floor(r.zoom)}),t.prototype.evaluate.call(this,e,r,n,i)},e}(Ni))(dl.paint.properties["line-width"].specification);ml.useIntegerZoom=!0;var yl=function(t){function e(e){t.call(this,e,dl),this.gradientVersion=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof ir,this.gradientVersion=(this.gradientVersion+1)%l)},e.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},e.prototype.recalculate=function(e,r){t.prototype.recalculate.call(this,e,r),this.paint._values["line-floorwidth"]=ml.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new hl(t)},e.prototype.queryRadius=function(t){var e=t,r=gl(Sa("line-width",this,e),Sa("line-gap-width",this,e)),n=Sa("line-offset",this,e);return r/2+Math.abs(n)+ka(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,n,o,a,s){var l=Ta(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,s),u=s/2*gl(this.paint.get("line-width").evaluate(e,r),this.paint.get("line-gap-width").evaluate(e,r)),c=this.paint.get("line-offset").evaluate(e,r);return c&&(n=function(t,e){for(var r=[],n=new i(0,0),o=0;o<t.length;o++){for(var a=t[o],s=[],l=0;l<a.length;l++){var u=a[l],c=a[l+1],p=0===l?n:u.sub(a[l-1])._unit()._perp(),h=l===a.length-1?n:c.sub(u)._unit()._perp(),f=p._add(h)._unit();f._mult(1/(f.x*h.x+f.y*h.y)),s.push(f._mult(e)._add(u))}r.push(s)}return r}(n,c*s)),function(t,e,r){for(var n=0;n<e.length;n++){var i=e[n];if(t.length>=3)for(var o=0;o<i.length;o++)if(ba(t,i[o]))return!0;if(ma(t,i,r))return!0}return!1}(l,n,u)},e.prototype.isTileClipped=function(){return!0},e}(Zi);function gl(t,e){return e>0?e+2*t:t}var vl=Xi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),_l=Xi([{name:"a_projected_pos",components:3,type:"Float32"}],4),xl=(Xi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Xi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),bl=(Xi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Xi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),wl=Xi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Sl(t,e,r){return t.sections.forEach((function(t){t.text=function(t,e,r){var n=e.layout.get("text-transform").evaluate(r,{});return"uppercase"===n?t=t.toLocaleUpperCase():"lowercase"===n&&(t=t.toLocaleLowerCase()),zi.applyArabicShaping&&(t=zi.applyArabicShaping(t)),t}(t.text,e,r)})),t}Xi([{name:"triangle",components:3,type:"Uint16"}]),Xi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Xi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Xi([{type:"Float32",name:"offsetX"}]),Xi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var kl={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Tl=function(t,e,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,p=r?i-1:0,h=r?-1:1,f=t[e+p];for(p+=h,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+t[e+p],p+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+t[e+p],p+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),o-=u}return(f?-1:1)*a*Math.pow(2,o-n)},El=function(t,e,r,n,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,p=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,d=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+p>=1?h/l:h*Math.pow(2,1-p))*l>=2&&(a++,l/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(e*l-1)*Math.pow(2,i),a+=p):(s=e*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;t[r+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;t[r+f]=255&a,f+=d,a/=256,u-=8);t[r+f-d]|=128*m},Il=zl;function zl(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}zl.Varint=0,zl.Fixed64=1,zl.Bytes=2,zl.Fixed32=5;var Cl="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Al(t){return t.type===zl.Bytes?t.readVarint()+t.pos:t.pos+1}function Pl(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Dl(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function Ml(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function Ll(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function Rl(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function Bl(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function Ol(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function Fl(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function Nl(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function Vl(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function Ul(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function jl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function ql(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function Zl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function Gl(t,e,r){1===t&&r.readMessage(Wl,e)}function Wl(t,e,r){if(3===t){var n=r.readMessage(Hl,{}),i=n.width,o=n.height,a=n.left,s=n.top,l=n.advance;e.push({id:n.id,bitmap:new Ka({width:i+6,height:o+6},n.bitmap),metrics:{width:i,height:o,left:a,top:s,advance:l}})}}function Hl(t,e,r){1===t?e.id=r.readVarint():2===t?e.bitmap=r.readBytes():3===t?e.width=r.readVarint():4===t?e.height=r.readVarint():5===t?e.left=r.readSVarint():6===t?e.top=r.readSVarint():7===t&&(e.advance=r.readVarint())}function Xl(t){for(var e=0,r=0,n=0,i=t;n<i.length;n+=1){var o=i[n];e+=o.w*o.h,r=Math.max(r,o.w)}t.sort((function(t,e){return e.h-t.h}));for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}],s=0,l=0,u=0,c=t;u<c.length;u+=1)for(var p=c[u],h=a.length-1;h>=0;h--){var f=a[h];if(!(p.w>f.w||p.h>f.h)){if(p.x=f.x,p.y=f.y,l=Math.max(l,p.y+p.h),s=Math.max(s,p.x+p.w),p.w===f.w&&p.h===f.h){var d=a.pop();h<a.length&&(a[h]=d)}else p.h===f.h?(f.x+=p.w,f.w-=p.w):p.w===f.w?(f.y+=p.h,f.h-=p.h):(a.push({x:f.x+p.w,y:f.y,w:f.w-p.w,h:p.h}),f.y+=p.h,f.h-=p.h);break}}return{w:s,h:l,fill:e/(s*l)||0}}zl.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=7&n,t(i,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=jl(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Zl(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=jl(this.buf,this.pos)+4294967296*jl(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=jl(this.buf,this.pos)+4294967296*Zl(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Tl(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Tl(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function(t,e,r){var n,i,o=r.buf;if(n=(112&(i=o[r.pos++]))>>4,i<128)return Pl(t,n,e);if(n|=(127&(i=o[r.pos++]))<<3,i<128)return Pl(t,n,e);if(n|=(127&(i=o[r.pos++]))<<10,i<128)return Pl(t,n,e);if(n|=(127&(i=o[r.pos++]))<<17,i<128)return Pl(t,n,e);if(n|=(127&(i=o[r.pos++]))<<24,i<128)return Pl(t,n,e);if(n|=(1&(i=o[r.pos++]))<<31,i<128)return Pl(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Cl?function(t,e,r){return Cl.decode(t.subarray(e,r))}(this.buf,e,t):function(t,e,r){for(var n="",i=e;i<r;){var o,a,s,l=t[i],u=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c>r)break;1===c?l<128&&(u=l):2===c?128==(192&(o=t[i+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(a=t[i+2],128==(192&(o=t[i+1]))&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(a=t[i+2],s=t[i+3],128==(192&(o=t[i+1]))&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,n+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),n+=String.fromCharCode(u),i+=c}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==zl.Bytes)return t.push(this.readVarint(e));var r=Al(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==zl.Bytes)return t.push(this.readSVarint());var e=Al(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==zl.Bytes)return t.push(this.readBoolean());var e=Al(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==zl.Bytes)return t.push(this.readFloat());var e=Al(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==zl.Bytes)return t.push(this.readDouble());var e=Al(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==zl.Bytes)return t.push(this.readFixed32());var e=Al(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==zl.Bytes)return t.push(this.readSFixed32());var e=Al(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==zl.Bytes)return t.push(this.readFixed64());var e=Al(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==zl.Bytes)return t.push(this.readSFixed64());var e=Al(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===zl.Varint)for(;this.buf[this.pos++]>127;);else if(e===zl.Bytes)this.pos=this.readVarint()+this.pos;else if(e===zl.Fixed32)this.pos+=4;else{if(e!==zl.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),ql(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),ql(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),ql(this.buf,-1&t,this.pos),ql(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),ql(this.buf,-1&t,this.pos),ql(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,n;if(t>=0?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,r.buf[r.pos]=127&(t>>>=7)}(r,0,e),function(t,e){var r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var n,i,o=0;o<e.length;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){n>56319||o+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&Dl(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),El(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),El(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&Dl(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,zl.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Ml,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Ll,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Ol,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,Rl,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Bl,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Fl,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Nl,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Vl,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Ul,e)},writeBytesField:function(t,e){this.writeTag(t,zl.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,zl.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,zl.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,zl.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,zl.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,zl.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,zl.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,zl.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,zl.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,zl.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var Kl=function(t,e){var r=e.pixelRatio,n=e.version,i=e.stretchX,o=e.stretchY,a=e.content;this.paddedRect=t,this.pixelRatio=r,this.stretchX=i,this.stretchY=o,this.content=a,this.version=n},Yl={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Yl.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Yl.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Yl.tlbr.get=function(){return this.tl.concat(this.br)},Yl.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Kl.prototype,Yl);var Ql=function(t,e){var r={},n={};this.haveRenderCallbacks=[];var i=[];this.addImages(t,r,i),this.addImages(e,n,i);var o=Xl(i),a=new Ya({width:o.w||1,height:o.h||1});for(var s in t){var l=t[s],u=r[s].paddedRect;Ya.copy(l.data,a,{x:0,y:0},{x:u.x+1,y:u.y+1},l.data)}for(var c in e){var p=e[c],h=n[c].paddedRect,f=h.x+1,d=h.y+1,m=p.data.width,y=p.data.height;Ya.copy(p.data,a,{x:0,y:0},{x:f,y:d},p.data),Ya.copy(p.data,a,{x:0,y:y-1},{x:f,y:d-1},{width:m,height:1}),Ya.copy(p.data,a,{x:0,y:0},{x:f,y:d+y},{width:m,height:1}),Ya.copy(p.data,a,{x:m-1,y:0},{x:f-1,y:d},{width:1,height:y}),Ya.copy(p.data,a,{x:0,y:0},{x:f+m,y:d},{width:1,height:y})}this.image=a,this.iconPositions=r,this.patternPositions=n};Ql.prototype.addImages=function(t,e,r){for(var n in t){var i=t[n],o={x:0,y:0,w:i.data.width+2,h:i.data.height+2};r.push(o),e[n]=new Kl(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(n)}},Ql.prototype.patchUpdatedImages=function(t,e){for(var r in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[r],t.getImage(r),e),this.patchUpdatedImage(this.patternPositions[r],t.getImage(r),e)},Ql.prototype.patchUpdatedImage=function(t,e,r){if(t&&e&&t.version!==e.version){t.version=e.version;var n=t.tl;r.update(e.data,void 0,{x:n[0],y:n[1]})}},Jn("ImagePosition",Kl),Jn("ImageAtlas",Ql);var $l={horizontal:1,vertical:2,horizontalOnly:3},Jl=function(){this.scale=1,this.fontStack="",this.imageName=null};Jl.forText=function(t,e){var r=new Jl;return r.scale=t||1,r.fontStack=e,r},Jl.forImage=function(t){var e=new Jl;return e.imageName=t,e};var tu=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};tu.fromFeature=function(t,e){for(var r=new tu,n=0;n<t.sections.length;n++){var i=t.sections[n];i.image?r.addImageSection(i):r.addTextSection(i,e)}return r},tu.prototype.length=function(){return this.text.length},tu.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},tu.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},tu.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},tu.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r+1)||null,i=t.charCodeAt(r-1)||null;e+=n&&yi(n)&&!kl[t[r+1]]||i&&yi(i)&&!kl[t[r-1]]||!kl[t[r]]?t[r]:kl[t[r]]}return e}(this.text)},tu.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&eu[this.text.charCodeAt(e)];e++)t++;for(var r=this.text.length,n=this.text.length-1;n>=0&&n>=t&&eu[this.text.charCodeAt(n)];n--)r--;this.text=this.text.substring(t,r),this.sectionIndex=this.sectionIndex.slice(t,r)},tu.prototype.substring=function(t,e){var r=new tu;return r.text=this.text.substring(t,e),r.sectionIndex=this.sectionIndex.slice(t,e),r.sections=this.sections,r},tu.prototype.toString=function(){return this.text},tu.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce((function(e,r){return Math.max(e,t.sections[r].scale)}),0)},tu.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(Jl.forText(t.scale,t.fontStack||e));for(var r=this.sections.length-1,n=0;n<t.text.length;++n)this.sectionIndex.push(r)},tu.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var r=this.getNextImageSectionCharCode();r?(this.text+=String.fromCharCode(r),this.sections.push(Jl.forImage(e)),this.sectionIndex.push(this.sections.length-1)):I("Reached maximum number of images 6401")}else I("Can't add FormattedSection with an empty image.")},tu.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var eu={};function ru(t){var e=.5,r=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:e,verticalAlign:r}}function nu(t,e){var r=e.expression;if("constant"===r.kind)return{kind:"constant",layoutSize:r.evaluate(new Ci(t+1))};if("source"===r.kind)return{kind:"source"};for(var n=r.zoomStops,i=r.interpolationType,o=0;o<n.length&&n[o]<=t;)o++;for(var a=o=Math.max(0,o-1);a<n.length&&n[a]<t+1;)a++;a=Math.min(n.length-1,a);var s=n[o],l=n[a];return"composite"===r.kind?{kind:"composite",minZoom:s,maxZoom:l,interpolationType:i}:{kind:"camera",minZoom:s,maxZoom:l,minSize:r.evaluate(new Ci(s)),maxSize:r.evaluate(new Ci(l)),interpolationType:i}}function iu(t,e,r){var n=e.uSize,i=r.lowerSize;return"source"===t.kind?i/128:"composite"===t.kind?or(i/128,r.upperSize/128,e.uSizeT):n}function ou(t,e){var r=0,n=0;if("constant"===t.kind)n=t.layoutSize;else if("source"!==t.kind){var i=t.interpolationType,o=i?p(xr.interpolationFactor(i,e,t.minZoom,t.maxZoom),0,1):0;"camera"===t.kind?n=or(t.minSize,t.maxSize,o):r=o}return{uSizeT:r,uSize:n}}eu[9]=!0,eu[10]=!0,eu[11]=!0,eu[12]=!0,eu[13]=!0,eu[32]=!0,Jn("Anchor",function(t){function e(e,r,n,i){t.call(this,e,r),this.angle=n,void 0!==i&&(this.segment=i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(i));var au=Object.freeze({__proto__:null,getSizeData:nu,evaluateSizeForFeature:iu,evaluateSizeForZoom:ou,SIZE_PACK_FACTOR:128}),su=Number.POSITIVE_INFINITY;function lu(t,e){return e[1]!==su?function(t,e,r){var n=0,i=0;switch(e=Math.abs(e),r=Math.abs(r),t){case"top-right":case"top-left":case"top":i=r-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-r}switch(t){case"top-right":case"bottom-right":case"right":n=-e;break;case"top-left":case"bottom-left":case"left":n=e}return[n,i]}(t,e[0],e[1]):function(t,e){var r=0,n=0;e<0&&(e=0);var i=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":n=i-7;break;case"bottom-right":case"bottom-left":n=7-i;break;case"bottom":n=7-e;break;case"top":n=e-7}switch(t){case"top-right":case"bottom-right":r=-i;break;case"top-left":case"bottom-left":r=i;break;case"left":r=e;break;case"right":r=-e}return[r,n]}(t,e[0])}var uu=Qs.VectorTileFeature.types,cu=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function pu(t,e,r,n,i,o,a,s,l,u,c,p,h){var f=s?Math.min(32640,Math.round(s[0])):0,d=s?Math.min(32640,Math.round(s[1])):0;t.emplaceBack(e,r,Math.round(32*n),Math.round(32*i),o,a,(f<<1)+(l?1:0),d,16*u,16*c,256*p,256*h)}function hu(t,e,r){t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r)}function fu(t){for(var e=0,r=t.sections;e<r.length;e+=1)if(_i(r[e].text))return!0;return!1}var du=function(t){this.layoutVertexArray=new ro,this.indexArray=new uo,this.programConfigurations=t,this.segments=new Ao,this.dynamicLayoutVertexArray=new no,this.opacityVertexArray=new io,this.placedSymbolArray=new wo};du.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},du.prototype.upload=function(t,e,r,n){this.isEmpty()||(r&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,vl.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,_l.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,cu,!0),this.opacityVertexBuffer.itemSize=1),(r||n)&&this.programConfigurations.upload(t))},du.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Jn("SymbolBuffers",du);var mu=function(t,e,r){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new r,this.segments=new Ao,this.collisionVertexArray=new lo};mu.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,xl.members,!0)},mu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Jn("CollisionBuffers",mu);var yu=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Aa([]),this.placementViewportMatrix=Aa([]);var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=nu(this.zoom,e["text-size"]),this.iconSizeData=nu(this.zoom,e["icon-size"]);var r=this.layers[0].layout,n=r.get("symbol-sort-key"),i=r.get("symbol-z-order");this.canOverlap=r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==i&&void 0!==n.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===r.get("symbol-placement")&&(this.writingModes=r.get("text-writing-mode").map((function(t){return $l[t]}))),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id})),this.sourceID=t.sourceID};yu.prototype.createArrays=function(){this.text=new du(new na(this.layers,this.zoom,(function(t){return/^text/.test(t)}))),this.icon=new du(new na(this.layers,this.zoom,(function(t){return/^icon/.test(t)}))),this.glyphOffsetArray=new To,this.lineVertexArray=new Eo,this.symbolInstances=new ko},yu.prototype.calculateGlyphDependencies=function(t,e,r,n,i){for(var o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(r||n)&&i){var a=kl[t.charAt(o)];a&&(e[a.charCodeAt(0)]=!0)}},yu.prototype.populate=function(t,e,r){var n=this.layers[0],i=n.layout,o=i.get("text-font"),a=i.get("text-field"),s=i.get("icon-image"),l=("constant"!==a.value.kind||a.value.value instanceof ve&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),u="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,c=i.get("symbol-sort-key");if(this.features=[],l||u){for(var p=e.iconDependencies,h=e.glyphDependencies,f=e.availableImages,d=new Ci(this.zoom),m=0,y=t;m<y.length;m+=1){var g=y[m],v=g.feature,_=g.id,x=g.index,b=g.sourceLayerIndex,w=n._featureFilter.needGeometry,S=ua(v,w);if(n._featureFilter.filter(d,S,r)){w||(S.geometry=la(v));var k=void 0;if(l){var T=n.getValueAndResolveTokens("text-field",S,r,f),E=ve.factory(T);fu(E)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Ei()||this.hasRTLText&&zi.isParsed())&&(k=Sl(E,n,S))}var I=void 0;if(u){var z=n.getValueAndResolveTokens("icon-image",S,r,f);I=z instanceof _e?z:_e.fromString(z)}if(k||I){var C=this.sortFeaturesByKey?c.evaluate(S,{},r):void 0;if(this.features.push({id:_,text:k,icon:I,index:x,sourceLayerIndex:b,geometry:S.geometry,properties:v.properties,type:uu[v.type],sortKey:C}),I&&(p[I.name]=!0),k){var A=o.evaluate(S,{},r).join(","),P="map"===i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf($l.vertical)>=0;for(var D=0,M=k.sections;D<M.length;D+=1){var L=M[D];if(L.image)p[L.image.name]=!0;else{var R=di(k.toString()),B=L.fontStack||A,O=h[B]=h[B]||{};this.calculateGlyphDependencies(L.text,O,P,this.allowVerticalPlacement,R)}}}}}}"line"===i.get("symbol-placement")&&(this.features=function(t){var e={},r={},n=[],i=0;function o(e){n.push(t[e]),i++}function a(t,e,i){var o=r[t];return delete r[t],r[e]=o,n[o].geometry[0].pop(),n[o].geometry[0]=n[o].geometry[0].concat(i[0]),o}function s(t,r,i){var o=e[r];return delete e[r],e[t]=o,n[o].geometry[0].shift(),n[o].geometry[0]=i[0].concat(n[o].geometry[0]),o}function l(t,e,r){var n=r?e[0][e[0].length-1]:e[0][0];return t+":"+n.x+":"+n.y}for(var u=0;u<t.length;u++){var c=t[u],p=c.geometry,h=c.text?c.text.toString():null;if(h){var f=l(h,p),d=l(h,p,!0);if(f in r&&d in e&&r[f]!==e[d]){var m=s(f,d,p),y=a(f,d,n[m].geometry);delete e[f],delete r[d],r[l(h,n[y].geometry,!0)]=y,n[m].geometry=null}else f in r?a(f,d,p):d in e?s(f,d,p):(o(u),e[f]=i-1,r[d]=i-1)}else o(u)}return n.filter((function(t){return t.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(t,e){return t.sortKey-e.sortKey}))}},yu.prototype.update=function(t,e,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,r),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,r))},yu.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},yu.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},yu.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},yu.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},yu.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},yu.prototype.addToLineVertexArray=function(t,e){var r=this.lineVertexArray.length;if(void 0!==t.segment){for(var n=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:n},a<e.length-1&&(n+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=e[s-1].dist(e[s]));for(var l=0;l<e.length;l++){var u=o[l];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}},yu.prototype.addSymbols=function(t,e,r,n,i,o,a,s,l,u,c,p){for(var h=t.indexArray,f=t.layoutVertexArray,d=t.segments.prepareSegment(4*e.length,f,h,this.canOverlap?o.sortKey:void 0),m=this.glyphOffsetArray.length,y=d.vertexLength,g=this.allowVerticalPlacement&&a===$l.vertical?Math.PI/2:0,v=o.text&&o.text.sections,_=0;_<e.length;_++){var x=e[_],b=x.tl,w=x.tr,S=x.bl,k=x.br,T=x.tex,E=x.pixelOffsetTL,I=x.pixelOffsetBR,z=x.minFontScaleX,C=x.minFontScaleY,A=x.glyphOffset,P=x.isSDF,D=x.sectionIndex,M=d.vertexLength,L=A[1];pu(f,s.x,s.y,b.x,L+b.y,T.x,T.y,r,P,E.x,E.y,z,C),pu(f,s.x,s.y,w.x,L+w.y,T.x+T.w,T.y,r,P,I.x,E.y,z,C),pu(f,s.x,s.y,S.x,L+S.y,T.x,T.y+T.h,r,P,E.x,I.y,z,C),pu(f,s.x,s.y,k.x,L+k.y,T.x+T.w,T.y+T.h,r,P,I.x,I.y,z,C),hu(t.dynamicLayoutVertexArray,s,g),h.emplaceBack(M,M+1,M+2),h.emplaceBack(M+1,M+2,M+3),d.vertexLength+=4,d.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(A[0]),_!==e.length-1&&D===e[_+1].sectionIndex||t.programConfigurations.populatePaintArrays(f.length,o,o.index,{},p,v&&v[D])}t.placedSymbolArray.emplaceBack(s.x,s.y,m,this.glyphOffsetArray.length-m,y,l,u,s.segment,r?r[0]:0,r?r[1]:0,n[0],n[1],a,0,!1,0,c)},yu.prototype._addCollisionDebugVertex=function(t,e,r,n,i,o){return e.emplaceBack(0,0),t.emplaceBack(r.x,r.y,n,i,Math.round(o.x),Math.round(o.y))},yu.prototype.addCollisionDebugVertices=function(t,e,r,n,o,a,s){var l=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),u=l.vertexLength,c=o.layoutVertexArray,p=o.collisionVertexArray,h=s.anchorX,f=s.anchorY;this._addCollisionDebugVertex(c,p,a,h,f,new i(t,e)),this._addCollisionDebugVertex(c,p,a,h,f,new i(r,e)),this._addCollisionDebugVertex(c,p,a,h,f,new i(r,n)),this._addCollisionDebugVertex(c,p,a,h,f,new i(t,n)),l.vertexLength+=4;var d=o.indexArray;d.emplaceBack(u,u+1),d.emplaceBack(u+1,u+2),d.emplaceBack(u+2,u+3),d.emplaceBack(u+3,u),l.primitiveLength+=4},yu.prototype.addDebugCollisionBoxes=function(t,e,r,n){for(var i=t;i<e;i++){var o=this.collisionBoxArray.get(i);this.addCollisionDebugVertices(o.x1,o.y1,o.x2,o.y2,n?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,r)}},yu.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new mu(ao,bl.members,yo),this.iconCollisionBox=new mu(ao,bl.members,yo);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},yu.prototype._deserializeCollisionBoxesForSymbol=function(t,e,r,n,i,o,a,s,l){for(var u={},c=e;c<r;c++){var p=t.get(c);u.textBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY},u.textFeatureIndex=p.featureIndex;break}for(var h=n;h<i;h++){var f=t.get(h);u.verticalTextBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,anchorPointX:f.anchorPointX,anchorPointY:f.anchorPointY},u.verticalTextFeatureIndex=f.featureIndex;break}for(var d=o;d<a;d++){var m=t.get(d);u.iconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,anchorPointX:m.anchorPointX,anchorPointY:m.anchorPointY},u.iconFeatureIndex=m.featureIndex;break}for(var y=s;y<l;y++){var g=t.get(y);u.verticalIconBox={x1:g.x1,y1:g.y1,x2:g.x2,y2:g.y2,anchorPointX:g.anchorPointX,anchorPointY:g.anchorPointY},u.verticalIconFeatureIndex=g.featureIndex;break}return u},yu.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var r=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,r.textBoxStartIndex,r.textBoxEndIndex,r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex,r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex))}},yu.prototype.hasTextData=function(){return this.text.segments.get().length>0},yu.prototype.hasIconData=function(){return this.icon.segments.get().length>0},yu.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},yu.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},yu.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},yu.prototype.addIndicesForPlacedSymbol=function(t,e){for(var r=t.placedSymbolArray.get(e),n=r.vertexStartIndex+4*r.numGlyphs,i=r.vertexStartIndex;i<n;i+=4)t.indexArray.emplaceBack(i,i+1,i+2),t.indexArray.emplaceBack(i+1,i+2,i+3)},yu.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),r=Math.cos(t),n=[],i=[],o=[],a=0;a<this.symbolInstances.length;++a){o.push(a);var s=this.symbolInstances.get(a);n.push(0|Math.round(e*s.anchorX+r*s.anchorY)),i.push(s.featureIndex)}return o.sort((function(t,e){return n[t]-n[e]||i[e]-i[t]})),o},yu.prototype.addToSortKeyRanges=function(t,e){var r=this.sortKeyRanges[this.sortKeyRanges.length-1];r&&r.sortKey===e?r.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})},yu.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var r=0,n=this.symbolInstanceIndexes;r<n.length;r+=1){var i=this.symbolInstances.get(n[r]);this.featureSortOrder.push(i.featureIndex),[i.rightJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.leftJustifiedTextSymbolIndex].forEach((function(t,r,n){t>=0&&n.indexOf(t)===r&&e.addIndicesForPlacedSymbol(e.text,t)})),i.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,i.verticalPlacedTextSymbolIndex),i.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,i.placedIconSymbolIndex),i.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,i.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Jn("SymbolBucket",yu,{omit:["layers","collisionBoxArray","features","compareText"]}),yu.MAX_GLYPHS=65535,yu.addDynamicAttributes=hu;var gu=new qi({"symbol-placement":new Fi(Zt.layout_symbol["symbol-placement"]),"symbol-spacing":new Fi(Zt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Fi(Zt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ni(Zt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Fi(Zt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Fi(Zt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Fi(Zt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Fi(Zt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Fi(Zt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ni(Zt.layout_symbol["icon-size"]),"icon-text-fit":new Fi(Zt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Fi(Zt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ni(Zt.layout_symbol["icon-image"]),"icon-rotate":new Ni(Zt.layout_symbol["icon-rotate"]),"icon-padding":new Fi(Zt.layout_symbol["icon-padding"]),"icon-keep-upright":new Fi(Zt.layout_symbol["icon-keep-upright"]),"icon-offset":new Ni(Zt.layout_symbol["icon-offset"]),"icon-anchor":new Ni(Zt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Fi(Zt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Fi(Zt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Fi(Zt.layout_symbol["text-rotation-alignment"]),"text-field":new Ni(Zt.layout_symbol["text-field"]),"text-font":new Ni(Zt.layout_symbol["text-font"]),"text-size":new Ni(Zt.layout_symbol["text-size"]),"text-max-width":new Ni(Zt.layout_symbol["text-max-width"]),"text-line-height":new Fi(Zt.layout_symbol["text-line-height"]),"text-letter-spacing":new Ni(Zt.layout_symbol["text-letter-spacing"]),"text-justify":new Ni(Zt.layout_symbol["text-justify"]),"text-radial-offset":new Ni(Zt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Fi(Zt.layout_symbol["text-variable-anchor"]),"text-anchor":new Ni(Zt.layout_symbol["text-anchor"]),"text-max-angle":new Fi(Zt.layout_symbol["text-max-angle"]),"text-writing-mode":new Fi(Zt.layout_symbol["text-writing-mode"]),"text-rotate":new Ni(Zt.layout_symbol["text-rotate"]),"text-padding":new Fi(Zt.layout_symbol["text-padding"]),"text-keep-upright":new Fi(Zt.layout_symbol["text-keep-upright"]),"text-transform":new Ni(Zt.layout_symbol["text-transform"]),"text-offset":new Ni(Zt.layout_symbol["text-offset"]),"text-allow-overlap":new Fi(Zt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Fi(Zt.layout_symbol["text-ignore-placement"]),"text-optional":new Fi(Zt.layout_symbol["text-optional"])}),vu={paint:new qi({"icon-opacity":new Ni(Zt.paint_symbol["icon-opacity"]),"icon-color":new Ni(Zt.paint_symbol["icon-color"]),"icon-halo-color":new Ni(Zt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ni(Zt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ni(Zt.paint_symbol["icon-halo-blur"]),"icon-translate":new Fi(Zt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Fi(Zt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ni(Zt.paint_symbol["text-opacity"]),"text-color":new Ni(Zt.paint_symbol["text-color"],{runtimeType:re,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new Ni(Zt.paint_symbol["text-halo-color"]),"text-halo-width":new Ni(Zt.paint_symbol["text-halo-width"]),"text-halo-blur":new Ni(Zt.paint_symbol["text-halo-blur"]),"text-translate":new Fi(Zt.paint_symbol["text-translate"]),"text-translate-anchor":new Fi(Zt.paint_symbol["text-translate-anchor"])}),layout:gu},_u=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:$t,this.defaultValue=t};_u.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},_u.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},_u.prototype.outputDefined=function(){return!1},_u.prototype.serialize=function(){return null},Jn("FormatSectionOverride",_u,{omit:["defaultValue"]});var xu=function(t){function e(e){t.call(this,e,vu)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,r){if(t.prototype.recalculate.call(this,e,r),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var n=this.layout.get("text-writing-mode");if(n){for(var i=[],o=0,a=n;o<a.length;o+=1){var s=a[o];i.indexOf(s)<0&&i.push(s)}this.layout._values["text-writing-mode"]=i}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(t,e,r,n){var i=this.layout.get(t).evaluate(e,{},r,n),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||sn(o.value)||!i?i:function(t,e){return e.replace(/{([^{}]+)}/g,(function(e,r){return r in t?String(t[r]):""}))}(e.properties,i)},e.prototype.createBucket=function(t){return new yu(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var t=0,r=vu.paint.overridableProperties;t<r.length;t+=1){var n=r[t];if(e.hasPaintOverride(this.layout,n)){var i,o=this.paint.get(n),a=new _u(o),s=new an(a,o.property.specification);i="constant"===o.value.kind||"source"===o.value.kind?new un("source",s):new cn("composite",s,o.value.zoomStops,o.value._interpolationType),this.paint._values[n]=new Bi(o.property,i,o.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(t,r,n){return!(!this.layout||r.isDataDriven()||n.isDataDriven())&&e.hasPaintOverride(this.layout,t)},e.hasPaintOverride=function(t,e){var r=t.get("text-field"),n=vu.paint.properties[e],i=!1,o=function(t){for(var e=0,r=t;e<r.length;e+=1)if(n.overrides&&n.overrides.hasOverride(r[e]))return void(i=!0)};if("constant"===r.value.kind&&r.value.value instanceof ve)o(r.value.value.sections);else if("source"===r.value.kind){var a=function t(e){i||(e instanceof ke&&we(e.value)===ae?o(e.value.sections):e instanceof ze?o(e.sections):e.eachChild(t))},s=r.value;s._styleExpression&&a(s._styleExpression.expression)}return i},e}(Zi),bu={paint:new qi({"background-color":new Fi(Zt.paint_background["background-color"]),"background-pattern":new Ui(Zt.paint_background["background-pattern"]),"background-opacity":new Fi(Zt.paint_background["background-opacity"])})},wu=function(t){function e(e){t.call(this,e,bu)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Zi),Su={paint:new qi({"raster-opacity":new Fi(Zt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Fi(Zt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Fi(Zt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Fi(Zt.paint_raster["raster-brightness-max"]),"raster-saturation":new Fi(Zt.paint_raster["raster-saturation"]),"raster-contrast":new Fi(Zt.paint_raster["raster-contrast"]),"raster-resampling":new Fi(Zt.paint_raster["raster-resampling"]),"raster-fade-duration":new Fi(Zt.paint_raster["raster-fade-duration"])})},ku=function(t){function e(e){t.call(this,e,Su)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Zi),Tu=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},e}(Zi),Eu={circle:qa,heatmap:Ja,hillshade:es,fill:Us,"fill-extrusion":il,line:yl,symbol:xu,background:wu,raster:ku};function Iu(t){return"custom"===t.type?new Tu(t):new Eu[t.type](t)}var zu=a.HTMLImageElement,Cu=a.HTMLCanvasElement,Au=a.HTMLVideoElement,Pu=a.ImageData,Du=a.ImageBitmap,Mu=function(t,e,r,n){this.context=t,this.format=r,this.texture=t.gl.createTexture(),this.update(e,n)};function Lu(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}Mu.prototype.update=function(t,e,r){var n=t.width,i=t.height,o=!(this.size&&this.size[0]===n&&this.size[1]===i||r),a=this.context,s=a.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),o)this.size=[n,i],t instanceof zu||t instanceof Cu||t instanceof Au||t instanceof Pu||Du&&t instanceof Du?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,n,i,0,this.format,s.UNSIGNED_BYTE,t.data);else{var l=r||{x:0,y:0},u=l.x,c=l.y;t instanceof zu||t instanceof Cu||t instanceof Au||t instanceof Pu||Du&&t instanceof Du?s.texSubImage2D(s.TEXTURE_2D,0,u,c,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,u,c,n,i,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},Mu.prototype.bind=function(t,e,r){var n=this.context.gl;n.bindTexture(n.TEXTURE_2D,this.texture),r!==n.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(r=n.LINEAR),t!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,r||t),this.filter=t),e!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e),this.wrap=e)},Mu.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Mu.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Ru=function(t){function e(){t.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new Ya({width:1,height:1}),this.dirty=!0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isLoaded=function(){return this.loaded},e.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,r=this.requestors;e<r.length;e+=1){var n=r[e];this._notify(n.ids,n.callback)}this.requestors=[]}},e.prototype.getImage=function(t){return this.images[t]},e.prototype.addImage=function(t,e){this._validate(t,e)&&(this.images[t]=e)},e.prototype._validate=function(t,e){var r=!0;return this._validateStretch(e.stretchX,e.data&&e.data.width)||(this.fire(new jt(new Error('Image "'+t+'" has invalid "stretchX" value'))),r=!1),this._validateStretch(e.stretchY,e.data&&e.data.height)||(this.fire(new jt(new Error('Image "'+t+'" has invalid "stretchY" value'))),r=!1),this._validateContent(e.content,e)||(this.fire(new jt(new Error('Image "'+t+'" has invalid "content" value'))),r=!1),r},e.prototype._validateStretch=function(t,e){if(!t)return!0;for(var r=0,n=0,i=t;n<i.length;n+=1){var o=i[n];if(o[0]<r||o[1]<o[0]||e<o[1])return!1;r=o[1]}return!0},e.prototype._validateContent=function(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))},e.prototype.updateImage=function(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0},e.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},e.prototype.listImages=function(){return Object.keys(this.images)},e.prototype.getImages=function(t,e){var r=!0;if(!this.isLoaded())for(var n=0,i=t;n<i.length;n+=1)this.images[i[n]]||(r=!1);this.isLoaded()||r?this._notify(t,e):this.requestors.push({ids:t,callback:e})},e.prototype._notify=function(t,e){for(var r={},n=0,i=t;n<i.length;n+=1){var o=i[n];this.images[o]||this.fire(new Ut("styleimagemissing",{id:o}));var a=this.images[o];a?r[o]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf,version:a.version,stretchX:a.stretchX,stretchY:a.stretchY,content:a.content,hasRenderCallback:Boolean(a.userImage&&a.userImage.render)}:I('Image "'+o+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}e(null,r)},e.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},e.prototype.getPattern=function(t){var e=this.patterns[t],r=this.getImage(t);if(!r)return null;if(e&&e.position.version===r.version)return e.position;if(e)e.position.version=r.version;else{var n={w:r.data.width+2,h:r.data.height+2,x:0,y:0},i=new Kl(n,r);this.patterns[t]={bin:n,position:i}}return this._updatePatternAtlas(),this.patterns[t].position},e.prototype.bind=function(t){var e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Mu(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)},e.prototype._updatePatternAtlas=function(){var t=[];for(var e in this.patterns)t.push(this.patterns[e].bin);var r=Xl(t),n=r.w,i=r.h,o=this.atlasImage;for(var a in o.resize({width:n||1,height:i||1}),this.patterns){var s=this.patterns[a].bin,l=s.x+1,u=s.y+1,c=this.images[a].data,p=c.width,h=c.height;Ya.copy(c,o,{x:0,y:0},{x:l,y:u},{width:p,height:h}),Ya.copy(c,o,{x:0,y:h-1},{x:l,y:u-1},{width:p,height:1}),Ya.copy(c,o,{x:0,y:0},{x:l,y:u+h},{width:p,height:1}),Ya.copy(c,o,{x:p-1,y:0},{x:l-1,y:u},{width:1,height:h}),Ya.copy(c,o,{x:0,y:0},{x:l+p,y:u},{width:1,height:h})}this.dirty=!0},e.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},e.prototype.dispatchRenderCallbacks=function(t){for(var e=0,r=t;e<r.length;e+=1){var n=r[e];if(!this.callbackDispatchedThisFrame[n]){this.callbackDispatchedThisFrame[n]=!0;var i=this.images[n];Lu(i)&&this.updateImage(n,i)}}},e}(qt),Bu=Nu,Ou=Nu,Fu=1e20;function Nu(t,e,r,n,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=n||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=r||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Vu(t,e,r,n,i,o,a){for(var s=0;s<e;s++){for(var l=0;l<r;l++)n[l]=t[l*e+s];for(Uu(n,i,o,a,r),l=0;l<r;l++)t[l*e+s]=i[l]}for(l=0;l<r;l++){for(s=0;s<e;s++)n[s]=t[l*e+s];for(Uu(n,i,o,a,e),s=0;s<e;s++)t[l*e+s]=Math.sqrt(i[s])}}function Uu(t,e,r,n,i){r[0]=0,n[0]=-Fu,n[1]=+Fu;for(var o=1,a=0;o<i;o++){for(var s=(t[o]+o*o-(t[r[a]]+r[a]*r[a]))/(2*o-2*r[a]);s<=n[a];)a--,s=(t[o]+o*o-(t[r[a]]+r[a]*r[a]))/(2*o-2*r[a]);r[++a]=o,n[a]=s,n[a+1]=+Fu}for(o=0,a=0;o<i;o++){for(;n[a+1]<o;)a++;e[o]=(o-r[a])*(o-r[a])+t[r[a]]}}Nu.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),r=new Uint8ClampedArray(this.size*this.size),n=0;n<this.size*this.size;n++){var i=e.data[4*n+3]/255;this.gridOuter[n]=1===i?0:0===i?Fu:Math.pow(Math.max(0,.5-i),2),this.gridInner[n]=1===i?Fu:0===i?0:Math.pow(Math.max(0,i-.5),2)}for(Vu(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Vu(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),n=0;n<this.size*this.size;n++)r[n]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[n]-this.gridInner[n])/this.radius+this.cutoff))));return r},Bu.default=Ou;var ju=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};ju.prototype.setURL=function(t){this.url=t},ju.prototype.getGlyphs=function(t,e){var r=this,n=[];for(var i in t)for(var o=0,a=t[i];o<a.length;o+=1)n.push({stack:i,id:a[o]});f(n,(function(t,e){var n=t.stack,i=t.id,o=r.entries[n];o||(o=r.entries[n]={glyphs:{},requests:{},ranges:{}});var a=o.glyphs[i];if(void 0===a){if(a=r._tinySDF(o,n,i))return o.glyphs[i]=a,void e(null,{stack:n,id:i,glyph:a});var s=Math.floor(i/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else if(o.ranges[s])e(null,{stack:n,id:i,glyph:a});else{var l=o.requests[s];l||(l=o.requests[s]=[],ju.loadGlyphRange(n,s,r.url,r.requestManager,(function(t,e){if(e){for(var n in e)r._doesCharSupportLocalGlyph(+n)||(o.glyphs[+n]=e[+n]);o.ranges[s]=!0}for(var i=0,a=l;i<a.length;i+=1)(0,a[i])(t,e);delete o.requests[s]}))),l.push((function(t,r){t?e(t):r&&e(null,{stack:n,id:i,glyph:r[i]||null})}))}}else e(null,{stack:n,id:i,glyph:a})}),(function(t,r){if(t)e(t);else if(r){for(var n={},i=0,o=r;i<o.length;i+=1){var a=o[i],s=a.stack,l=a.id,u=a.glyph;(n[s]||(n[s]={}))[l]=u&&{id:u.id,bitmap:u.bitmap.clone(),metrics:u.metrics}}e(null,n)}}))},ju.prototype._doesCharSupportLocalGlyph=function(t){return!!this.localIdeographFontFamily&&(ui(t)||ci(t)||si(t)||li(t))},ju.prototype._tinySDF=function(t,e,r){var n=this.localIdeographFontFamily;if(n&&this._doesCharSupportLocalGlyph(r)){var i=t.tinySDF;if(!i){var o="400";/bold/i.test(e)?o="900":/medium/i.test(e)?o="500":/light/i.test(e)&&(o="200"),i=t.tinySDF=new ju.TinySDF(24,3,8,.25,n,o)}return{id:r,bitmap:new Ka({width:30,height:30},i.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},ju.loadGlyphRange=function(t,e,r,n,i){var o=256*e,a=o+255,s=n.transformRequest(n.normalizeGlyphsURL(r).replace("{fontstack}",t).replace("{range}",o+"-"+a),zt.Glyphs);Rt(s,(function(t,e){if(t)i(t);else if(e){for(var r={},n=0,o=function(t){return new Il(t).readFields(Gl,[])}(e);n<o.length;n+=1){var a=o[n];r[a.id]=a}i(null,r)}}))},ju.TinySDF=Bu;var qu=function(){this.specification=Zt.light.position};qu.prototype.possiblyEvaluate=function(t,e){return n=(r=t.expression.evaluate(e))[0],i=r[1],o=r[2],i+=90,i*=Math.PI/180,o*=Math.PI/180,{x:n*Math.cos(i)*Math.sin(o),y:n*Math.sin(i)*Math.sin(o),z:n*Math.cos(o)};var r,n,i,o},qu.prototype.interpolate=function(t,e,r){return{x:or(t.x,e.x,r),y:or(t.y,e.y,r),z:or(t.z,e.z,r)}};var Zu=new qi({anchor:new Fi(Zt.light.anchor),position:new qu,color:new Fi(Zt.light.color),intensity:new Fi(Zt.light.intensity)}),Gu=function(t){function e(e){t.call(this),this._transitionable=new Di(Zu),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getLight=function(){return this._transitionable.serialize()},e.prototype.setLight=function(t,e){if(void 0===e&&(e={}),!this._validate(Zn,t,e))for(var r in t){var n=t[r];w(r,"-transition")?this._transitionable.setTransition(r.slice(0,-"-transition".length),n):this._transitionable.setValue(r,n)}},e.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},e.prototype.hasTransition=function(){return this._transitioning.hasTransition()},e.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},e.prototype._validate=function(t,e,r){return(!r||!1!==r.validate)&&Hn(this,t.call(qn,m({value:e,style:{glyphs:!0,sprite:!0},styleSpec:Zt})))},e}(qt),Wu=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Wu.prototype.getDash=function(t,e){var r=t.join(",")+String(e);return this.dashEntry[r]||(this.dashEntry[r]=this.addDash(t,e)),this.dashEntry[r]},Wu.prototype.getDashRanges=function(t,e,r){var n=[],i=t.length%2==1?-t[t.length-1]*r:0,o=t[0]*r,a=!0;n.push({left:i,right:o,isDash:a,zeroLength:0===t[0]});for(var s=t[0],l=1;l<t.length;l++){var u=t[l];n.push({left:i=s*r,right:o=(s+=u)*r,isDash:a=!a,zeroLength:0===u})}return n},Wu.prototype.addRoundDash=function(t,e,r){for(var n=e/2,i=-r;i<=r;i++)for(var o=this.width*(this.nextRow+r+i),a=0,s=t[a],l=0;l<this.width;l++){l/s.right>1&&(s=t[++a]);var u=Math.abs(l-s.left),c=Math.abs(l-s.right),p=Math.min(u,c),h=void 0,f=i/r*(n+1);if(s.isDash){var d=n-Math.abs(f);h=Math.sqrt(p*p+d*d)}else h=n-Math.sqrt(p*p+f*f);this.data[o+l]=Math.max(0,Math.min(255,h+128))}},Wu.prototype.addRegularDash=function(t){for(var e=t.length-1;e>=0;--e){var r=t[e],n=t[e+1];r.zeroLength?t.splice(e,1):n&&n.isDash===r.isDash&&(n.left=r.left,t.splice(e,1))}var i=t[0],o=t[t.length-1];i.isDash===o.isDash&&(i.left=o.left-this.width,o.right=i.right+this.width);for(var a=this.width*this.nextRow,s=0,l=t[s],u=0;u<this.width;u++){u/l.right>1&&(l=t[++s]);var c=Math.abs(u-l.left),p=Math.abs(u-l.right),h=Math.min(c,p);this.data[a+u]=Math.max(0,Math.min(255,(l.isDash?h:-h)+128))}},Wu.prototype.addDash=function(t,e){var r=e?7:0,n=2*r+1;if(this.nextRow+n>this.height)return I("LineAtlas out of space"),null;for(var i=0,o=0;o<t.length;o++)i+=t[o];if(0!==i){var a=this.width/i,s=this.getDashRanges(t,this.width,a);e?this.addRoundDash(s,a,r):this.addRegularDash(s)}var l={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:i};return this.nextRow+=n,this.dirty=!0,l},Wu.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))};var Hu=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};Hu.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){t._triggered=!1,t._callback()}),0))},Hu.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Xu=function(t,e,r){this.target=t,this.parent=e,this.mapId=r,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},b(["receive","process"],this),this.invoker=new Hu(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=A()?t:a};Xu.prototype.send=function(t,e,r,n,i){var o=this;void 0===i&&(i=!1);var a=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(this.callbacks[a]=r);var s=M(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!r,targetMapId:n,mustQueue:i,sourceMapId:this.mapId,data:ni(e,s)},s),{cancel:function(){r&&delete o.callbacks[a],o.target.postMessage({id:a,type:"<cancel>",targetMapId:n,sourceMapId:o.mapId})}}},Xu.prototype.receive=function(t){var e=t.data,r=e.id;if(r&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[r];var n=this.cancelCallbacks[r];delete this.cancelCallbacks[r],n&&n()}else A()||e.mustQueue?(this.tasks[r]=e,this.taskQueue.push(r),this.invoker.trigger()):this.processTask(r,e)},Xu.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},Xu.prototype.processTask=function(t,e){var r=this;if("<response>"===e.type){var n=this.callbacks[t];delete this.callbacks[t],n&&(e.error?n(ii(e.error)):n(null,ii(e.data)))}else{var i=!1,o=M(this.globalScope)?void 0:[],a=e.hasCallback?function(e,n){i=!0,delete r.cancelCallbacks[t],r.target.postMessage({id:t,type:"<response>",sourceMapId:r.mapId,error:e?ni(e):null,data:ni(n,o)},o)}:function(t){i=!0},s=null,l=ii(e.data);if(this.parent[e.type])s=this.parent[e.type](e.sourceMapId,l,a);else if(this.parent.getWorkerSource){var u=e.type.split(".");s=this.parent.getWorkerSource(e.sourceMapId,u[0],l.source)[u[1]](l,a)}else a(new Error("Could not find function "+e.type));!i&&s&&s.cancel&&(this.cancelCallbacks[t]=s.cancel)}},Xu.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Ku=function t(e,r){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=v();for(var n=this.workerPool.acquire(this.id),i=0;i<n.length;i++){var o=new t.Actor(n[i],r,this.id);o.name="Worker "+i,this.actors.push(o)}};function Yu(t,e,r){var n=2*Math.PI*6378137/256/Math.pow(2,r);return[t*n-2*Math.PI*6378137/2,e*n-2*Math.PI*6378137/2]}Ku.prototype.broadcast=function(t,e,r){f(this.actors,(function(r,n){r.send(t,e,n)}),r=r||function(){})},Ku.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Ku.prototype.remove=function(){this.actors.forEach((function(t){t.remove()})),this.actors=[],this.workerPool.release(this.id)},Ku.Actor=Xu;var Qu=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Qu.prototype.setNorthEast=function(t){return this._ne=t instanceof $u?new $u(t.lng,t.lat):$u.convert(t),this},Qu.prototype.setSouthWest=function(t){return this._sw=t instanceof $u?new $u(t.lng,t.lat):$u.convert(t),this},Qu.prototype.extend=function(t){var e,r,n=this._sw,i=this._ne;if(t instanceof $u)e=t,r=t;else{if(!(t instanceof Qu))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Qu.convert(t)):this.extend($u.convert(t)):this;if(r=t._ne,!(e=t._sw)||!r)return this}return n||i?(n.lng=Math.min(e.lng,n.lng),n.lat=Math.min(e.lat,n.lat),i.lng=Math.max(r.lng,i.lng),i.lat=Math.max(r.lat,i.lat)):(this._sw=new $u(e.lng,e.lat),this._ne=new $u(r.lng,r.lat)),this},Qu.prototype.getCenter=function(){return new $u((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Qu.prototype.getSouthWest=function(){return this._sw},Qu.prototype.getNorthEast=function(){return this._ne},Qu.prototype.getNorthWest=function(){return new $u(this.getWest(),this.getNorth())},Qu.prototype.getSouthEast=function(){return new $u(this.getEast(),this.getSouth())},Qu.prototype.getWest=function(){return this._sw.lng},Qu.prototype.getSouth=function(){return this._sw.lat},Qu.prototype.getEast=function(){return this._ne.lng},Qu.prototype.getNorth=function(){return this._ne.lat},Qu.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Qu.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Qu.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Qu.prototype.contains=function(t){var e=$u.convert(t),r=e.lng,n=e.lat,i=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=r&&r>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&i},Qu.convert=function(t){return!t||t instanceof Qu?t:new Qu(t)};var $u=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};$u.prototype.wrap=function(){return new $u(h(this.lng,-180,180),this.lat)},$u.prototype.toArray=function(){return[this.lng,this.lat]},$u.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},$u.prototype.distanceTo=function(t){var e=Math.PI/180,r=this.lat*e,n=t.lat*e,i=Math.sin(r)*Math.sin(n)+Math.cos(r)*Math.cos(n)*Math.cos((t.lng-this.lng)*e);return 6371008.8*Math.acos(Math.min(i,1))},$u.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,r=e/Math.cos(Math.PI/180*this.lat);return new Qu(new $u(this.lng-r,this.lat-e),new $u(this.lng+r,this.lat+e))},$u.convert=function(t){if(t instanceof $u)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new $u(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new $u(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Ju=2*Math.PI*6371008.8;function tc(t){return Ju*Math.cos(t*Math.PI/180)}function ec(t){return(180+t)/360}function rc(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function nc(t,e){return t/tc(e)}function ic(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}var oc=function(t,e,r){void 0===r&&(r=0),this.x=+t,this.y=+e,this.z=+r};oc.fromLngLat=function(t,e){void 0===e&&(e=0);var r=$u.convert(t);return new oc(ec(r.lng),rc(r.lat),nc(e,r.lat))},oc.prototype.toLngLat=function(){return new $u(360*this.x-180,ic(this.y))},oc.prototype.toAltitude=function(){return this.z*tc(ic(this.y))},oc.prototype.meterInMercatorCoordinateUnits=function(){return 1/Ju*(t=ic(this.y),1/Math.cos(t*Math.PI/180));var t};var ac=function(t,e,r){this.z=t,this.x=e,this.y=r,this.key=uc(0,t,t,e,r)};ac.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},ac.prototype.url=function(t,e){var r,n,i,o,a,s=(n=this.y,i=this.z,o=Yu(256*(r=this.x),256*(n=Math.pow(2,i)-n-1),i),a=Yu(256*(r+1),256*(n+1),i),o[0]+","+o[1]+","+a[0]+","+a[1]),l=function(t,e,r){for(var n,i="",o=t;o>0;o--)i+=(e&(n=1<<o-1)?1:0)+(r&n?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",s)},ac.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new i(8192*(t.x*e-this.x),8192*(t.y*e-this.y))},ac.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var sc=function(t,e){this.wrap=t,this.canonical=e,this.key=uc(t,e.z,e.z,e.x,e.y)},lc=function(t,e,r,n,i){this.overscaledZ=t,this.wrap=e,this.canonical=new ac(r,+n,+i),this.key=uc(e,t,r,n,i)};function uc(t,e,r,n,i){(t*=2)<0&&(t=-1*t-1);var o=1<<r;return(o*o*t+o*i+n).toString(36)+r.toString(36)+e.toString(36)}function cc(t,e,r){var n=function(n,i){if(n)return r(n);if(i){var o=y(m(i,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(o.vectorLayers=i.vector_layers,o.vectorLayerIds=o.vectorLayers.map((function(t){return t.id}))),o.tiles=e.canonicalizeTileset(o,t.url),r(null,o)}};return t.url?Lt(e.transformRequest(e.normalizeSourceURL(t.url),zt.Source),n):V.frame((function(){return n(null,t)}))}lc.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},lc.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new lc(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new lc(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},lc.prototype.calculateScaledKey=function(t,e){var r=this.canonical.z-t;return t>this.canonical.z?uc(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):uc(this.wrap*+e,t,t,this.canonical.x>>r,this.canonical.y>>r)},lc.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},lc.prototype.children=function(t){if(this.overscaledZ>=t)return[new lc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,r=2*this.canonical.x,n=2*this.canonical.y;return[new lc(e,this.wrap,e,r,n),new lc(e,this.wrap,e,r+1,n),new lc(e,this.wrap,e,r,n+1),new lc(e,this.wrap,e,r+1,n+1)]},lc.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},lc.prototype.wrapped=function(){return new lc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},lc.prototype.unwrapTo=function(t){return new lc(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},lc.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},lc.prototype.toUnwrapped=function(){return new sc(this.wrap,this.canonical)},lc.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},lc.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new oc(t.x-this.wrap,t.y))},Jn("CanonicalTileID",ac),Jn("OverscaledTileID",lc,{omit:["posMatrix"]});var pc=function(t,e,r){this.bounds=Qu.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=r||24};pc.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},pc.prototype.contains=function(t){var e=Math.pow(2,t.z),r=Math.floor(ec(this.bounds.getWest())*e),n=Math.floor(rc(this.bounds.getNorth())*e),i=Math.ceil(ec(this.bounds.getEast())*e),o=Math.ceil(rc(this.bounds.getSouth())*e);return t.x>=r&&t.x<i&&t.y>=n&&t.y<o};var hc=function(t){function e(e,r,n,i){if(t.call(this),this.id=e,this.dispatcher=n,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,m(this,y(r,["url","scheme","tileSize","promoteId"])),this._options=m({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this._loaded=!1,this.fire(new Ut("dataloading",{dataType:"source"})),this._tileJSONRequest=cc(this._options,this.map._requestManager,(function(e,r){t._tileJSONRequest=null,t._loaded=!0,e?t.fire(new jt(e)):r&&(m(t,r),r.bounds&&(t.tileBounds=new pc(r.bounds,t.minzoom,t.maxzoom)),gt(r.tiles,t.map._requestManager._customAccessToken),_t(r.tiles,t.map._getMapId(),t.map._requestManager._skuToken,t.map._requestManager._customAccessToken),t.fire(new Ut("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new Ut("data",{dataType:"source",sourceDataType:"content"})))}))},e.prototype.loaded=function(){return this._loaded},e.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.setSourceProperty=function(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},e.prototype.setTiles=function(t){var e=this;return this.setSourceProperty((function(){e._options.tiles=t})),this},e.prototype.setUrl=function(t){var e=this;return this.setSourceProperty((function(){e.url=t,e._options.url=t})),this},e.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},e.prototype.serialize=function(){return m({},this._options)},e.prototype.loadTile=function(t,e){var r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),n={request:this.map._requestManager.transformRequest(r,zt.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:V.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function i(r,n){return delete t.request,t.aborted?e(null):r&&404!==r.status?e(r):(n&&n.resourceTiming&&(t.resourceTiming=n.resourceTiming),this.map._refreshExpiredTiles&&n&&t.setExpiryData(n),t.loadVectorData(n,this.map.painter),Et(this.dispatcher),e(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}n.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state?"loading"===t.state?t.reloadCallback=e:t.request=t.actor.send("reloadTile",n,i.bind(this)):(t.actor=this.dispatcher.getActor(),t.request=t.actor.send("loadTile",n,i.bind(this)))},e.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},e.prototype.unloadTile=function(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},e.prototype.hasTransition=function(){return!1},e}(qt),fc=function(t){function e(e,r,n,i){t.call(this),this.id=e,this.dispatcher=n,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=m({type:"raster"},r),m(this,y(r,["url","scheme","tileSize"]))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this._loaded=!1,this.fire(new Ut("dataloading",{dataType:"source"})),this._tileJSONRequest=cc(this._options,this.map._requestManager,(function(e,r){t._tileJSONRequest=null,t._loaded=!0,e?t.fire(new jt(e)):r&&(m(t,r),r.bounds&&(t.tileBounds=new pc(r.bounds,t.minzoom,t.maxzoom)),gt(r.tiles),_t(r.tiles,t.map._getMapId(),t.map._requestManager._skuToken),t.fire(new Ut("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new Ut("data",{dataType:"source",sourceDataType:"content"})))}))},e.prototype.loaded=function(){return this._loaded},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},e.prototype.serialize=function(){return m({},this._options)},e.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},e.prototype.loadTile=function(t,e){var r=this,n=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);t.request=Ft(this.map._requestManager.transformRequest(n,zt.Tile),(function(n,i){if(delete t.request,t.aborted)t.state="unloaded",e(null);else if(n)t.state="errored",e(n);else if(i){r.map._refreshExpiredTiles&&t.setExpiryData(i),delete i.cacheControl,delete i.expires;var o=r.map.painter.context,a=o.gl;t.texture=r.map.painter.getTileTexture(i.width),t.texture?t.texture.update(i,{useMipmap:!0}):(t.texture=new Mu(o,i,a.RGBA,{useMipmap:!0}),t.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),o.extTextureFilterAnisotropic&&a.texParameterf(a.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax)),t.state="loaded",Et(r.dispatcher),e(null)}}))},e.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},e.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},e.prototype.hasTransition=function(){return!1},e}(qt),dc=function(t,e,r){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return I('"'+r+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var n=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=r||"mapbox";for(var i=0;i<n;i++)this.data[this._idx(-1,i)]=this.data[this._idx(0,i)],this.data[this._idx(n,i)]=this.data[this._idx(n-1,i)],this.data[this._idx(i,-1)]=this.data[this._idx(i,0)],this.data[this._idx(i,n)]=this.data[this._idx(i,n-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(n,-1)]=this.data[this._idx(n-1,0)],this.data[this._idx(-1,n)]=this.data[this._idx(0,n-1)],this.data[this._idx(n,n)]=this.data[this._idx(n-1,n-1)]};dc.prototype.get=function(t,e){var r=new Uint8Array(this.data.buffer),n=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(r[n],r[n+1],r[n+2])},dc.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},dc.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},dc.prototype._unpackMapbox=function(t,e,r){return(256*t*256+256*e+r)/10-1e4},dc.prototype._unpackTerrarium=function(t,e,r){return 256*t+e+r/256-32768},dc.prototype.getPixels=function(){return new Ya({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},dc.prototype.backfillBorder=function(t,e,r){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var n=e*this.dim,i=e*this.dim+this.dim,o=r*this.dim,a=r*this.dim+this.dim;switch(e){case-1:n=i-1;break;case 1:i=n+1}switch(r){case-1:o=a-1;break;case 1:a=o+1}for(var s=-e*this.dim,l=-r*this.dim,u=o;u<a;u++)for(var c=n;c<i;c++)this.data[this._idx(c,u)]=t.data[this._idx(c+s,u+l)]},Jn("DEMData",dc);var mc=function(t){function e(e,r,n,i){t.call(this,e,r,n,i),this.type="raster-dem",this.maxzoom=22,this._options=m({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox"}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},e.prototype.loadTile=function(t,e){var r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function n(r,n){r&&(t.state="errored",e(r)),n&&(t.dem=n,t.needsHillshadePrepare=!0,t.state="loaded",e(null))}t.request=Ft(this.map._requestManager.transformRequest(r,zt.Tile),function(r,i){if(delete t.request,t.aborted)t.state="unloaded",e(null);else if(r)t.state="errored",e(r);else if(i){this.map._refreshExpiredTiles&&t.setExpiryData(i),delete i.cacheControl,delete i.expires;var o=a.ImageBitmap&&i instanceof a.ImageBitmap&&It()?i:V.getImageData(i,1),s={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:o,encoding:this.encoding};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",s,n.bind(this)))}}.bind(this)),t.neighboringTiles=this._getNeighboringTiles(t.tileID)},e.prototype._getNeighboringTiles=function(t){var e=t.canonical,r=Math.pow(2,e.z),n=(e.x-1+r)%r,i=0===e.x?t.wrap-1:t.wrap,o=(e.x+1+r)%r,a=e.x+1===r?t.wrap+1:t.wrap,s={};return s[new lc(t.overscaledZ,i,e.z,n,e.y).key]={backfilled:!1},s[new lc(t.overscaledZ,a,e.z,o,e.y).key]={backfilled:!1},e.y>0&&(s[new lc(t.overscaledZ,i,e.z,n,e.y-1).key]={backfilled:!1},s[new lc(t.overscaledZ,t.wrap,e.z,e.x,e.y-1).key]={backfilled:!1},s[new lc(t.overscaledZ,a,e.z,o,e.y-1).key]={backfilled:!1}),e.y+1<r&&(s[new lc(t.overscaledZ,i,e.z,n,e.y+1).key]={backfilled:!1},s[new lc(t.overscaledZ,t.wrap,e.z,e.x,e.y+1).key]={backfilled:!1},s[new lc(t.overscaledZ,a,e.z,o,e.y+1).key]={backfilled:!1}),s},e.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},e}(fc),yc=function(t){function e(e,r,n,i){t.call(this),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=n.getActor(),this.setEventedParent(i),this._data=r.data,this._options=m({},r),this._collectResourceTiming=r.collectResourceTiming,this._resourceTiming=[],void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId;var o=8192/this.tileSize;this.workerOptions=m({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*o,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*o,extent:8192,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?Math.min(r.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:8192,radius:(r.clusterRadius||50)*o,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this.fire(new Ut("dataloading",{dataType:"source"})),this._updateWorkerData((function(e){if(e)t.fire(new jt(e));else{var r={dataType:"source",sourceDataType:"metadata"};t._collectResourceTiming&&t._resourceTiming&&t._resourceTiming.length>0&&(r.resourceTiming=t._resourceTiming,t._resourceTiming=[]),t.fire(new Ut("data",r))}}))},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.setData=function(t){var e=this;return this._data=t,this.fire(new Ut("dataloading",{dataType:"source"})),this._updateWorkerData((function(t){if(t)e.fire(new jt(t));else{var r={dataType:"source",sourceDataType:"content"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(r.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new Ut("data",r))}})),this},e.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},e.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},e.prototype.getClusterLeaves=function(t,e,r,n){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:r},n),this},e.prototype._updateWorkerData=function(t){var e=this;this._loaded=!1;var r=m({},this.workerOptions),n=this._data;"string"==typeof n?(r.request=this.map._requestManager.transformRequest(V.resolveURL(n),zt.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(n),this.actor.send(this.type+".loadData",r,(function(n,i){e._removed||i&&i.abandoned||(e._loaded=!0,i&&i.resourceTiming&&i.resourceTiming[e.id]&&(e._resourceTiming=i.resourceTiming[e.id].slice(0)),e.actor.send(e.type+".coalesce",{source:r.source},null),t(n))}))},e.prototype.loaded=function(){return this._loaded},e.prototype.loadTile=function(t,e){var r=this,n=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(n,{type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:V.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(i,o){return delete t.request,t.unloadVectorData(),t.aborted?e(null):i?e(i):(t.loadVectorData(o,r.map.painter,"reloadTile"===n),e(null))}))},e.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},e.prototype.unloadTile=function(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},e.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},e.prototype.serialize=function(){return m({},this._options,{type:this.type,data:this._data})},e.prototype.hasTransition=function(){return!1},e}(qt),gc=Xi([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),vc=function(t){function e(e,r,n,i){t.call(this),this.id=e,this.dispatcher=n,this.coordinates=r.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(i),this.options=r}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(t,e){var r=this;this._loaded=!1,this.fire(new Ut("dataloading",{dataType:"source"})),this.url=this.options.url,Ft(this.map._requestManager.transformRequest(this.url,zt.Image),(function(n,i){r._loaded=!0,n?r.fire(new jt(n)):i&&(r.image=i,t&&(r.coordinates=t),e&&e(),r._finishLoading())}))},e.prototype.loaded=function(){return this._loaded},e.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(function(){e.texture=null})),this):this},e.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new Ut("data",{dataType:"source",sourceDataType:"metadata"})))},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.setCoordinates=function(t){var e=this;this.coordinates=t;var r=t.map(oc.fromLngLat);this.tileID=function(t){for(var e=1/0,r=1/0,n=-1/0,i=-1/0,o=0,a=t;o<a.length;o+=1){var s=a[o];e=Math.min(e,s.x),r=Math.min(r,s.y),n=Math.max(n,s.x),i=Math.max(i,s.y)}var l=Math.max(n-e,i-r),u=Math.max(0,Math.floor(-Math.log(l)/Math.LN2)),c=Math.pow(2,u);return new ac(u,Math.floor((e+n)/2*c),Math.floor((r+i)/2*c))}(r),this.minzoom=this.maxzoom=this.tileID.z;var n=r.map((function(t){return e.tileID.getTilePoint(t)._round()}));return this._boundsArray=new Qi,this._boundsArray.emplaceBack(n[0].x,n[0].y,0,0),this._boundsArray.emplaceBack(n[1].x,n[1].y,8192,0),this._boundsArray.emplaceBack(n[3].x,n[3].y,0,8192),this._boundsArray.emplaceBack(n[2].x,n[2].y,8192,8192),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new Ut("data",{dataType:"source",sourceDataType:"content"})),this},e.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,e=t.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,gc.members)),this.boundsSegments||(this.boundsSegments=Ao.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Mu(t,this.image,e.RGBA),this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE)),this.tiles){var n=this.tiles[r];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},e.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},e.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},e.prototype.hasTransition=function(){return!1},e}(qt),_c=function(t){function e(e,r,n,i){t.call(this,e,r,n,i),this.roundZoom=!0,this.type="video",this.options=r}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this._loaded=!1;var e=this.options;this.urls=[];for(var r=0,n=e.urls;r<n.length;r+=1)this.urls.push(this.map._requestManager.transformRequest(n[r],zt.Source).url);!function(e,r){var n,i,o=a.document.createElement("video");o.muted=!0,o.onloadstart=function(){!function(e,r){t._loaded=!0,r&&(t.video=r,t.video.loop=!0,t.video.setAttribute("playsinline",""),t.video.addEventListener("playing",(function(){t.map.triggerRepaint()})),t.map&&t.video.play(),t._finishLoading())}(0,o)};for(var s=0;s<e.length;s++){var l=a.document.createElement("source");n=e[s],i=void 0,(i=a.document.createElement("a")).href=n,(i.protocol!==a.document.location.protocol||i.host!==a.document.location.host)&&(o.crossOrigin="Anonymous"),l.src=e[s],o.appendChild(l)}}(this.urls)},e.prototype.pause=function(){this.video&&this.video.pause()},e.prototype.play=function(){this.video&&this.video.play()},e.prototype.seek=function(t){if(this.video){var e=this.video.seekable;t<e.start(0)||t>e.end(0)?this.fire(new jt(new Gt("sources."+this.id,null,"Playback for this video can be set only between the "+e.start(0)+" and "+e.end(0)+"-second mark."))):this.video.currentTime=t}},e.prototype.getVideo=function(){return this.video},e.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},e.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,e=t.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,gc.members)),this.boundsSegments||(this.boundsSegments=Ao.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE),e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,this.video)):(this.texture=new Mu(t,this.video,e.RGBA),this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE)),this.tiles){var n=this.tiles[r];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},e.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},e.prototype.hasTransition=function(){return this.video&&!this.video.paused},e}(vc),xc=function(t){function e(e,r,n,i){t.call(this,e,r,n,i),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some((function(t){return!Array.isArray(t)||2!==t.length||t.some((function(t){return"number"!=typeof t}))}))||this.fire(new jt(new Gt("sources."+e,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new jt(new Gt("sources."+e,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new jt(new Gt("sources."+e,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof a.HTMLCanvasElement||this.fire(new jt(new Gt("sources."+e,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new jt(new Gt("sources."+e,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.HTMLCanvasElement?this.options.canvas:a.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new jt(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},e.prototype.getCanvas=function(){return this.canvas},e.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},e.prototype.onRemove=function(){this.pause()},e.prototype.prepare=function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var e=this.map.painter.context,r=e.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,gc.members)),this.boundsSegments||(this.boundsSegments=Ao.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Mu(e,this.canvas,r.RGBA,{premultiply:!0}),this.tiles){var i=this.tiles[n];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},e.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},e.prototype.hasTransition=function(){return this._playing},e.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var r=e[t];if(isNaN(r)||r<=0)return!0}return!1},e}(vc),bc={vector:hc,raster:fc,"raster-dem":mc,geojson:yc,video:_c,image:vc,canvas:xc};function wc(t,e){var r=Aa([]);return Ma(r,r,[1,1,0]),La(r,r,[.5*t.width,.5*t.height,1]),Da(r,r,t.calculatePosMatrix(e.toUnwrapped()))}function Sc(t,e,r,n,i,o){var a=function(t,e,r){if(t)for(var n=0,i=t;n<i.length;n+=1){var o=e[i[n]];if(o&&o.source===r&&"fill-extrusion"===o.type)return!0}else for(var a in e){var s=e[a];if(s.source===r&&"fill-extrusion"===s.type)return!0}return!1}(i&&i.layers,e,t.id),s=o.maxPitchScaleFactor(),l=t.tilesIn(n,s,a);l.sort(kc);for(var u=[],c=0,p=l;c<p.length;c+=1){var h=p[c];u.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,r,t._state,h.queryGeometry,h.cameraQueryGeometry,h.scale,i,o,s,wc(t.transform,h.tileID))})}var f=function(t){for(var e={},r={},n=0,i=t;n<i.length;n+=1){var o=i[n],a=o.queryResults,s=o.wrappedTileID,l=r[s]=r[s]||{};for(var u in a)for(var c=a[u],p=l[u]=l[u]||{},h=e[u]=e[u]||[],f=0,d=c;f<d.length;f+=1){var m=d[f];p[m.featureIndex]||(p[m.featureIndex]=!0,h.push(m))}}return e}(u);for(var d in f)f[d].forEach((function(e){var r=e.feature,n=t.getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=n}));return f}function kc(t,e){var r=t.tileID,n=e.tileID;return r.overscaledZ-n.overscaledZ||r.canonical.y-n.canonical.y||r.wrap-n.wrap||r.canonical.x-n.canonical.x}var Tc=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var r=t[e];this._stringToNumber[r]=e,this._numberToString[e]=r}};Tc.prototype.encode=function(t){return this._stringToNumber[t]},Tc.prototype.decode=function(t){return this._numberToString[t]};var Ec=function(t,e,r,n,i){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=r,t._y=n,this.properties=t.properties,this.id=i},Ic={geometry:{configurable:!0}};Ic.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Ic.geometry.set=function(t){this._geometry=t},Ec.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(Ec.prototype,Ic);var zc=function(){this.state={},this.stateChanges={},this.deletedStates={}};zc.prototype.updateState=function(t,e,r){var n=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][n]=this.stateChanges[t][n]||{},m(this.stateChanges[t][n],r),null===this.deletedStates[t])for(var i in this.deletedStates[t]={},this.state[t])i!==n&&(this.deletedStates[t][i]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][n])for(var o in this.deletedStates[t][n]={},this.state[t][n])r[o]||(this.deletedStates[t][n][o]=null);else for(var a in r)this.deletedStates[t]&&this.deletedStates[t][n]&&null===this.deletedStates[t][n][a]&&delete this.deletedStates[t][n][a]},zc.prototype.removeFeatureState=function(t,e,r){if(null!==this.deletedStates[t]){var n=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},r&&void 0!==e)null!==this.deletedStates[t][n]&&(this.deletedStates[t][n]=this.deletedStates[t][n]||{},this.deletedStates[t][n][r]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][n])for(r in this.deletedStates[t][n]={},this.stateChanges[t][n])this.deletedStates[t][n][r]=null;else this.deletedStates[t][n]=null;else this.deletedStates[t]=null}},zc.prototype.getState=function(t,e){var r=String(e),n=m({},(this.state[t]||{})[r],(this.stateChanges[t]||{})[r]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var i=this.deletedStates[t][e];if(null===i)return{};for(var o in i)delete n[o]}return n},zc.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},zc.prototype.coalesceChanges=function(t,e){var r={};for(var n in this.stateChanges){this.state[n]=this.state[n]||{};var i={};for(var o in this.stateChanges[n])this.state[n][o]||(this.state[n][o]={}),m(this.state[n][o],this.stateChanges[n][o]),i[o]=this.state[n][o];r[n]=i}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a])for(var l in this.state[a])s[l]={},this.state[a][l]={};else for(var u in this.deletedStates[a]){if(null===this.deletedStates[a][u])this.state[a][u]={};else for(var c=0,p=Object.keys(this.deletedStates[a][u]);c<p.length;c+=1)delete this.state[a][u][p[c]];s[u]=this.state[a][u]}r[a]=r[a]||{},m(r[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(var h in t)t[h].setFeatureState(r,e)};var Cc=function(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Xn(8192,16,0),this.grid3D=new Xn(8192,16,0),this.featureIndexArray=new zo,this.promoteId=e};function Ac(t,e,r,n,i){return S(t,(function(t,o){var a=e instanceof Oi?e.get(o):null;return a&&a.evaluate?a.evaluate(r,n,i):a}))}function Pc(t){for(var e=1/0,r=1/0,n=-1/0,i=-1/0,o=0,a=t;o<a.length;o+=1){var s=a[o];e=Math.min(e,s.x),r=Math.min(r,s.y),n=Math.max(n,s.x),i=Math.max(i,s.y)}return{minX:e,minY:r,maxX:n,maxY:i}}function Dc(t,e){return e-t}Cc.prototype.insert=function(t,e,r,n,i,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,n,i);for(var s=o?this.grid3D:this.grid,l=0;l<e.length;l++){for(var u=e[l],c=[1/0,1/0,-1/0,-1/0],p=0;p<u.length;p++){var h=u[p];c[0]=Math.min(c[0],h.x),c[1]=Math.min(c[1],h.y),c[2]=Math.max(c[2],h.x),c[3]=Math.max(c[3],h.y)}c[0]<8192&&c[1]<8192&&c[2]>=0&&c[3]>=0&&s.insert(a,c[0],c[1],c[2],c[3])}},Cc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Qs.VectorTile(new Il(this.rawTileData)).layers,this.sourceLayerCoder=new Tc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Cc.prototype.query=function(t,e,r,n){var o=this;this.loadVTLayers();for(var a=t.params||{},s=8192/t.tileSize/t.scale,l=bn(a.filter),u=t.queryGeometry,c=t.queryPadding*s,p=Pc(u),h=this.grid.query(p.minX-c,p.minY-c,p.maxX+c,p.maxY+c),f=Pc(t.cameraQueryGeometry),d=this.grid3D.query(f.minX-c,f.minY-c,f.maxX+c,f.maxY+c,(function(e,r,n,o){return function(t,e,r,n,o){for(var a=0,s=t;a<s.length;a+=1){var l=s[a];if(e<=l.x&&r<=l.y&&n>=l.x&&o>=l.y)return!0}var u=[new i(e,r),new i(e,o),new i(n,o),new i(n,r)];if(t.length>2)for(var c=0,p=u;c<p.length;c+=1)if(ba(t,p[c]))return!0;for(var h=0;h<t.length-1;h++)if(wa(t[h],t[h+1],u))return!0;return!1}(t.cameraQueryGeometry,e-c,r-c,n+c,o+c)})),m=0,y=d;m<y.length;m+=1)h.push(y[m]);h.sort(Dc);for(var g,v={},_=function(i){var c=h[i];if(c!==g){g=c;var p=o.featureIndexArray.get(c),f=null;o.loadMatchingFeature(v,p.bucketIndex,p.sourceLayerIndex,p.featureIndex,l,a.layers,a.availableImages,e,r,n,(function(e,r,n){return f||(f=la(e)),r.queryIntersectsFeature(u,e,n,f,o.z,t.transform,s,t.pixelPosMatrix)}))}},x=0;x<h.length;x++)_(x);return v},Cc.prototype.loadMatchingFeature=function(t,e,r,n,i,o,a,s,l,u,c){var p=this.bucketLayerIDs[e];if(!o||function(t,e){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])>=0)return!0;return!1}(o,p)){var h=this.sourceLayerCoder.decode(r),f=this.vtLayers[h].feature(n);if(i.needGeometry){var d=ua(f,!0);if(!i.filter(new Ci(this.tileID.overscaledZ),d,this.tileID.canonical))return}else if(!i.filter(new Ci(this.tileID.overscaledZ),f))return;for(var y=this.getId(f,h),g=0;g<p.length;g++){var v=p[g];if(!(o&&o.indexOf(v)<0)){var _=s[v];if(_){var x={};void 0!==y&&u&&(x=u.getState(_.sourceLayer||"_geojsonTileLayer",y));var b=m({},l[v]);b.paint=Ac(b.paint,_.paint,f,x,a),b.layout=Ac(b.layout,_.layout,f,x,a);var w=!c||c(f,_,x);if(w){var S=new Ec(f,this.z,this.x,this.y,y);S.layer=b;var k=t[v];void 0===k&&(k=t[v]=[]),k.push({featureIndex:n,feature:S,intersectionZ:w})}}}}}},Cc.prototype.lookupSymbolFeatures=function(t,e,r,n,i,o,a,s){var l={};this.loadVTLayers();for(var u=bn(i),c=0,p=t;c<p.length;c+=1)this.loadMatchingFeature(l,r,n,p[c],u,o,a,s,e);return l},Cc.prototype.hasLayer=function(t){for(var e=0,r=this.bucketLayerIDs;e<r.length;e+=1)for(var n=0,i=r[e];n<i.length;n+=1)if(t===i[n])return!0;return!1},Cc.prototype.getId=function(t,e){var r=t.id;return this.promoteId&&"boolean"==typeof(r=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(r=Number(r)),r},Jn("FeatureIndex",Cc,{omit:["rawTileData","sourceLayerCoder"]});var Mc=function(t,e){this.tileID=t,this.uid=v(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Mc.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<V.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},Mc.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Mc.prototype.loadVectorData=function(t,e,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var n in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var r={};if(!e)return r;for(var n=function(){var t=o[i],n=t.layerIds.map((function(t){return e.getLayer(t)})).filter(Boolean);if(0!==n.length){t.layers=n,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map((function(t){return n.filter((function(e){return e.id===t}))[0]})));for(var a=0,s=n;a<s.length;a+=1)r[s[a].id]=t}},i=0,o=t;i<o.length;i+=1)n();return r}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[n];if(i instanceof yu){if(this.hasSymbolBuckets=!0,!r)break;i.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var a=this.buckets[o];if(a instanceof yu&&a.hasRTLText){this.hasRTLText=!0,zi.isLoading()||zi.isLoaded()||"deferred"!==Ei()||Ii();break}}for(var s in this.queryPadding=0,this.buckets){var l=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(s).queryRadius(l))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new xo},Mc.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Mc.prototype.getBucket=function(t){return this.buckets[t.id]},Mc.prototype.upload=function(t){for(var e in this.buckets){var r=this.buckets[e];r.uploadPending()&&r.upload(t)}var n=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Mu(t,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Mu(t,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null)},Mc.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},Mc.prototype.queryRenderedFeatures=function(t,e,r,n,i,o,a,s,l,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,cameraQueryGeometry:i,scale:o,tileSize:this.tileSize,pixelPosMatrix:u,transform:s,params:a,queryPadding:this.queryPadding*l},t,e,r):{}},Mc.prototype.querySourceFeatures=function(t,e){var r=this.latestFeatureIndex;if(r&&r.rawTileData){var n=r.loadVTLayers(),i=e?e.sourceLayer:"",o=n._geojsonTileLayer||n[i];if(o)for(var a=bn(e&&e.filter),s=this.tileID.canonical,l=s.z,u=s.x,c=s.y,p={z:l,x:u,y:c},h=0;h<o.length;h++){var f=o.feature(h);if(a.needGeometry){var d=ua(f,!0);if(!a.filter(new Ci(this.tileID.overscaledZ),d,this.tileID.canonical))continue}else if(!a.filter(new Ci(this.tileID.overscaledZ),f))continue;var m=r.getId(f,i),y=new Ec(f,l,u,c,m);y.tile=p,t.push(y)}}},Mc.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Mc.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Mc.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var r=P(t.cacheControl);r["max-age"]&&(this.expirationTime=Date.now()+1e3*r["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var n=Date.now(),i=!1;if(this.expirationTime>n)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{var o=this.expirationTime-e;o?this.expirationTime=n+Math.max(o,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Mc.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Mc.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var r=this.latestFeatureIndex.loadVTLayers();for(var n in this.buckets)if(e.style.hasLayer(n)){var i=this.buckets[n],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=r[o],s=t[o];if(a&&s&&0!==Object.keys(s).length){i.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});var l=e&&e.style&&e.style.getLayer(n);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(i)))}}}},Mc.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Mc.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<V.now()},Mc.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Mc.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=V.now()+t},Mc.prototype.setDependencies=function(t,e){for(var r={},n=0,i=e;n<i.length;n+=1)r[i[n]]=!0;this.dependencies[t]=r},Mc.prototype.hasDependency=function(t,e){for(var r=0,n=t;r<n.length;r+=1){var i=this.dependencies[n[r]];if(i)for(var o=0,a=e;o<a.length;o+=1)if(i[a[o]])return!0}return!1};var Lc=function(t,e){this.max=t,this.onRemove=e,this.reset()};Lc.prototype.reset=function(){for(var t in this.data)for(var e=0,r=this.data[t];e<r.length;e+=1){var n=r[e];n.timeout&&clearTimeout(n.timeout),this.onRemove(n.value)}return this.data={},this.order=[],this},Lc.prototype.add=function(t,e,r){var n=this,i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var o={value:e,timeout:void 0};if(void 0!==r&&(o.timeout=setTimeout((function(){n.remove(t,o)}),r)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},Lc.prototype.has=function(t){return t.wrapped().key in this.data},Lc.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},Lc.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},Lc.prototype.getByKey=function(t){var e=this.data[t];return e?e[0].value:null},Lc.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},Lc.prototype.remove=function(t,e){if(!this.has(t))return this;var r=t.wrapped().key,n=void 0===e?0:this.data[r].indexOf(e),i=this.data[r][n];return this.data[r].splice(n,1),i.timeout&&clearTimeout(i.timeout),0===this.data[r].length&&delete this.data[r],this.onRemove(i.value),this.order.splice(this.order.indexOf(r),1),this},Lc.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this},Lc.prototype.filter=function(t){var e=[];for(var r in this.data)for(var n=0,i=this.data[r];n<i.length;n+=1){var o=i[n];t(o.value)||e.push(o)}for(var a=0,s=e;a<s.length;a+=1){var l=s[a];this.remove(l.value.tileID,l)}};var Rc=function(t,e,r){this.context=t;var n=t.gl;this.buffer=n.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};Rc.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Rc.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},Rc.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Bc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Oc=function(t,e,r,n){this.length=e.length,this.attributes=r,this.itemSize=e.bytesPerElement,this.dynamicDraw=n,this.context=t;var i=t.gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};Oc.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Oc.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},Oc.prototype.enableAttributes=function(t,e){for(var r=0;r<this.attributes.length;r++){var n=e.attributes[this.attributes[r].name];void 0!==n&&t.enableVertexAttribArray(n)}},Oc.prototype.setVertexAttribPointers=function(t,e,r){for(var n=0;n<this.attributes.length;n++){var i=this.attributes[n],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[Bc[i.type]],!1,this.itemSize,i.offset+this.itemSize*(r||0))}},Oc.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Fc=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Fc.prototype.get=function(){return this.current},Fc.prototype.set=function(t){},Fc.prototype.getDefault=function(){return this.default},Fc.prototype.setDefault=function(){this.set(this.default)};var Nc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return me.transparent},e.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},e}(Fc),Vc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(Fc),Uc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(Fc),jc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(Fc),qc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(Fc),Zc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(Fc),Gc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(Fc),Wc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(Fc),Hc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(Fc),Xc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(Fc),Kc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(Fc),Yc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(Fc),Qc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(Fc),$c=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(Fc),Jc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return me.transparent},e.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},e}(Fc),tp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(Fc),ep=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(Fc),rp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(Fc),np=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(Fc),ip=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(Fc),op=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(Fc),ap=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(Fc),sp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(Fc),lp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(Fc),up=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(Fc),cp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(Fc),pp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(Fc),hp=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(Fc),fp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(Fc),dp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(Fc),mp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(Fc),yp=function(t){function e(e,r){t.call(this,e),this.context=e,this.parent=r}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e}(Fc),gp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(yp),vp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(yp),_p=function(t,e,r,n){this.context=t,this.width=e,this.height=r;var i=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new gp(t,i),n&&(this.depthAttachment=new vp(t,i))};_p.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){var r=this.depthAttachment.get();r&&t.deleteRenderbuffer(r)}t.deleteFramebuffer(this.framebuffer)};var xp=function(t,e,r){this.func=t,this.mask=e,this.range=r};xp.ReadOnly=!1,xp.ReadWrite=!0,xp.disabled=new xp(519,xp.ReadOnly,[0,1]);var bp=function(t,e,r,n,i,o){this.test=t,this.ref=e,this.mask=r,this.fail=n,this.depthFail=i,this.pass=o};bp.disabled=new bp({func:519,mask:0},0,0,7680,7680,7680);var wp=function(t,e,r){this.blendFunction=t,this.blendColor=e,this.mask=r};wp.disabled=new wp(wp.Replace=[1,0],me.transparent,[!1,!1,!1,!1]),wp.unblended=new wp(wp.Replace,me.transparent,[!0,!0,!0,!0]),wp.alphaBlended=new wp([1,771],me.transparent,[!0,!0,!0,!0]);var Sp=function(t,e,r){this.enable=t,this.mode=e,this.frontFace=r};Sp.disabled=new Sp(!1,1029,2305),Sp.backCCW=new Sp(!0,1029,2305);var kp=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Nc(this),this.clearDepth=new Vc(this),this.clearStencil=new Uc(this),this.colorMask=new jc(this),this.depthMask=new qc(this),this.stencilMask=new Zc(this),this.stencilFunc=new Gc(this),this.stencilOp=new Wc(this),this.stencilTest=new Hc(this),this.depthRange=new Xc(this),this.depthTest=new Kc(this),this.depthFunc=new Yc(this),this.blend=new Qc(this),this.blendFunc=new $c(this),this.blendColor=new Jc(this),this.blendEquation=new tp(this),this.cullFace=new ep(this),this.cullFaceSide=new rp(this),this.frontFace=new np(this),this.program=new ip(this),this.activeTexture=new op(this),this.viewport=new ap(this),this.bindFramebuffer=new sp(this),this.bindRenderbuffer=new lp(this),this.bindTexture=new up(this),this.bindVertexBuffer=new cp(this),this.bindElementBuffer=new pp(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new hp(this),this.pixelStoreUnpack=new fp(this),this.pixelStoreUnpackPremultiplyAlpha=new dp(this),this.pixelStoreUnpackFlipY=new mp(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)};kp.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},kp.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},kp.prototype.createIndexBuffer=function(t,e){return new Rc(this,t,e)},kp.prototype.createVertexBuffer=function(t,e,r){return new Oc(this,t,e,r)},kp.prototype.createRenderbuffer=function(t,e,r){var n=this.gl,i=n.createRenderbuffer();return this.bindRenderbuffer.set(i),n.renderbufferStorage(n.RENDERBUFFER,t,e,r),this.bindRenderbuffer.set(null),i},kp.prototype.createFramebuffer=function(t,e,r){return new _p(this,t,e,r)},kp.prototype.clear=function(t){var e=t.color,r=t.depth,n=this.gl,i=0;e&&(i|=n.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==r&&(i|=n.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(r),this.depthMask.set(!0)),n.clear(i)},kp.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},kp.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},kp.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},kp.prototype.setColorMode=function(t){s(t.blendFunction,wp.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)},kp.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Tp=function(t){function e(e,r,n){var i=this;t.call(this),this.id=e,this.dispatcher=n,this.on("data",(function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(i._sourceLoaded=!0),i._sourceLoaded&&!i._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(i.reload(),i.transform&&i.update(i.transform))})),this.on("error",(function(){i._sourceErrored=!0})),this._source=function(t,e,r,n){var i=new bc[e.type](t,e,r,n);if(i.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+i.id);return b(["load","abort","unload","serialize","prepare"],i),i}(e,r,n,this),this._tiles={},this._cache=new Lc(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new zc}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},e.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},e.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},e.prototype.getSource=function(){return this._source},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},e.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},e.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,(function(){}))},e.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,(function(){}))},e.prototype.serialize=function(){return this._source.serialize()},e.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var r=this._tiles[e];r.upload(t),r.prepare(this.map.style.imageManager)}},e.prototype.getIds=function(){return d(this._tiles).map((function(t){return t.tileID})).sort(Ep).map((function(t){return t.key}))},e.prototype.getRenderableIds=function(t){var e=this,r=[];for(var n in this._tiles)this._isIdRenderable(n,t)&&r.push(this._tiles[n]);return t?r.sort((function(t,r){var n=t.tileID,o=r.tileID,a=new i(n.canonical.x,n.canonical.y)._rotate(e.transform.angle),s=new i(o.canonical.x,o.canonical.y)._rotate(e.transform.angle);return n.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x})).map((function(t){return t.tileID.key})):r.map((function(t){return t.tileID})).sort(Ep).map((function(t){return t.key}))},e.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},e.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},e.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},e.prototype._reloadTile=function(t,e){var r=this._tiles[t];r&&("loading"!==r.state&&(r.state=e),this._loadTile(r,this._tileLoaded.bind(this,r,t,e)))},e.prototype._tileLoaded=function(t,e,r,n){if(n)return t.state="errored",void(404!==n.status?this._source.fire(new jt(n,{tile:t})):this.update(this.transform));t.timeAdded=V.now(),"expired"===r&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new Ut("data",{dataType:"source",tile:t,coord:t.tileID}))},e.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),r=0;r<e.length;r++){var n=e[r];if(t.neighboringTiles&&t.neighboringTiles[n]){var i=this.getTileByID(n);o(t,i),o(i,t)}}function o(t,e){t.needsHillshadePrepare=!0;var r=e.tileID.canonical.x-t.tileID.canonical.x,n=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===r&&0===n||Math.abs(n)>1||(Math.abs(r)>1&&(1===Math.abs(r+i)?r+=i:1===Math.abs(r-i)&&(r-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,r,n),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}},e.prototype.getTile=function(t){return this.getTileByID(t.key)},e.prototype.getTileByID=function(t){return this._tiles[t]},e.prototype._retainLoadedChildren=function(t,e,r,n){for(var i in this._tiles){var o=this._tiles[i];if(!(n[i]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>r)){for(var a=o.tileID;o&&o.tileID.overscaledZ>e+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var l=a;l.overscaledZ>e;)if(t[(l=l.scaledTo(l.overscaledZ-1)).key]){n[a.key]=a;break}}}},e.prototype.findLoadedParent=function(t,e){if(t.key in this._loadedParentTiles){var r=this._loadedParentTiles[t.key];return r&&r.tileID.overscaledZ>=e?r:null}for(var n=t.overscaledZ-1;n>=e;n--){var i=t.scaledTo(n),o=this._getLoadedTile(i);if(o)return o}},e.prototype._getLoadedTile=function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)},e.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,r=Math.ceil(t.height/this._source.tileSize)+1,n=Math.floor(e*r*5),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(i)},e.prototype.handleWrapJump=function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var r={};for(var n in this._tiles){var i=this._tiles[n];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),r[i.tileID.key]=i}for(var o in this._tiles=r,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var a in this._tiles)this._setTileReloadTimer(a,this._tiles[a])}},e.prototype.update=function(t){var r=this;if(this.transform=t,this._sourceLoaded&&!this._paused){var n;this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?n=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(t){return new lc(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)})):(n=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(n=n.filter((function(t){return r._source.hasTile(t)})))):n=[];var i=t.coveringZoomLevel(this._source),o=Math.max(i-e.maxOverzooming,this._source.minzoom),a=Math.max(i+e.maxUnderzooming,this._source.minzoom),s=this._updateRetainedTiles(n,i);if(Ip(this._source.type)){for(var l={},u={},c=0,p=Object.keys(s);c<p.length;c+=1){var h=p[c],f=s[h],d=this._tiles[h];if(d&&!(d.fadeEndTime&&d.fadeEndTime<=V.now())){var m=this.findLoadedParent(f,o);m&&(this._addTile(m.tileID),l[m.tileID.key]=m.tileID),u[h]=f}}for(var y in this._retainLoadedChildren(u,i,a,s),l)s[y]||(this._coveredTiles[y]=!0,s[y]=l[y])}for(var g in s)this._tiles[g].clearFadeHold();for(var v=0,_=function(t,e){var r=[];for(var n in t)n in e||r.push(n);return r}(this._tiles,s);v<_.length;v+=1){var x=_[v],b=this._tiles[x];b.hasSymbolBuckets&&!b.holdingForFade()?b.setHoldDuration(this.map._fadeDuration):b.hasSymbolBuckets&&!b.symbolFadeFinished()||this._removeTile(x)}this._updateLoadedParentTileCache()}},e.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},e.prototype._updateRetainedTiles=function(t,r){for(var n={},i={},o=Math.max(r-e.maxOverzooming,this._source.minzoom),a=Math.max(r+e.maxUnderzooming,this._source.minzoom),s={},l=0,u=t;l<u.length;l+=1){var c=u[l],p=this._addTile(c);n[c.key]=c,p.hasData()||r<this._source.maxzoom&&(s[c.key]=c)}this._retainLoadedChildren(s,r,a,n);for(var h=0,f=t;h<f.length;h+=1){var d=f[h],m=this._tiles[d.key];if(!m.hasData()){if(r+1>this._source.maxzoom){var y=d.children(this._source.maxzoom)[0],g=this.getTile(y);if(g&&g.hasData()){n[y.key]=y;continue}}else{var v=d.children(this._source.maxzoom);if(n[v[0].key]&&n[v[1].key]&&n[v[2].key]&&n[v[3].key])continue}for(var _=m.wasRequested(),x=d.overscaledZ-1;x>=o;--x){var b=d.scaledTo(x);if(i[b.key])break;if(i[b.key]=!0,!(m=this.getTile(b))&&_&&(m=this._addTile(b)),m&&(n[b.key]=b,_=m.wasRequested(),m.hasData()))break}}}return n},e.prototype._updateLoadedParentTileCache=function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],r=void 0,n=this._tiles[t].tileID;n.overscaledZ>0;){if(n.key in this._loadedParentTiles){r=this._loadedParentTiles[n.key];break}e.push(n.key);var i=n.scaledTo(n.overscaledZ-1);if(r=this._getLoadedTile(i))break;n=i}for(var o=0,a=e;o<a.length;o+=1)this._loadedParentTiles[a[o]]=r}},e.prototype._addTile=function(t){var e=this._tiles[t.key];if(e)return e;(e=this._cache.getAndRemove(t))&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));var r=Boolean(e);return r||(e=new Mc(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))),e?(e.uses++,this._tiles[t.key]=e,r||this._source.fire(new Ut("dataloading",{tile:e,coord:e.tileID,dataType:"source"})),e):null},e.prototype._setTileReloadTimer=function(t,e){var r=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var n=e.getExpiryTimeout();n&&(this._timers[t]=setTimeout((function(){r._reloadTile(t,"expired"),delete r._timers[t]}),n))},e.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},e.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},e.prototype.tilesIn=function(t,e,r){var n=this,i=[],o=this.transform;if(!o)return i;for(var a=r?o.getCameraQueryGeometry(t):t,s=t.map((function(t){return o.pointCoordinate(t)})),l=a.map((function(t){return o.pointCoordinate(t)})),u=this.getIds(),c=1/0,p=1/0,h=-1/0,f=-1/0,d=0,m=l;d<m.length;d+=1){var y=m[d];c=Math.min(c,y.x),p=Math.min(p,y.y),h=Math.max(h,y.x),f=Math.max(f,y.y)}for(var g=function(t){var r=n._tiles[u[t]];if(!r.holdingForFade()){var a=r.tileID,d=Math.pow(2,o.zoom-r.tileID.overscaledZ),m=e*r.queryPadding*8192/r.tileSize/d,y=[a.getTilePoint(new oc(c,p)),a.getTilePoint(new oc(h,f))];if(y[0].x-m<8192&&y[0].y-m<8192&&y[1].x+m>=0&&y[1].y+m>=0){var g=s.map((function(t){return a.getTilePoint(t)})),v=l.map((function(t){return a.getTilePoint(t)}));i.push({tile:r,tileID:a,queryGeometry:g,cameraQueryGeometry:v,scale:d})}}},v=0;v<u.length;v++)g(v);return i},e.prototype.getVisibleCoordinates=function(t){for(var e=this,r=this.getRenderableIds(t).map((function(t){return e._tiles[t].tileID})),n=0,i=r;n<i.length;n+=1){var o=i[n];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return r},e.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ip(this._source.type))for(var t in this._tiles){var e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=V.now())return!0}return!1},e.prototype.setFeatureState=function(t,e,r){this._state.updateState(t=t||"_geojsonTileLayer",e,r)},e.prototype.removeFeatureState=function(t,e,r){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,r)},e.prototype.getFeatureState=function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)},e.prototype.setDependencies=function(t,e,r){var n=this._tiles[t];n&&n.setDependencies(e,r)},e.prototype.reloadTilesForDependencies=function(t,e){for(var r in this._tiles)this._tiles[r].hasDependency(t,e)&&this._reloadTile(r,"reloading");this._cache.filter((function(r){return!r.hasDependency(t,e)}))},e}(qt);function Ep(t,e){var r=Math.abs(2*t.wrap)-+(t.wrap<0),n=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||n-r||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function Ip(t){return"raster"===t||"image"===t||"video"===t}function zp(){return new a.Worker(Zm.workerUrl)}Tp.maxOverzooming=10,Tp.maxUnderzooming=3;var Cp="mapboxgl_preloaded_worker_pool",Ap=function(){this.active={}};Ap.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<Ap.workerCount;)this.workers.push(new zp);return this.active[t]=!0,this.workers.slice()},Ap.prototype.release=function(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((function(t){t.terminate()})),this.workers=null)},Ap.prototype.isPreloaded=function(){return!!this.active[Cp]},Ap.prototype.numActive=function(){return Object.keys(this.active).length};var Pp,Dp=Math.floor(V.hardwareConcurrency/2);function Mp(){return Pp||(Pp=new Ap),Pp}Ap.workerCount=Math.max(Math.min(Dp,6),1);var Lp=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Rp(t,e){var r={};for(var n in t)"ref"!==n&&(r[n]=t[n]);return Lp.forEach((function(t){t in e&&(r[t]=e[t])})),r}function Bp(t){t=t.slice();for(var e=Object.create(null),r=0;r<t.length;r++)e[t[r].id]=t[r];for(var n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=Rp(t[n],e[t[n].ref]));return t}var Op={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Fp(t,e,r){r.push({command:Op.addSource,args:[t,e[t]]})}function Np(t,e,r){e.push({command:Op.removeSource,args:[t]}),r[t]=!0}function Vp(t,e,r,n){Np(t,r,n),Fp(t,e,r)}function Up(t,e,r){var n;for(n in t[r])if(t[r].hasOwnProperty(n)&&"data"!==n&&!s(t[r][n],e[r][n]))return!1;for(n in e[r])if(e[r].hasOwnProperty(n)&&"data"!==n&&!s(t[r][n],e[r][n]))return!1;return!0}function jp(t,e,r,n,i,o){var a;for(a in e=e||{},t=t||{})t.hasOwnProperty(a)&&(s(t[a],e[a])||r.push({command:o,args:[n,a,e[a],i]}));for(a in e)e.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(s(t[a],e[a])||r.push({command:o,args:[n,a,e[a],i]}))}function qp(t){return t.id}function Zp(t,e){return t[e.id]=e,t}var Gp=function(t,e){this.reset(t,e)};Gp.prototype.reset=function(t,e){this.points=t||[],this._distances=[0];for(var r=1;r<this.points.length;r++)this._distances[r]=this._distances[r-1]+this.points[r].dist(this.points[r-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Gp.prototype.lerp=function(t){if(1===this.points.length)return this.points[0];t=p(t,0,1);for(var e=1,r=this._distances[e],n=t*this.paddedLength+this.padding;r<n&&e<this._distances.length;)r=this._distances[++e];var i=e-1,o=this._distances[i],a=r-o,s=a>0?(n-o)/a:0;return this.points[i].mult(1-s).add(this.points[e].mult(s))};var Wp=function(t,e,r){var n=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/r),this.yCellCount=Math.ceil(e/r);for(var o=0;o<this.xCellCount*this.yCellCount;o++)n.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};function Hp(t,e,r,n,i){var o=Ca();return e?(La(o,o,[1/i,1/i,1]),r||Ra(o,o,n.angle)):Da(o,n.labelPlaneMatrix,t),o}function Xp(t,e,r,n,i){if(e){var o=function(t){var e=new za(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}(t);return La(o,o,[i,i,1]),r||Ra(o,o,-n.angle),o}return n.glCoordMatrix}function Kp(t,e){var r=[t.x,t.y,0,1];ah(r,r,e);var n=r[3];return{point:new i(r[0]/n,r[1]/n),signedDistanceFromCamera:n}}function Yp(t,e){return.5+t/e*.5}function Qp(t,e){var r=t[0]/t[3],n=t[1]/t[3];return r>=-e[0]&&r<=e[0]&&n>=-e[1]&&n<=e[1]}function $p(t,e,r,n,o,a,s,l){var u=n?t.textSizeData:t.iconSizeData,c=ou(u,r.transform.zoom),p=[256/r.width*2+1,256/r.height*2+1],h=n?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;h.clear();for(var f=t.lineVertexArray,d=n?t.text.placedSymbolArray:t.icon.placedSymbolArray,m=r.transform.width/r.transform.height,y=!1,g=0;g<d.length;g++){var v=d.get(g);if(v.hidden||v.writingMode===$l.vertical&&!y)oh(v.numGlyphs,h);else{y=!1;var _=[v.anchorX,v.anchorY,0,1];if(Ua(_,_,e),Qp(_,p)){var x=Yp(r.transform.cameraToCenterDistance,_[3]),b=iu(u,c,v),w=s?b/x:b*x,S=new i(v.anchorX,v.anchorY),k=Kp(S,o).point,T={},E=eh(v,w,!1,l,e,o,a,t.glyphOffsetArray,f,h,k,S,T,m);y=E.useVertical,(E.notEnoughRoom||y||E.needsFlipping&&eh(v,w,!0,l,e,o,a,t.glyphOffsetArray,f,h,k,S,T,m).notEnoughRoom)&&oh(v.numGlyphs,h)}else oh(v.numGlyphs,h)}}n?t.text.dynamicLayoutVertexBuffer.updateData(h):t.icon.dynamicLayoutVertexBuffer.updateData(h)}function Jp(t,e,r,n,i,o,a,s,l,u,c){var p=s.glyphStartIndex+s.numGlyphs,h=s.lineStartIndex,f=s.lineStartIndex+s.lineLength,d=e.getoffsetX(s.glyphStartIndex),m=e.getoffsetX(p-1),y=nh(t*d,r,n,i,o,a,s.segment,h,f,l,u,c);if(!y)return null;var g=nh(t*m,r,n,i,o,a,s.segment,h,f,l,u,c);return g?{first:y,last:g}:null}function th(t,e,r,n){return t===$l.horizontal&&Math.abs(r.y-e.y)>Math.abs(r.x-e.x)*n?{useVertical:!0}:(t===$l.vertical?e.y<r.y:e.x>r.x)?{needsFlipping:!0}:null}function eh(t,e,r,n,o,a,s,l,u,c,p,h,f,d){var m,y=e/24,g=t.lineOffsetX*y,v=t.lineOffsetY*y;if(t.numGlyphs>1){var _=t.glyphStartIndex+t.numGlyphs,x=t.lineStartIndex,b=t.lineStartIndex+t.lineLength,w=Jp(y,l,g,v,r,p,h,t,u,a,f);if(!w)return{notEnoughRoom:!0};var S=Kp(w.first.point,s).point,k=Kp(w.last.point,s).point;if(n&&!r){var T=th(t.writingMode,S,k,d);if(T)return T}m=[w.first];for(var E=t.glyphStartIndex+1;E<_-1;E++)m.push(nh(y*l.getoffsetX(E),g,v,r,p,h,t.segment,x,b,u,a,f));m.push(w.last)}else{if(n&&!r){var I=Kp(h,o).point,z=t.lineStartIndex+t.segment+1,C=new i(u.getx(z),u.gety(z)),A=Kp(C,o),P=A.signedDistanceFromCamera>0?A.point:rh(h,C,I,1,o),D=th(t.writingMode,I,P,d);if(D)return D}var M=nh(y*l.getoffsetX(t.glyphStartIndex),g,v,r,p,h,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,u,a,f);if(!M)return{notEnoughRoom:!0};m=[M]}for(var L=0,R=m;L<R.length;L+=1){var B=R[L];hu(c,B.point,B.angle)}return{}}function rh(t,e,r,n,i){var o=Kp(t.add(t.sub(e)._unit()),i).point,a=r.sub(o);return r.add(a._mult(n/a.mag()))}function nh(t,e,r,n,o,a,s,l,u,c,p,h){var f=n?t-e:t+e,d=f>0?1:-1,m=0;n&&(d*=-1,m=Math.PI),d<0&&(m+=Math.PI);for(var y=d>0?l+s:l+s+1,g=o,v=o,_=0,x=0,b=Math.abs(f),w=[];_+x<=b;){if((y+=d)<l||y>=u)return null;if(v=g,w.push(g),void 0===(g=h[y])){var S=new i(c.getx(y),c.gety(y)),k=Kp(S,p);if(k.signedDistanceFromCamera>0)g=h[y]=k.point;else{var T=y-d;g=rh(0===_?a:new i(c.getx(T),c.gety(T)),S,v,b-_+1,p)}}_+=x,x=v.dist(g)}var E=(b-_)/x,I=g.sub(v),z=I.mult(E)._add(v);z._add(I._unit()._perp()._mult(r*d));var C=m+Math.atan2(g.y-v.y,g.x-v.x);return w.push(z),{point:z,angle:C,path:w}}Wp.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Wp.prototype.insert=function(t,e,r,n,i){this._forEachCell(e,r,n,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)},Wp.prototype.insertCircle=function(t,e,r,n){this._forEachCell(e-n,r-n,e+n,r+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(r),this.circles.push(n)},Wp.prototype._insertBoxCell=function(t,e,r,n,i,o){this.boxCells[i].push(o)},Wp.prototype._insertCircleCell=function(t,e,r,n,i,o){this.circleCells[i].push(o)},Wp.prototype._query=function(t,e,r,n,i,o){if(r<0||t>this.width||n<0||e>this.height)return!i&&[];var a=[];if(t<=0&&e<=0&&this.width<=r&&this.height<=n){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],p=this.circles[3*l+2];a.push({key:this.circleKeys[l],x1:u-p,y1:c-p,x2:u+p,y2:c+p})}return o?a.filter(o):a}return this._forEachCell(t,e,r,n,this._queryCell,a,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?a.length>0:a},Wp.prototype._queryCircle=function(t,e,r,n,i){var o=t-r,a=t+r,s=e-r,l=e+r;if(a<0||o>this.width||l<0||s>this.height)return!n&&[];var u=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,u,{hitTest:n,circle:{x:t,y:e,radius:r},seenUids:{box:{},circle:{}}},i),n?u.length>0:u},Wp.prototype.query=function(t,e,r,n,i){return this._query(t,e,r,n,!1,i)},Wp.prototype.hitTest=function(t,e,r,n,i){return this._query(t,e,r,n,!0,i)},Wp.prototype.hitTestCircle=function(t,e,r,n){return this._queryCircle(t,e,r,!0,n)},Wp.prototype._queryCell=function(t,e,r,n,i,o,a,s){var l=a.seenUids,u=this.boxCells[i];if(null!==u)for(var c=this.bboxes,p=0,h=u;p<h.length;p+=1){var f=h[p];if(!l.box[f]){l.box[f]=!0;var d=4*f;if(t<=c[d+2]&&e<=c[d+3]&&r>=c[d+0]&&n>=c[d+1]&&(!s||s(this.boxKeys[f]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[f],x1:c[d],y1:c[d+1],x2:c[d+2],y2:c[d+3]})}}}var m=this.circleCells[i];if(null!==m)for(var y=this.circles,g=0,v=m;g<v.length;g+=1){var _=v[g];if(!l.circle[_]){l.circle[_]=!0;var x=3*_;if(this._circleAndRectCollide(y[x],y[x+1],y[x+2],t,e,r,n)&&(!s||s(this.circleKeys[_]))){if(a.hitTest)return o.push(!0),!0;var b=y[x],w=y[x+1],S=y[x+2];o.push({key:this.circleKeys[_],x1:b-S,y1:w-S,x2:b+S,y2:w+S})}}}},Wp.prototype._queryCellCircle=function(t,e,r,n,i,o,a,s){var l=a.circle,u=a.seenUids,c=this.boxCells[i];if(null!==c)for(var p=this.bboxes,h=0,f=c;h<f.length;h+=1){var d=f[h];if(!u.box[d]){u.box[d]=!0;var m=4*d;if(this._circleAndRectCollide(l.x,l.y,l.radius,p[m+0],p[m+1],p[m+2],p[m+3])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}var y=this.circleCells[i];if(null!==y)for(var g=this.circles,v=0,_=y;v<_.length;v+=1){var x=_[v];if(!u.circle[x]){u.circle[x]=!0;var b=3*x;if(this._circlesCollide(g[b],g[b+1],g[b+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[x])))return o.push(!0),!0}}},Wp.prototype._forEachCell=function(t,e,r,n,i,o,a,s){for(var l=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),c=this._convertToXCellCoord(r),p=this._convertToYCellCoord(n),h=l;h<=c;h++)for(var f=u;f<=p;f++)if(i.call(this,t,e,r,n,this.xCellCount*f+h,o,a,s))return},Wp.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Wp.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Wp.prototype._circlesCollide=function(t,e,r,n,i,o){var a=n-t,s=i-e,l=r+o;return l*l>a*a+s*s},Wp.prototype._circleAndRectCollide=function(t,e,r,n,i,o,a){var s=(o-n)/2,l=Math.abs(t-(n+s));if(l>s+r)return!1;var u=(a-i)/2,c=Math.abs(e-(i+u));if(c>u+r)return!1;if(l<=s||c<=u)return!0;var p=l-s,h=c-u;return p*p+h*h<=r*r};var ih=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function oh(t,e){for(var r=0;r<t;r++){var n=e.length;e.resize(n+4),e.float32.set(ih,3*n)}}function ah(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t[3]=r[3]*n+r[7]*i+r[15],t}var sh=function(t,e,r){void 0===e&&(e=new Wp(t.width+200,t.height+200,25)),void 0===r&&(r=new Wp(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=r,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function lh(t,e,r){return e*(8192/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}sh.prototype.placeCollisionBox=function(t,e,r,n,i){var o=this.projectAndGetPerspectiveRatio(n,t.anchorPointX,t.anchorPointY),a=r*o.perspectiveRatio,s=t.x1*a+o.point.x,l=t.y1*a+o.point.y,u=t.x2*a+o.point.x,c=t.y2*a+o.point.y;return!this.isInsideGrid(s,l,u,c)||!e&&this.grid.hitTest(s,l,u,c,i)?{box:[],offscreen:!1}:{box:[s,l,u,c],offscreen:this.isOffscreen(s,l,u,c)}},sh.prototype.placeCollisionCircles=function(t,e,r,n,o,a,s,l,u,c,p,h,f){var d=[],m=new i(e.anchorX,e.anchorY),y=Kp(m,a),g=Yp(this.transform.cameraToCenterDistance,y.signedDistanceFromCamera),v=(c?o/g:o*g)/24,_=Kp(m,s).point,x=Jp(v,n,e.lineOffsetX*v,e.lineOffsetY*v,!1,_,m,e,r,s,{}),b=!1,w=!1,S=!0;if(x){for(var k=.5*h*g+f,T=new i(-100,-100),E=new i(this.screenRightBoundary,this.screenBottomBoundary),I=new Gp,z=x.first,C=x.last,A=[],P=z.path.length-1;P>=1;P--)A.push(z.path[P]);for(var D=1;D<C.path.length;D++)A.push(C.path[D]);var M=2.5*k;if(l){var L=A.map((function(t){return Kp(t,l)}));A=L.some((function(t){return t.signedDistanceFromCamera<=0}))?[]:L.map((function(t){return t.point}))}var R=[];if(A.length>0){for(var B=A[0].clone(),O=A[0].clone(),F=1;F<A.length;F++)B.x=Math.min(B.x,A[F].x),B.y=Math.min(B.y,A[F].y),O.x=Math.max(O.x,A[F].x),O.y=Math.max(O.y,A[F].y);R=B.x>=T.x&&O.x<=E.x&&B.y>=T.y&&O.y<=E.y?[A]:O.x<T.x||B.x>E.x||O.y<T.y||B.y>E.y?[]:function(t,e,r,n,o){for(var a=[],s=0;s<t.length;s++)for(var l=t[s],u=void 0,c=0;c<l.length-1;c++){var p=l[c],h=l[c+1];p.x<e&&h.x<e||(p.x<e?p=new i(e,p.y+(e-p.x)/(h.x-p.x)*(h.y-p.y))._round():h.x<e&&(h=new i(e,p.y+(e-p.x)/(h.x-p.x)*(h.y-p.y))._round()),p.y<r&&h.y<r||(p.y<r?p=new i(p.x+(r-p.y)/(h.y-p.y)*(h.x-p.x),r)._round():h.y<r&&(h=new i(p.x+(r-p.y)/(h.y-p.y)*(h.x-p.x),r)._round()),p.x>=n&&h.x>=n||(p.x>=n?p=new i(n,p.y+(n-p.x)/(h.x-p.x)*(h.y-p.y))._round():h.x>=n&&(h=new i(n,p.y+(n-p.x)/(h.x-p.x)*(h.y-p.y))._round()),p.y>=o&&h.y>=o||(p.y>=o?p=new i(p.x+(o-p.y)/(h.y-p.y)*(h.x-p.x),o)._round():h.y>=o&&(h=new i(p.x+(o-p.y)/(h.y-p.y)*(h.x-p.x),o)._round()),u&&p.equals(u[u.length-1])||a.push(u=[p]),u.push(h)))))}return a}([A],T.x,T.y,E.x,E.y)}for(var N=0,V=R;N<V.length;N+=1){var U;I.reset(V[N],.25*k),U=I.length<=.5*k?1:Math.ceil(I.paddedLength/M)+1;for(var j=0;j<U;j++){var q=j/Math.max(U-1,1),Z=I.lerp(q),G=Z.x+100,W=Z.y+100;d.push(G,W,k,0);var H=G-k,X=W-k,K=G+k,Y=W+k;if(S=S&&this.isOffscreen(H,X,K,Y),w=w||this.isInsideGrid(H,X,K,Y),!t&&this.grid.hitTestCircle(G,W,k,p)&&(b=!0,!u))return{circles:[],offscreen:!1,collisionDetected:b}}}}return{circles:!u&&b||!w?[]:d,offscreen:S,collisionDetected:b}},sh.prototype.queryRenderedSymbols=function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var e=[],r=1/0,n=1/0,o=-1/0,a=-1/0,s=0,l=t;s<l.length;s+=1){var u=l[s],c=new i(u.x+100,u.y+100);r=Math.min(r,c.x),n=Math.min(n,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y),e.push(c)}for(var p={},h={},f=0,d=this.grid.query(r,n,o,a).concat(this.ignoredGrid.query(r,n,o,a));f<d.length;f+=1){var m=d[f],y=m.key;void 0===p[y.bucketInstanceId]&&(p[y.bucketInstanceId]={}),p[y.bucketInstanceId][y.featureIndex]||ha(e,[new i(m.x1,m.y1),new i(m.x2,m.y1),new i(m.x2,m.y2),new i(m.x1,m.y2)])&&(p[y.bucketInstanceId][y.featureIndex]=!0,void 0===h[y.bucketInstanceId]&&(h[y.bucketInstanceId]=[]),h[y.bucketInstanceId].push(y.featureIndex))}return h},sh.prototype.insertCollisionBox=function(t,e,r,n,i){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:r,featureIndex:n,collisionGroupID:i},t[0],t[1],t[2],t[3])},sh.prototype.insertCollisionCircles=function(t,e,r,n,i){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:r,featureIndex:n,collisionGroupID:i},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},sh.prototype.projectAndGetPerspectiveRatio=function(t,e,r){var n=[e,r,0,1];return ah(n,n,t),{point:new i((n[0]/n[3]+1)/2*this.transform.width+100,(-n[1]/n[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/n[3]*.5}},sh.prototype.isOffscreen=function(t,e,r,n){return r<100||t>=this.screenRightBoundary||n<100||e>this.screenBottomBoundary},sh.prototype.isInsideGrid=function(t,e,r,n){return r>=0&&t<this.gridRightBoundary&&n>=0&&e<this.gridBottomBoundary},sh.prototype.getViewportMatrix=function(){var t=Aa([]);return Ma(t,t,[-100,-100,0]),t};var uh=function(t,e,r,n){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):n&&r?1:0,this.placed=r};uh.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var ch=function(t,e,r,n,i){this.text=new uh(t?t.text:null,e,r,i),this.icon=new uh(t?t.icon:null,e,n,i)};ch.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var ph=function(t,e,r){this.text=t,this.icon=e,this.skipFade=r},hh=function(){this.invProjMatrix=Ca(),this.viewportMatrix=Ca(),this.circles=[]},fh=function(t,e,r,n,i){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=r,this.bucketIndex=n,this.tileID=i},dh=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};function mh(t,e,r,n,o){var a=ru(t),s=-(a.horizontalAlign-.5)*e,l=-(a.verticalAlign-.5)*r,u=lu(t,n);return new i(s+u[0]*o,l+u[1]*o)}function yh(t,e,r,n,o,a){var s=t.x1,l=t.x2,u=t.y1,c=t.y2,p=t.anchorPointX,h=t.anchorPointY,f=new i(e,r);return n&&f._rotate(o?a:-a),{x1:s+f.x,y1:u+f.y,x2:l+f.x,y2:c+f.y,anchorPointX:p,anchorPointY:h}}dh.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var gh=function(t,e,r,n){this.transform=t.clone(),this.collisionIndex=new sh(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new dh(r),this.collisionCircleArrays={},this.prevPlacement=n,n&&(n.prevPlacement=void 0),this.placedOrientations={}};function vh(t,e,r,n,i){t.emplaceBack(e?1:0,r?1:0,n||0,i||0),t.emplaceBack(e?1:0,r?1:0,n||0,i||0),t.emplaceBack(e?1:0,r?1:0,n||0,i||0),t.emplaceBack(e?1:0,r?1:0,n||0,i||0)}gh.prototype.getBucketParts=function(t,e,r,n){var i=r.getBucket(e),o=r.latestFeatureIndex;if(i&&o&&e.id===i.layerIds[0]){var a=r.collisionBoxArray,s=i.layers[0].layout,l=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),u=r.tileSize/8192,c=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),p="map"===s.get("text-pitch-alignment"),h="map"===s.get("text-rotation-alignment"),f=lh(r,1,this.transform.zoom),d=Hp(c,p,h,this.transform,f),m=null;if(p){var y=Xp(c,p,h,this.transform,f);m=Da([],this.transform.labelPlaneMatrix,y)}this.retainedQueryData[i.bucketInstanceId]=new fh(i.bucketInstanceId,o,i.sourceLayerIndex,i.index,r.tileID);var g={bucket:i,layout:s,posMatrix:c,textLabelPlaneMatrix:d,labelToScreenMatrix:m,scale:l,textPixelRatio:u,holdingForFade:r.holdingForFade(),collisionBoxArray:a,partiallyEvaluatedTextSize:ou(i.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(i.sourceID)};if(n)for(var v=0,_=i.sortKeyRanges;v<_.length;v+=1){var x=_[v];t.push({sortKey:x.sortKey,symbolInstanceStart:x.symbolInstanceStart,symbolInstanceEnd:x.symbolInstanceEnd,parameters:g})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:i.symbolInstances.length,parameters:g})}},gh.prototype.attemptAnchorPlacement=function(t,e,r,n,i,o,a,s,l,u,c,p,h,f,d){var m,y=[p.textOffset0,p.textOffset1],g=mh(t,r,n,y,i),v=this.collisionIndex.placeCollisionBox(yh(e,g.x,g.y,o,a,this.transform.angle),c,s,l,u.predicate);if(!d||0!==this.collisionIndex.placeCollisionBox(yh(d,g.x,g.y,o,a,this.transform.angle),c,s,l,u.predicate).box.length)return v.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID].text&&(m=this.prevPlacement.variableOffsets[p.crossTileID].anchor),this.variableOffsets[p.crossTileID]={textOffset:y,width:r,height:n,anchor:t,textBoxScale:i,prevAnchor:m},this.markUsedJustification(h,t,p,f),h.allowVerticalPlacement&&(this.markUsedOrientation(h,f,p),this.placedOrientations[p.crossTileID]=f),{shift:g,placedGlyphBoxes:v}):void 0},gh.prototype.placeLayerBucketPart=function(t,e,r){var n=this,i=t.parameters,o=i.bucket,a=i.layout,s=i.posMatrix,l=i.textLabelPlaneMatrix,u=i.labelToScreenMatrix,c=i.textPixelRatio,p=i.holdingForFade,h=i.collisionBoxArray,f=i.partiallyEvaluatedTextSize,d=i.collisionGroup,m=a.get("text-optional"),y=a.get("icon-optional"),g=a.get("text-allow-overlap"),v=a.get("icon-allow-overlap"),_="map"===a.get("text-rotation-alignment"),x="map"===a.get("text-pitch-alignment"),b="none"!==a.get("icon-text-fit"),w="viewport-y"===a.get("symbol-z-order"),S=g&&(v||!o.hasIconData()||y),k=v&&(g||!o.hasTextData()||m);!o.collisionArrays&&h&&o.deserializeCollisionBoxes(h);var T=function(t,i){if(!e[t.crossTileID])if(p)n.placements[t.crossTileID]=new ph(!1,!1,!1);else{var h,w=!1,T=!1,E=!0,I=null,z={box:null,offscreen:null},C={box:null,offscreen:null},A=null,P=null,D=0,M=0,L=0;i.textFeatureIndex?D=i.textFeatureIndex:t.useRuntimeCollisionCircles&&(D=t.featureIndex),i.verticalTextFeatureIndex&&(M=i.verticalTextFeatureIndex);var R=i.textBox;if(R){var B=function(e){var r=$l.horizontal;if(o.allowVerticalPlacement&&!e&&n.prevPlacement){var i=n.prevPlacement.placedOrientations[t.crossTileID];i&&(n.placedOrientations[t.crossTileID]=i,n.markUsedOrientation(o,r=i,t))}return r},O=function(e,r){if(o.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&i.verticalTextBox)for(var n=0,a=o.writingModes;n<a.length&&(a[n]===$l.vertical?(z=r(),C=z):z=e(),!(z&&z.box&&z.box.length));n+=1);else z=e()};if(a.get("text-variable-anchor")){var F=a.get("text-variable-anchor");if(n.prevPlacement&&n.prevPlacement.variableOffsets[t.crossTileID]){var N=n.prevPlacement.variableOffsets[t.crossTileID];F.indexOf(N.anchor)>0&&(F=F.filter((function(t){return t!==N.anchor}))).unshift(N.anchor)}var V=function(e,r,i){for(var a=e.x2-e.x1,l=e.y2-e.y1,u=t.textBoxScale,p=b&&!v?r:null,h={box:[],offscreen:!1},f=g?2*F.length:F.length,m=0;m<f;++m){var y=n.attemptAnchorPlacement(F[m%F.length],e,a,l,u,_,x,c,s,d,m>=F.length,t,o,i,p);if(y&&(h=y.placedGlyphBoxes)&&h.box&&h.box.length){w=!0,I=y.shift;break}}return h};O((function(){return V(R,i.iconBox,$l.horizontal)}),(function(){var e=i.verticalTextBox;return o.allowVerticalPlacement&&!(z&&z.box&&z.box.length)&&t.numVerticalGlyphVertices>0&&e?V(e,i.verticalIconBox,$l.vertical):{box:null,offscreen:null}})),z&&(w=z.box,E=z.offscreen);var U=B(z&&z.box);if(!w&&n.prevPlacement){var j=n.prevPlacement.variableOffsets[t.crossTileID];j&&(n.variableOffsets[t.crossTileID]=j,n.markUsedJustification(o,j.anchor,t,U))}}else{var q=function(e,r){var i=n.collisionIndex.placeCollisionBox(e,g,c,s,d.predicate);return i&&i.box&&i.box.length&&(n.markUsedOrientation(o,r,t),n.placedOrientations[t.crossTileID]=r),i};O((function(){return q(R,$l.horizontal)}),(function(){var e=i.verticalTextBox;return o.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&e?q(e,$l.vertical):{box:null,offscreen:null}})),B(z&&z.box&&z.box.length)}}if(w=(h=z)&&h.box&&h.box.length>0,E=h&&h.offscreen,t.useRuntimeCollisionCircles){var Z=o.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex),G=iu(o.textSizeData,f,Z),W=a.get("text-padding");A=n.collisionIndex.placeCollisionCircles(g,Z,o.lineVertexArray,o.glyphOffsetArray,G,s,l,u,r,x,d.predicate,t.collisionCircleDiameter,W),w=g||A.circles.length>0&&!A.collisionDetected,E=E&&A.offscreen}if(i.iconFeatureIndex&&(L=i.iconFeatureIndex),i.iconBox){var H=function(t){var e=b&&I?yh(t,I.x,I.y,_,x,n.transform.angle):t;return n.collisionIndex.placeCollisionBox(e,v,c,s,d.predicate)};T=C&&C.box&&C.box.length&&i.verticalIconBox?(P=H(i.verticalIconBox)).box.length>0:(P=H(i.iconBox)).box.length>0,E=E&&P.offscreen}var X=m||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,K=y||0===t.numIconVertices;if(X||K?K?X||(T=T&&w):w=T&&w:T=w=T&&w,w&&h&&h.box&&n.collisionIndex.insertCollisionBox(h.box,a.get("text-ignore-placement"),o.bucketInstanceId,C&&C.box&&M?M:D,d.ID),T&&P&&n.collisionIndex.insertCollisionBox(P.box,a.get("icon-ignore-placement"),o.bucketInstanceId,L,d.ID),A&&(w&&n.collisionIndex.insertCollisionCircles(A.circles,a.get("text-ignore-placement"),o.bucketInstanceId,D,d.ID),r)){var Y=o.bucketInstanceId,Q=n.collisionCircleArrays[Y];void 0===Q&&(Q=n.collisionCircleArrays[Y]=new hh);for(var $=0;$<A.circles.length;$+=4)Q.circles.push(A.circles[$+0]),Q.circles.push(A.circles[$+1]),Q.circles.push(A.circles[$+2]),Q.circles.push(A.collisionDetected?1:0)}n.placements[t.crossTileID]=new ph(w||S,T||k,E||o.justReloaded),e[t.crossTileID]=!0}};if(w)for(var E=o.getSortedSymbolIndexes(this.transform.angle),I=E.length-1;I>=0;--I){var z=E[I];T(o.symbolInstances.get(z),o.collisionArrays[z])}else for(var C=t.symbolInstanceStart;C<t.symbolInstanceEnd;C++)T(o.symbolInstances.get(C),o.collisionArrays[C]);if(r&&o.bucketInstanceId in this.collisionCircleArrays){var A=this.collisionCircleArrays[o.bucketInstanceId];Pa(A.invProjMatrix,s),A.viewportMatrix=this.collisionIndex.getViewportMatrix()}o.justReloaded=!1},gh.prototype.markUsedJustification=function(t,e,r,n){var i;i=n===$l.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[function(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}(e)];for(var o=0,a=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];o<a.length;o+=1){var s=a[o];s>=0&&(t.text.placedSymbolArray.get(s).crossTileID=i>=0&&s!==i?0:r.crossTileID)}},gh.prototype.markUsedOrientation=function(t,e,r){for(var n=e===$l.horizontal||e===$l.horizontalOnly?e:0,i=e===$l.vertical?e:0,o=0,a=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];o<a.length;o+=1)t.text.placedSymbolArray.get(a[o]).placedOrientation=n;r.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=i)},gh.prototype.commit=function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,r=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var n=e?e.symbolFadeChange(t):1,i=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(var s in this.placements){var l=this.placements[s],u=i[s];u?(this.opacities[s]=new ch(u,n,l.text,l.icon),r=r||l.text!==u.text.placed||l.icon!==u.icon.placed):(this.opacities[s]=new ch(null,n,l.text,l.icon,l.skipFade),r=r||l.text||l.icon)}for(var c in i){var p=i[c];if(!this.opacities[c]){var h=new ch(p,n,!1,!1);h.isHidden()||(this.opacities[c]=h,r=r||p.text.placed||p.icon.placed)}}for(var f in o)this.variableOffsets[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.variableOffsets[f]=o[f]);for(var d in a)this.placedOrientations[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.placedOrientations[d]=a[d]);r?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},gh.prototype.updateLayerOpacities=function(t,e){for(var r={},n=0,i=e;n<i.length;n+=1){var o=i[n],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,r,o.collisionBoxArray)}},gh.prototype.updateBucketOpacities=function(t,e,r){var n=this;t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();var o=t.layers[0].layout,a=new ch(null,0,!1,!1,!0),s=o.get("text-allow-overlap"),l=o.get("icon-allow-overlap"),u=o.get("text-variable-anchor"),c="map"===o.get("text-rotation-alignment"),p="map"===o.get("text-pitch-alignment"),h="none"!==o.get("icon-text-fit"),f=new ch(null,0,s&&(l||!t.hasIconData()||o.get("icon-optional")),l&&(s||!t.hasTextData()||o.get("text-optional")),!0);!t.collisionArrays&&r&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(r);for(var d=function(t,e,r){for(var n=0;n<e/4;n++)t.opacityVertexArray.emplaceBack(r)},m=function(r){var o=t.symbolInstances.get(r),s=o.numHorizontalGlyphVertices,l=o.numVerticalGlyphVertices,m=o.crossTileID,y=n.opacities[m];e[m]?y=a:y||(n.opacities[m]=y=f),e[m]=!0;var g=o.numIconVertices>0,v=n.placedOrientations[o.crossTileID],_=v===$l.vertical,x=v===$l.horizontal||v===$l.horizontalOnly;if(s>0||l>0){var b=Eh(y.text);d(t.text,s,_?Ih:b),d(t.text,l,x?Ih:b);var w=y.text.isHidden();[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((function(e){e>=0&&(t.text.placedSymbolArray.get(e).hidden=w||_?1:0)})),o.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).hidden=w||x?1:0);var S=n.variableOffsets[o.crossTileID];S&&n.markUsedJustification(t,S.anchor,o,v);var k=n.placedOrientations[o.crossTileID];k&&(n.markUsedJustification(t,"left",o,k),n.markUsedOrientation(t,k,o))}if(g){var T=Eh(y.icon),E=!(h&&o.verticalPlacedIconSymbolIndex&&_);o.placedIconSymbolIndex>=0&&(d(t.icon,o.numIconVertices,E?T:Ih),t.icon.placedSymbolArray.get(o.placedIconSymbolIndex).hidden=y.icon.isHidden()),o.verticalPlacedIconSymbolIndex>=0&&(d(t.icon,o.numVerticalIconVertices,E?Ih:T),t.icon.placedSymbolArray.get(o.verticalPlacedIconSymbolIndex).hidden=y.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){var I=t.collisionArrays[r];if(I){var z=new i(0,0);if(I.textBox||I.verticalTextBox){var C=!0;if(u){var A=n.variableOffsets[m];A?(z=mh(A.anchor,A.width,A.height,A.textOffset,A.textBoxScale),c&&z._rotate(p?n.transform.angle:-n.transform.angle)):C=!1}I.textBox&&vh(t.textCollisionBox.collisionVertexArray,y.text.placed,!C||_,z.x,z.y),I.verticalTextBox&&vh(t.textCollisionBox.collisionVertexArray,y.text.placed,!C||x,z.x,z.y)}var P=Boolean(!x&&I.verticalIconBox);I.iconBox&&vh(t.iconCollisionBox.collisionVertexArray,y.icon.placed,P,h?z.x:0,h?z.y:0),I.verticalIconBox&&vh(t.iconCollisionBox.collisionVertexArray,y.icon.placed,!P,h?z.x:0,h?z.y:0)}}},y=0;y<t.symbolInstances.length;y++)m(y);if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){var g=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=g.invProjMatrix,t.placementViewportMatrix=g.viewportMatrix,t.collisionCircleArray=g.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}},gh.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},gh.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},gh.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},gh.prototype.stillRecent=function(t,e){var r=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*r>t},gh.prototype.setStale=function(){this.stale=!0};var _h=Math.pow(2,25),xh=Math.pow(2,24),bh=Math.pow(2,17),wh=Math.pow(2,16),Sh=Math.pow(2,9),kh=Math.pow(2,8),Th=Math.pow(2,1);function Eh(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,r=Math.floor(127*t.opacity);return r*_h+e*xh+r*bh+e*wh+r*Sh+e*kh+r*Th+e}var Ih=0,zh=function(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};zh.prototype.continuePlacement=function(t,e,r,n,i){for(var o=this._bucketParts;this._currentTileIndex<t.length;)if(e.getBucketParts(o,n,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((function(t,e){return t.sortKey-e.sortKey})));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,r),this._currentPartIndex++,i())return!0;return!1};var Ch=function(t,e,r,n,i,o,a){this.placement=new gh(t,i,o,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=n,this._done=!1};Ch.prototype.isDone=function(){return this._done},Ch.prototype.continuePlacement=function(t,e,r){for(var n=this,i=V.now(),o=function(){var t=V.now()-i;return!n._forceFullPlacement&&t>2};this._currentPlacementIndex>=0;){var a=e[t[this._currentPlacementIndex]],s=this.placement.collisionIndex.transform.zoom;if("symbol"===a.type&&(!a.minzoom||a.minzoom<=s)&&(!a.maxzoom||a.maxzoom>s)){if(this._inProgressLayer||(this._inProgressLayer=new zh(a)),this._inProgressLayer.continuePlacement(r[a.source],this.placement,this._showCollisionBoxes,a,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ch.prototype.commit=function(t){return this.placement.commit(t),this.placement};var Ah=function(t,e,r){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=r;for(var n=0;n<e.length;n++){var i=e.get(n),o=i.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,t)})}};Ah.prototype.getScaledCoordinates=function(t,e){var r=.03125/Math.pow(2,e.canonical.z-this.tileID.canonical.z);return{x:Math.floor((8192*e.canonical.x+t.anchorX)*r),y:Math.floor((8192*e.canonical.y+t.anchorY)*r)}},Ah.prototype.findMatches=function(t,e,r){for(var n=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),i=0;i<t.length;i++){var o=t.get(i);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,e),l=0,u=a;l<u.length;l+=1){var c=u[l];if(Math.abs(c.coord.x-s.x)<=n&&Math.abs(c.coord.y-s.y)<=n&&!r[c.crossTileID]){r[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}}};var Ph=function(){this.maxCrossTileID=0};Ph.prototype.generate=function(){return++this.maxCrossTileID};var Dh=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Dh.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var r in this.indexes){var n=this.indexes[r],i={};for(var o in n){var a=n[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),i[a.tileID.key]=a}this.indexes[r]=i}this.lng=t},Dh.prototype.addBucket=function(t,e,r){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var n=0;n<e.symbolInstances.length;n++)e.symbolInstances.get(n).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var i=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>t.overscaledZ)for(var s in a){var l=a[s];l.tileID.isChildOf(t)&&l.findMatches(e.symbolInstances,t,i)}else{var u=a[t.scaledTo(Number(o)).key];u&&u.findMatches(e.symbolInstances,t,i)}}for(var c=0;c<e.symbolInstances.length;c++){var p=e.symbolInstances.get(c);p.crossTileID||(p.crossTileID=r.generate(),i[p.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Ah(t,e.symbolInstances,e.bucketInstanceId),!0},Dh.prototype.removeBucketCrossTileIDs=function(t,e){for(var r in e.indexedSymbolInstances)for(var n=0,i=e.indexedSymbolInstances[r];n<i.length;n+=1)delete this.usedCrossTileIDs[t][i[n].crossTileID]},Dh.prototype.removeStaleBuckets=function(t){var e=!1;for(var r in this.indexes){var n=this.indexes[r];for(var i in n)t[n[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(r,n[i]),delete n[i],e=!0)}return e};var Mh=function(){this.layerIndexes={},this.crossTileIDs=new Ph,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Mh.prototype.addLayer=function(t,e,r){var n=this.layerIndexes[t.id];void 0===n&&(n=this.layerIndexes[t.id]=new Dh);var i=!1,o={};n.handleWrapJump(r);for(var a=0,s=e;a<s.length;a+=1){var l=s[a],u=l.getBucket(t);u&&t.id===u.layerIds[0]&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),n.addBucket(l.tileID,u,this.crossTileIDs)&&(i=!0),o[u.bucketInstanceId]=!0)}return n.removeStaleBuckets(o)&&(i=!0),i},Mh.prototype.pruneUnusedLayers=function(t){var e={};for(var r in t.forEach((function(t){e[t]=!0})),this.layerIndexes)e[r]||delete this.layerIndexes[r]};var Lh=function(t,e){return Hn(t,e&&e.filter((function(t){return"source.canvas"!==t.identifier})))},Rh=y(Op,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Bh=y(Op,["setCenter","setZoom","setBearing","setPitch"]),Oh=function(){var t={},e=Zt.$version;for(var r in Zt.$root){var n,i=Zt.$root[r];i.required&&null!=(n="version"===r?e:"array"===i.type?[]:{})&&(t[r]=n)}return t}(),Fh=function(t){function e(r,n){var i=this;void 0===n&&(n={}),t.call(this),this.map=r,this.dispatcher=new Ku(Mp(),this),this.imageManager=new Ru,this.imageManager.setEventedParent(this),this.glyphManager=new ju(r._requestManager,n.localIdeographFontFamily),this.lineAtlas=new Wu(256,512),this.crossTileSymbolIndex=new Mh,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new oi,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",Dt());var o=this;this._rtlTextPluginCallback=e.registerForPluginStateChange((function(t){o.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},(function(t,e){if(Si(t),e&&e.every((function(t){return t})))for(var r in o.sourceCaches)o.sourceCaches[r].reload()}))})),this.on("data",(function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=i.sourceCaches[t.sourceId];if(e){var r=e.getSource();if(r&&r.vectorLayerIds)for(var n in i._layers){var o=i._layers[n];o.source===r.id&&i._validateLayer(o)}}}}))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.loadURL=function(t,e){var r=this;void 0===e&&(e={}),this.fire(new Ut("dataloading",{dataType:"style"}));var n="boolean"==typeof e.validate?e.validate:!ot(t);t=this.map._requestManager.normalizeStyleURL(t,e.accessToken);var i=this.map._requestManager.transformRequest(t,zt.Style);this._request=Lt(i,(function(t,e){r._request=null,t?r.fire(new jt(t)):e&&r._load(e,n)}))},e.prototype.loadJSON=function(t,e){var r=this;void 0===e&&(e={}),this.fire(new Ut("dataloading",{dataType:"style"})),this._request=V.frame((function(){r._request=null,r._load(t,!1!==e.validate)}))},e.prototype.loadEmpty=function(){this.fire(new Ut("dataloading",{dataType:"style"})),this._load(Oh,!1)},e.prototype._load=function(t,e){if(!e||!Lh(this,qn(t))){for(var r in this._loaded=!0,this.stylesheet=t,t.sources)this.addSource(r,t.sources[r],{validate:!1});t.sprite?this._loadSprite(t.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);var n=Bp(this.stylesheet.layers);this._order=n.map((function(t){return t.id})),this._layers={},this._serializedLayers={};for(var i=0,o=n;i<o.length;i+=1){var a=o[i];(a=Iu(a)).setEventedParent(this,{layer:{id:a.id}}),this._layers[a.id]=a,this._serializedLayers[a.id]=a.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Gu(this.stylesheet.light),this.fire(new Ut("data",{dataType:"style"})),this.fire(new Ut("style.load"))}},e.prototype._loadSprite=function(t){var e=this;this._spriteRequest=function(t,e,r){var n,i,o,a=V.devicePixelRatio>1?"@2x":"",s=Lt(e.transformRequest(e.normalizeSpriteURL(t,a,".json"),zt.SpriteJSON),(function(t,e){s=null,o||(o=t,n=e,u())})),l=Ft(e.transformRequest(e.normalizeSpriteURL(t,a,".png"),zt.SpriteImage),(function(t,e){l=null,o||(o=t,i=e,u())}));function u(){if(o)r(o);else if(n&&i){var t=V.getImageData(i),e={};for(var a in n){var s=n[a],l=s.width,u=s.height,c=s.x,p=s.y,h=s.sdf,f=s.pixelRatio,d=s.stretchX,m=s.stretchY,y=s.content,g=new Ya({width:l,height:u});Ya.copy(t,g,{x:c,y:p},{x:0,y:0},{width:l,height:u}),e[a]={data:g,pixelRatio:f,sdf:h,stretchX:d,stretchY:m,content:y}}r(null,e)}}return{cancel:function(){s&&(s.cancel(),s=null),l&&(l.cancel(),l=null)}}}(t,this.map._requestManager,(function(t,r){if(e._spriteRequest=null,t)e.fire(new jt(t));else if(r)for(var n in r)e.imageManager.addImage(n,r[n]);e.imageManager.setLoaded(!0),e._availableImages=e.imageManager.listImages(),e.dispatcher.broadcast("setImages",e._availableImages),e.fire(new Ut("data",{dataType:"style"}))}))},e.prototype._validateLayer=function(t){var e=this.sourceCaches[t.source];if(e){var r=t.sourceLayer;if(r){var n=e.getSource();("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new jt(new Error('Source layer "'+r+'" does not exist on source "'+n.id+'" as specified by style layer "'+t.id+'"')))}}},e.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},e.prototype._serializeLayers=function(t){for(var e=[],r=0,n=t;r<n.length;r+=1){var i=this._layers[n[r]];"custom"!==i.type&&e.push(i.serialize())}return e},e.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},e.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},e.prototype.update=function(t){if(this._loaded){var e=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);for(var i in(r.length||n.length)&&this._updateWorkerLayers(r,n),this._updatedSources){var o=this._updatedSources[i];"reload"===o?this._reloadSource(i):"clear"===o&&this._clearSource(i)}for(var a in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[a].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}var s={};for(var l in this.sourceCaches){var u=this.sourceCaches[l];s[l]=u.used,u.used=!1}for(var c=0,p=this._order;c<p.length;c+=1){var h=this._layers[p[c]];h.recalculate(t,this._availableImages),!h.isHidden(t.zoom)&&h.source&&(this.sourceCaches[h.source].used=!0)}for(var f in s){var d=this.sourceCaches[f];s[f]!==d.used&&d.fire(new Ut("data",{sourceDataType:"visibility",dataType:"source",sourceId:f}))}this.light.recalculate(t),this.z=t.zoom,e&&this.fire(new Ut("data",{dataType:"style"}))}},e.prototype._updateTilesForChangedImages=function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}},e.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},e.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},e.prototype.setState=function(t){var e=this;if(this._checkLoaded(),Lh(this,qn(t)))return!1;(t=T(t)).layers=Bp(t.layers);var r=function(t,e){if(!t)return[{command:Op.setStyle,args:[e]}];var r=[];try{if(!s(t.version,e.version))return[{command:Op.setStyle,args:[e]}];s(t.center,e.center)||r.push({command:Op.setCenter,args:[e.center]}),s(t.zoom,e.zoom)||r.push({command:Op.setZoom,args:[e.zoom]}),s(t.bearing,e.bearing)||r.push({command:Op.setBearing,args:[e.bearing]}),s(t.pitch,e.pitch)||r.push({command:Op.setPitch,args:[e.pitch]}),s(t.sprite,e.sprite)||r.push({command:Op.setSprite,args:[e.sprite]}),s(t.glyphs,e.glyphs)||r.push({command:Op.setGlyphs,args:[e.glyphs]}),s(t.transition,e.transition)||r.push({command:Op.setTransition,args:[e.transition]}),s(t.light,e.light)||r.push({command:Op.setLight,args:[e.light]});var n={},i=[];!function(t,e,r,n){var i;for(i in e=e||{},t=t||{})t.hasOwnProperty(i)&&(e.hasOwnProperty(i)||Np(i,r,n));for(i in e)e.hasOwnProperty(i)&&(t.hasOwnProperty(i)?s(t[i],e[i])||("geojson"===t[i].type&&"geojson"===e[i].type&&Up(t,e,i)?r.push({command:Op.setGeoJSONSourceData,args:[i,e[i].data]}):Vp(i,e,r,n)):Fp(i,e,r))}(t.sources,e.sources,i,n);var o=[];t.layers&&t.layers.forEach((function(t){n[t.source]?r.push({command:Op.removeLayer,args:[t.id]}):o.push(t)})),r=r.concat(i),function(t,e,r){e=e||[];var n,i,o,a,l,u,c,p=(t=t||[]).map(qp),h=e.map(qp),f=t.reduce(Zp,{}),d=e.reduce(Zp,{}),m=p.slice(),y=Object.create(null);for(n=0,i=0;n<p.length;n++)d.hasOwnProperty(o=p[n])?i++:(r.push({command:Op.removeLayer,args:[o]}),m.splice(m.indexOf(o,i),1));for(n=0,i=0;n<h.length;n++)m[m.length-1-n]!==(o=h[h.length-1-n])&&(f.hasOwnProperty(o)?(r.push({command:Op.removeLayer,args:[o]}),m.splice(m.lastIndexOf(o,m.length-i),1)):i++,r.push({command:Op.addLayer,args:[d[o],u=m[m.length-n]]}),m.splice(m.length-n,0,o),y[o]=!0);for(n=0;n<h.length;n++)if(a=f[o=h[n]],l=d[o],!y[o]&&!s(a,l))if(s(a.source,l.source)&&s(a["source-layer"],l["source-layer"])&&s(a.type,l.type)){for(c in jp(a.layout,l.layout,r,o,null,Op.setLayoutProperty),jp(a.paint,l.paint,r,o,null,Op.setPaintProperty),s(a.filter,l.filter)||r.push({command:Op.setFilter,args:[o,l.filter]}),s(a.minzoom,l.minzoom)&&s(a.maxzoom,l.maxzoom)||r.push({command:Op.setLayerZoomRange,args:[o,l.minzoom,l.maxzoom]}),a)a.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?jp(a[c],l[c],r,o,c.slice(6),Op.setPaintProperty):s(a[c],l[c])||r.push({command:Op.setLayerProperty,args:[o,c,l[c]]}));for(c in l)l.hasOwnProperty(c)&&!a.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?jp(a[c],l[c],r,o,c.slice(6),Op.setPaintProperty):s(a[c],l[c])||r.push({command:Op.setLayerProperty,args:[o,c,l[c]]}))}else r.push({command:Op.removeLayer,args:[o]}),u=m[m.lastIndexOf(o)+1],r.push({command:Op.addLayer,args:[l,u]})}(o,e.layers,r)}catch(t){console.warn("Unable to compute style diff:",t),r=[{command:Op.setStyle,args:[e]}]}return r}(this.serialize(),t).filter((function(t){return!(t.command in Bh)}));if(0===r.length)return!1;var n=r.filter((function(t){return!(t.command in Rh)}));if(n.length>0)throw new Error("Unimplemented: "+n.map((function(t){return t.command})).join(", ")+".");return r.forEach((function(t){"setTransition"!==t.command&&e[t.command].apply(e,t.args)})),this.stylesheet=t,!0},e.prototype.addImage=function(t,e){if(this.getImage(t))return this.fire(new jt(new Error("An image with this name already exists.")));this.imageManager.addImage(t,e),this._afterImageUpdated(t)},e.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},e.prototype.getImage=function(t){return this.imageManager.getImage(t)},e.prototype.removeImage=function(t){if(!this.getImage(t))return this.fire(new jt(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this._afterImageUpdated(t)},e.prototype._afterImageUpdated=function(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new Ut("data",{dataType:"style"}))},e.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},e.prototype.addSource=function(t,e,r){var n=this;if(void 0===r&&(r={}),this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!e.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(e).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(e.type)>=0&&this._validate(qn.source,"sources."+t,e,null,r))){this.map&&this.map._collectResourceTiming&&(e.collectResourceTiming=!0);var i=this.sourceCaches[t]=new Tp(t,e,this.dispatcher);i.style=this,i.setEventedParent(this,(function(){return{isSourceLoaded:n.loaded(),source:i.serialize(),sourceId:t}})),i.onAdd(this.map),this._changed=!0}},e.prototype.removeSource=function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(var e in this._layers)if(this._layers[e].source===t)return this.fire(new jt(new Error('Source "'+t+'" cannot be removed while layer "'+e+'" is using it.')));var r=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],r.fire(new Ut("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},e.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},e.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},e.prototype.addLayer=function(t,e,r){void 0===r&&(r={}),this._checkLoaded();var n=t.id;if(this.getLayer(n))this.fire(new jt(new Error('Layer with id "'+n+'" already exists on this map')));else{var i;if("custom"===t.type){if(Lh(this,function(t){var e=[],r=t.id;return void 0===r&&e.push({message:"layers."+r+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+r+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+r+': property "renderingMode" must be either "2d" or "3d"'}),e}(t)))return;i=Iu(t)}else{if("object"==typeof t.source&&(this.addSource(n,t.source),t=m(t=T(t),{source:n})),this._validate(qn.layer,"layers."+n,t,{arrayIndex:-1},r))return;i=Iu(t),this._validateLayer(i),i.setEventedParent(this,{layer:{id:n}}),this._serializedLayers[i.id]=i.serialize()}var o=e?this._order.indexOf(e):this._order.length;if(e&&-1===o)this.fire(new jt(new Error('Layer with id "'+e+'" does not exist on this map.')));else{if(this._order.splice(o,0,n),this._layerOrderChanged=!0,this._layers[n]=i,this._removedLayers[n]&&i.source&&"custom"!==i.type){var a=this._removedLayers[n];delete this._removedLayers[n],a.type!==i.type?this._updatedSources[i.source]="clear":(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause())}this._updateLayer(i),i.onAdd&&i.onAdd(this.map)}}},e.prototype.moveLayer=function(t,e){if(this._checkLoaded(),this._changed=!0,this._layers[t]){if(t!==e){var r=this._order.indexOf(t);this._order.splice(r,1);var n=e?this._order.indexOf(e):this._order.length;e&&-1===n?this.fire(new jt(new Error('Layer with id "'+e+'" does not exist on this map.'))):(this._order.splice(n,0,t),this._layerOrderChanged=!0)}}else this.fire(new jt(new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")))},e.prototype.removeLayer=function(t){this._checkLoaded();var e=this._layers[t];if(e){e.setEventedParent(null);var r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=e,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],e.onRemove&&e.onRemove(this.map)}else this.fire(new jt(new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")))},e.prototype.getLayer=function(t){return this._layers[t]},e.prototype.hasLayer=function(t){return t in this._layers},e.prototype.setLayerZoomRange=function(t,e,r){this._checkLoaded();var n=this.getLayer(t);n?n.minzoom===e&&n.maxzoom===r||(null!=e&&(n.minzoom=e),null!=r&&(n.maxzoom=r),this._updateLayer(n)):this.fire(new jt(new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")))},e.prototype.setFilter=function(t,e,r){void 0===r&&(r={}),this._checkLoaded();var n=this.getLayer(t);if(n){if(!s(n.filter,e))return null==e?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(qn.filter,"layers."+n.id+".filter",e,null,r)||(n.filter=T(e),this._updateLayer(n)))}else this.fire(new jt(new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")))},e.prototype.getFilter=function(t){return T(this.getLayer(t).filter)},e.prototype.setLayoutProperty=function(t,e,r,n){void 0===n&&(n={}),this._checkLoaded();var i=this.getLayer(t);i?s(i.getLayoutProperty(e),r)||(i.setLayoutProperty(e,r,n),this._updateLayer(i)):this.fire(new jt(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},e.prototype.getLayoutProperty=function(t,e){var r=this.getLayer(t);if(r)return r.getLayoutProperty(e);this.fire(new jt(new Error("The layer '"+t+"' does not exist in the map's style.")))},e.prototype.setPaintProperty=function(t,e,r,n){void 0===n&&(n={}),this._checkLoaded();var i=this.getLayer(t);i?s(i.getPaintProperty(e),r)||(i.setPaintProperty(e,r,n)&&this._updateLayer(i),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new jt(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},e.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},e.prototype.setFeatureState=function(t,e){this._checkLoaded();var r=t.source,n=t.sourceLayer,i=this.sourceCaches[r];if(void 0!==i){var o=i.getSource().type;"geojson"===o&&n?this.fire(new jt(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==o||n?(void 0===t.id&&this.fire(new jt(new Error("The feature id parameter must be provided."))),i.setFeatureState(n,t.id,e)):this.fire(new jt(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new jt(new Error("The source '"+r+"' does not exist in the map's style.")))},e.prototype.removeFeatureState=function(t,e){this._checkLoaded();var r=t.source,n=this.sourceCaches[r];if(void 0!==n){var i=n.getSource().type,o="vector"===i?t.sourceLayer:void 0;"vector"!==i||o?e&&"string"!=typeof t.id&&"number"!=typeof t.id?this.fire(new jt(new Error("A feature id is required to remove its specific state property."))):n.removeFeatureState(o,t.id,e):this.fire(new jt(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new jt(new Error("The source '"+r+"' does not exist in the map's style.")))},e.prototype.getFeatureState=function(t){this._checkLoaded();var e=t.source,r=t.sourceLayer,n=this.sourceCaches[e];if(void 0!==n){if("vector"!==n.getSource().type||r)return void 0===t.id&&this.fire(new jt(new Error("The feature id parameter must be provided."))),n.getFeatureState(r,t.id);this.fire(new jt(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new jt(new Error("The source '"+e+"' does not exist in the map's style.")))},e.prototype.getTransition=function(){return m({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},e.prototype.serialize=function(){return k({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:S(this.sourceCaches,(function(t){return t.serialize()})),layers:this._serializeLayers(this._order)},(function(t){return void 0!==t}))},e.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},e.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,r=function(t){return"fill-extrusion"===e._layers[t].type},n={},i=[],o=this._order.length-1;o>=0;o--){var a=this._order[o];if(r(a)){n[a]=o;for(var s=0,l=t;s<l.length;s+=1){var u=l[s][a];if(u)for(var c=0,p=u;c<p.length;c+=1)i.push(p[c])}}}i.sort((function(t,e){return e.intersectionZ-t.intersectionZ}));for(var h=[],f=this._order.length-1;f>=0;f--){var d=this._order[f];if(r(d))for(var m=i.length-1;m>=0;m--){var y=i[m].feature;if(n[y.layer.id]<f)break;h.push(y),i.pop()}else for(var g=0,v=t;g<v.length;g+=1){var _=v[g][d];if(_)for(var x=0,b=_;x<b.length;x+=1)h.push(b[x].feature)}}return h},e.prototype.queryRenderedFeatures=function(t,e,r){e&&e.filter&&this._validate(qn.filter,"queryRenderedFeatures.filter",e.filter,null,e);var n={};if(e&&e.layers){if(!Array.isArray(e.layers))return this.fire(new jt(new Error("parameters.layers must be an Array."))),[];for(var i=0,o=e.layers;i<o.length;i+=1){var a=o[i],s=this._layers[a];if(!s)return this.fire(new jt(new Error("The layer '"+a+"' does not exist in the map's style and cannot be queried for features."))),[];n[s.source]=!0}}var l=[];for(var u in e.availableImages=this._availableImages,this.sourceCaches)e.layers&&!n[u]||l.push(Sc(this.sourceCaches[u],this._layers,this._serializedLayers,t,e,r));return this.placement&&l.push(function(t,e,r,n,i,o,a){for(var s={},l=o.queryRenderedSymbols(n),u=[],c=0,p=Object.keys(l).map(Number);c<p.length;c+=1)u.push(a[p[c]]);u.sort(kc);for(var h=function(){var r=d[f],n=r.featureIndex.lookupSymbolFeatures(l[r.bucketInstanceId],e,r.bucketIndex,r.sourceLayerIndex,i.filter,i.layers,i.availableImages,t);for(var o in n){var a=s[o]=s[o]||[],u=n[o];u.sort((function(t,e){var n=r.featureSortOrder;if(n){var i=n.indexOf(t.featureIndex);return n.indexOf(e.featureIndex)-i}return e.featureIndex-t.featureIndex}));for(var c=0,p=u;c<p.length;c+=1)a.push(p[c])}},f=0,d=u;f<d.length;f+=1)h();var m=function(e){s[e].forEach((function(n){var i=n.feature,o=r[t[e].source].getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o}))};for(var y in s)m(y);return s}(this._layers,this._serializedLayers,this.sourceCaches,t,e,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(l)},e.prototype.querySourceFeatures=function(t,e){e&&e.filter&&this._validate(qn.filter,"querySourceFeatures.filter",e.filter,null,e);var r=this.sourceCaches[t];return r?function(t,e){for(var r=t.getRenderableIds().map((function(e){return t.getTileByID(e)})),n=[],i={},o=0;o<r.length;o++){var a=r[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(n,e))}return n}(r,e):[]},e.prototype.addSourceType=function(t,r,n){return e.getSourceType(t)?n(new Error('A source type called "'+t+'" already exists.')):(e.setSourceType(t,r),r.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:r.workerSourceURL},n):n(null,null))},e.prototype.getLight=function(){return this.light.getLight()},e.prototype.setLight=function(t,e){void 0===e&&(e={}),this._checkLoaded();var r=this.light.getLight(),n=!1;for(var i in t)if(!s(t[i],r[i])){n=!0;break}if(n){var o={now:V.now(),transition:m({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,e),this.light.updateTransitions(o)}},e.prototype._validate=function(t,e,r,n,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&Lh(this,t.call(qn,m({key:e,style:this.serialize(),value:r,styleSpec:Zt},n)))},e.prototype._remove=function(){for(var t in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),Ti.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[t].setEventedParent(null);for(var e in this.sourceCaches)this.sourceCaches[e].clearTiles(),this.sourceCaches[e].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},e.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},e.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},e.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},e.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},e.prototype._updatePlacement=function(t,e,r,n,i){void 0===i&&(i=!1);for(var o=!1,a=!1,s={},l=0,u=this._order;l<u.length;l+=1){var c=this._layers[u[l]];if("symbol"===c.type){if(!s[c.source]){var p=this.sourceCaches[c.source];s[c.source]=p.getRenderableIds(!0).map((function(t){return p.getTileByID(t)})).sort((function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)}))}var h=this.crossTileSymbolIndex.addLayer(c,s[c.source],t.center.lng);o=o||h}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((i=i||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(V.now(),t.zoom))&&(this.pauseablePlacement=new Ch(t,this._order,i,e,r,n,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(V.now()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(var f=0,d=this._order;f<d.length;f+=1){var m=this._layers[d[f]];"symbol"===m.type&&this.placement.updateLayerOpacities(m,s[m.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(V.now())},e.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},e.prototype.getImages=function(t,e,r){this.imageManager.getImages(e.icons,r),this._updateTilesForChangedImages();var n=this.sourceCaches[e.source];n&&n.setDependencies(e.tileID.key,e.type,e.icons)},e.prototype.getGlyphs=function(t,e,r){this.glyphManager.getGlyphs(e.stacks,r)},e.prototype.getResource=function(t,e,r){return Mt(e,r)},e}(qt);Fh.getSourceType=function(t){return bc[t]},Fh.setSourceType=function(t,e){bc[t]=e},Fh.registerForPluginStateChange=function(t){return t({pluginStatus:bi,pluginURL:wi}),Ti.on("pluginStateChange",t),t};var Nh=Xi([{name:"a_pos",type:"Int16",components:2}]),Vh=ff("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Uh=ff("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),jh=ff("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),qh=ff("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Zh=ff("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Gh=ff("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Wh=ff("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Hh=ff("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Xh=ff("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Kh=ff("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Yh=ff("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Qh=ff("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),$h=ff("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Jh=ff("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),tf=ff("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),ef=ff("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),rf=ff("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),nf=ff("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),of=ff("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),af=ff("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),sf=ff("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lf=ff("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),uf=ff("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),cf=ff("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),pf=ff("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),hf=ff("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function ff(t,e){var r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,n=e.match(/attribute ([\w]+) ([\w]+)/g),i=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(i):i,s={};return{fragmentSource:t=t.replace(r,(function(t,e,r,n,i){return s[i]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+i+"\nvarying "+r+" "+n+" "+i+";\n#else\nuniform "+r+" "+n+" u_"+i+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+i+"\n    "+r+" "+n+" "+i+" = u_"+i+";\n#endif\n"})),vertexSource:e=e.replace(r,(function(t,e,r,n,i){var o="float"===n?"vec2":"vec4",a=i.match(/color/)?"color":o;return s[i]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float u_"+i+"_t;\nattribute "+r+" "+o+" a_"+i+";\nvarying "+r+" "+n+" "+i+";\n#else\nuniform "+r+" "+n+" u_"+i+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = a_"+i+";\n#else\n    "+r+" "+n+" "+i+" = u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = unpack_mix_"+a+"(a_"+i+", u_"+i+"_t);\n#else\n    "+r+" "+n+" "+i+" = u_"+i+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float u_"+i+"_t;\nattribute "+r+" "+o+" a_"+i+";\n#else\nuniform "+r+" "+n+" u_"+i+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+r+" "+n+" "+i+" = a_"+i+";\n#else\n    "+r+" "+n+" "+i+" = u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+r+" "+n+" "+i+" = unpack_mix_"+a+"(a_"+i+", u_"+i+"_t);\n#else\n    "+r+" "+n+" "+i+" = u_"+i+";\n#endif\n"})),staticAttributes:n,staticUniforms:a}}var df=Object.freeze({__proto__:null,prelude:Vh,background:Uh,backgroundPattern:jh,circle:qh,clippingMask:Zh,heatmap:Gh,heatmapTexture:Wh,collisionBox:Hh,collisionCircle:Xh,debug:Kh,fill:Yh,fillOutline:Qh,fillOutlinePattern:$h,fillPattern:Jh,fillExtrusion:tf,fillExtrusionPattern:ef,hillshadePrepare:rf,hillshade:nf,line:of,lineGradient:af,linePattern:sf,lineSDF:lf,raster:uf,symbolIcon:cf,symbolSDF:pf,symbolTextAndIcon:hf}),mf=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function yf(t){for(var e=[],r=0;r<t.length;r++)if(null!==t[r]){var n=t[r].split(" ");e.push(n.pop())}return e}mf.prototype.bind=function(t,e,r,n,i,o,a,s){this.context=t;for(var l=this.boundPaintVertexBuffers.length!==n.length,u=0;!l&&u<n.length;u++)this.boundPaintVertexBuffers[u]!==n[u]&&(l=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===r&&!l&&this.boundIndexBuffer===i&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind()):this.freshBind(e,r,n,i,o,a,s)},mf.prototype.freshBind=function(t,e,r,n,i,o,a){var s,l=t.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=r,this.boundIndexBuffer=n,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=u.currentNumAttributes||0;for(var p=l;p<s;p++)c.disableVertexAttribArray(p)}e.enableAttributes(c,t);for(var h=0,f=r;h<f.length;h+=1)f[h].enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,i);for(var d=0,m=r;d<m.length;d+=1){var y=m[d];y.bind(),y.setVertexAttribPointers(c,t,i)}o&&(o.bind(),o.setVertexAttribPointers(c,t,i)),n&&n.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,i)),u.currentNumAttributes=l},mf.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var gf=function(t,e,r,n,i,o){var a=t.gl;this.program=a.createProgram();for(var s=yf(r.staticAttributes),l=n?n.getBinderAttributes():[],u=s.concat(l),c=r.staticUniforms?yf(r.staticUniforms):[],p=n?n.getBinderUniforms():[],h=[],f=0,d=c.concat(p);f<d.length;f+=1){var m=d[f];h.indexOf(m)<0&&h.push(m)}var y=n?n.defines():[];o&&y.push("#define OVERDRAW_INSPECTOR;");var g=y.concat(Vh.fragmentSource,r.fragmentSource).join("\n"),v=y.concat(Vh.vertexSource,r.vertexSource).join("\n"),_=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(_,g),a.compileShader(_),a.attachShader(this.program,_);var x=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(x,v),a.compileShader(x),a.attachShader(this.program,x),this.attributes={};var b={};this.numAttributes=u.length;for(var w=0;w<this.numAttributes;w++)u[w]&&(a.bindAttribLocation(this.program,w,u[w]),this.attributes[u[w]]=w);a.linkProgram(this.program),a.deleteShader(x),a.deleteShader(_);for(var S=0;S<h.length;S++){var k=h[S];if(k&&!b[k]){var T=a.getUniformLocation(this.program,k);T&&(b[k]=T)}}this.fixedUniforms=i(t,b),this.binderUniforms=n?n.getUniforms(t,b):[]}}};function vf(t,e,r){var n=1/lh(r,1,e.transform.tileZoom),i=Math.pow(2,r.tileID.overscaledZ),o=r.tileSize*Math.pow(2,e.transform.tileZoom)/i,a=o*(r.tileID.canonical.x+r.tileID.wrap*i),s=o*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[n,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}gf.prototype.draw=function(t,e,r,n,i,o,a,s,l,u,c,p,h,f,d,m){var y,g=t.gl;if(!this.failedToCreate){for(var v in t.program.set(this.program),t.setDepthMode(r),t.setStencilMode(n),t.setColorMode(i),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[v].set(a[v]);f&&f.setUniforms(t,this.binderUniforms,p,{zoom:h});for(var _=(y={},y[g.LINES]=2,y[g.TRIANGLES]=3,y[g.LINE_STRIP]=1,y)[e],x=0,b=c.get();x<b.length;x+=1){var w=b[x],S=w.vaos||(w.vaos={});(S[s]||(S[s]=new mf)).bind(t,this,l,f?f.getPaintVertexBuffers():[],u,w.vertexOffset,d,m),g.drawElements(e,w.primitiveLength*_,g.UNSIGNED_SHORT,w.primitiveOffset*_*2)}}};var _f=function(t,e,r,n){var i=e.style.light,o=i.properties.get("position"),a=[o.x,o.y,o.z],s=function(){var t=new za(9);return za!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}();"viewport"===i.properties.get("anchor")&&function(t,e){var r=Math.sin(e),n=Math.cos(e);t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1}(s,-e.transform.angle),function(t,e,r){var n=e[0],i=e[1],o=e[2];t[0]=n*r[0]+i*r[3]+o*r[6],t[1]=n*r[1]+i*r[4]+o*r[7],t[2]=n*r[2]+i*r[5]+o*r[8]}(a,a,s);var l=i.properties.get("color");return{u_matrix:t,u_lightpos:a,u_lightintensity:i.properties.get("intensity"),u_lightcolor:[l.r,l.g,l.b],u_vertical_gradient:+r,u_opacity:n}},xf=function(t,e,r,n,i,o,a){return m(_f(t,e,r,n),vf(o,e,a),{u_height_factor:-Math.pow(2,i.overscaledZ)/a.tileSize/8})},bf=function(t){return{u_matrix:t}},wf=function(t,e,r,n){return m(bf(t),vf(r,e,n))},Sf=function(t,e){return{u_matrix:t,u_world:e}},kf=function(t,e,r,n,i){return m(wf(t,e,r,n),{u_world:i})},Tf=function(t,e,r,n){var i,o,a=t.transform;if("map"===n.paint.get("circle-pitch-alignment")){var s=lh(r,1,a.zoom);i=!0,o=[s,s]}else i=!1,o=a.pixelsToGLUnits;return{u_camera_to_center_distance:a.cameraToCenterDistance,u_scale_with_map:+("map"===n.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(e.posMatrix,r,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor")),u_pitch_with_map:+i,u_device_pixel_ratio:V.devicePixelRatio,u_extrude_scale:o}},Ef=function(t,e,r){var n=lh(r,1,e.zoom),i=Math.pow(2,e.zoom-r.tileID.overscaledZ),o=r.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:n,u_extrude_scale:[e.pixelsToGLUnits[0]/(n*i),e.pixelsToGLUnits[1]/(n*i)],u_overscale_factor:o}},If=function(t,e,r){return{u_matrix:t,u_inv_matrix:e,u_camera_to_center_distance:r.cameraToCenterDistance,u_viewport_size:[r.width,r.height]}},zf=function(t,e,r){return void 0===r&&(r=1),{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:r}},Cf=function(t){return{u_matrix:t}},Af=function(t,e,r,n){return{u_matrix:t,u_extrude_scale:lh(e,1,r),u_intensity:n}},Pf=function(t,e,r){var n=t.transform;return{u_matrix:Bf(t,e,r),u_ratio:1/lh(e,1,n.zoom),u_device_pixel_ratio:V.devicePixelRatio,u_units_to_pixels:[1/n.pixelsToGLUnits[0],1/n.pixelsToGLUnits[1]]}},Df=function(t,e,r,n){return m(Pf(t,e,r),{u_image:0,u_image_height:n})},Mf=function(t,e,r,n){var i=t.transform,o=Rf(e,i);return{u_matrix:Bf(t,e,r),u_texsize:e.imageAtlasTexture.size,u_ratio:1/lh(e,1,i.zoom),u_device_pixel_ratio:V.devicePixelRatio,u_image:0,u_scale:[o,n.fromScale,n.toScale],u_fade:n.t,u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},Lf=function(t,e,r,n,i){var o=t.lineAtlas,a=Rf(e,t.transform),s="round"===r.layout.get("line-cap"),l=o.getDash(n.from,s),u=o.getDash(n.to,s),c=l.width*i.fromScale,p=u.width*i.toScale;return m(Pf(t,e,r),{u_patternscale_a:[a/c,-l.height/2],u_patternscale_b:[a/p,-u.height/2],u_sdfgamma:o.width/(256*Math.min(c,p)*V.devicePixelRatio)/2,u_image:0,u_tex_y_a:l.y,u_tex_y_b:u.y,u_mix:i.t})};function Rf(t,e){return 1/lh(t,1,e.tileZoom)}function Bf(t,e,r){return t.translatePosMatrix(e.tileID.posMatrix,e,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}var Of=function(t,e,r,n,i){return{u_matrix:t,u_tl_parent:e,u_scale_parent:r,u_buffer_scale:1,u_fade_t:n.mix,u_opacity:n.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Ff(i.paint.get("raster-hue-rotate"))};var o,a};function Ff(t){t*=Math.PI/180;var e=Math.sin(t),r=Math.cos(t);return[(2*r+1)/3,(-Math.sqrt(3)*e-r+1)/3,(Math.sqrt(3)*e-r+1)/3]}var Nf,Vf=function(t,e,r,n,i,o,a,s,l,u){var c=i.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+r,u_aspect_ratio:c.width/c.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+n,u_texsize:u,u_texture:0}},Uf=function(t,e,r,n,i,o,a,s,l,u,c){var p=i.transform;return m(Vf(t,e,r,n,i,o,a,s,l,u),{u_gamma_scale:n?Math.cos(p._pitch)*p.cameraToCenterDistance:1,u_device_pixel_ratio:V.devicePixelRatio,u_is_halo:+c})},jf=function(t,e,r,n,i,o,a,s,l,u){return m(Uf(t,e,r,n,i,o,a,s,!0,l,!0),{u_texsize_icon:u,u_texture_icon:1})},qf=function(t,e,r){return{u_matrix:t,u_opacity:e,u_color:r}},Zf=function(t,e,r,n,i,o){return m(function(t,e,r,n){var i=r.imageManager.getPattern(t.from.toString()),o=r.imageManager.getPattern(t.to.toString()),a=r.imageManager.getPixelSize(),s=a.width,l=a.height,u=Math.pow(2,n.tileID.overscaledZ),c=n.tileSize*Math.pow(2,r.transform.tileZoom)/u,p=c*(n.tileID.canonical.x+n.tileID.wrap*u),h=c*n.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,l],u_mix:e.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/lh(n,1,r.transform.tileZoom),u_pixel_coord_upper:[p>>16,h>>16],u_pixel_coord_lower:[65535&p,65535&h]}}(n,o,r,i),{u_matrix:t,u_opacity:e})},Gf={fillExtrusion:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_lightpos:new Go(t,e.u_lightpos),u_lightintensity:new qo(t,e.u_lightintensity),u_lightcolor:new Go(t,e.u_lightcolor),u_vertical_gradient:new qo(t,e.u_vertical_gradient),u_opacity:new qo(t,e.u_opacity)}},fillExtrusionPattern:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_lightpos:new Go(t,e.u_lightpos),u_lightintensity:new qo(t,e.u_lightintensity),u_lightcolor:new Go(t,e.u_lightcolor),u_vertical_gradient:new qo(t,e.u_vertical_gradient),u_height_factor:new qo(t,e.u_height_factor),u_image:new jo(t,e.u_image),u_texsize:new Zo(t,e.u_texsize),u_pixel_coord_upper:new Zo(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new Zo(t,e.u_pixel_coord_lower),u_scale:new Go(t,e.u_scale),u_fade:new qo(t,e.u_fade),u_opacity:new qo(t,e.u_opacity)}},fill:function(t,e){return{u_matrix:new Ko(t,e.u_matrix)}},fillPattern:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_image:new jo(t,e.u_image),u_texsize:new Zo(t,e.u_texsize),u_pixel_coord_upper:new Zo(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new Zo(t,e.u_pixel_coord_lower),u_scale:new Go(t,e.u_scale),u_fade:new qo(t,e.u_fade)}},fillOutline:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_world:new Zo(t,e.u_world)}},fillOutlinePattern:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_world:new Zo(t,e.u_world),u_image:new jo(t,e.u_image),u_texsize:new Zo(t,e.u_texsize),u_pixel_coord_upper:new Zo(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new Zo(t,e.u_pixel_coord_lower),u_scale:new Go(t,e.u_scale),u_fade:new qo(t,e.u_fade)}},circle:function(t,e){return{u_camera_to_center_distance:new qo(t,e.u_camera_to_center_distance),u_scale_with_map:new jo(t,e.u_scale_with_map),u_pitch_with_map:new jo(t,e.u_pitch_with_map),u_extrude_scale:new Zo(t,e.u_extrude_scale),u_device_pixel_ratio:new qo(t,e.u_device_pixel_ratio),u_matrix:new Ko(t,e.u_matrix)}},collisionBox:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_camera_to_center_distance:new qo(t,e.u_camera_to_center_distance),u_pixels_to_tile_units:new qo(t,e.u_pixels_to_tile_units),u_extrude_scale:new Zo(t,e.u_extrude_scale),u_overscale_factor:new qo(t,e.u_overscale_factor)}},collisionCircle:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_inv_matrix:new Ko(t,e.u_inv_matrix),u_camera_to_center_distance:new qo(t,e.u_camera_to_center_distance),u_viewport_size:new Zo(t,e.u_viewport_size)}},debug:function(t,e){return{u_color:new Ho(t,e.u_color),u_matrix:new Ko(t,e.u_matrix),u_overlay:new jo(t,e.u_overlay),u_overlay_scale:new qo(t,e.u_overlay_scale)}},clippingMask:function(t,e){return{u_matrix:new Ko(t,e.u_matrix)}},heatmap:function(t,e){return{u_extrude_scale:new qo(t,e.u_extrude_scale),u_intensity:new qo(t,e.u_intensity),u_matrix:new Ko(t,e.u_matrix)}},heatmapTexture:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_world:new Zo(t,e.u_world),u_image:new jo(t,e.u_image),u_color_ramp:new jo(t,e.u_color_ramp),u_opacity:new qo(t,e.u_opacity)}},hillshade:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_image:new jo(t,e.u_image),u_latrange:new Zo(t,e.u_latrange),u_light:new Zo(t,e.u_light),u_shadow:new Ho(t,e.u_shadow),u_highlight:new Ho(t,e.u_highlight),u_accent:new Ho(t,e.u_accent)}},hillshadePrepare:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_image:new jo(t,e.u_image),u_dimension:new Zo(t,e.u_dimension),u_zoom:new qo(t,e.u_zoom),u_unpack:new Wo(t,e.u_unpack)}},line:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_ratio:new qo(t,e.u_ratio),u_device_pixel_ratio:new qo(t,e.u_device_pixel_ratio),u_units_to_pixels:new Zo(t,e.u_units_to_pixels)}},lineGradient:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_ratio:new qo(t,e.u_ratio),u_device_pixel_ratio:new qo(t,e.u_device_pixel_ratio),u_units_to_pixels:new Zo(t,e.u_units_to_pixels),u_image:new jo(t,e.u_image),u_image_height:new qo(t,e.u_image_height)}},linePattern:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_texsize:new Zo(t,e.u_texsize),u_ratio:new qo(t,e.u_ratio),u_device_pixel_ratio:new qo(t,e.u_device_pixel_ratio),u_image:new jo(t,e.u_image),u_units_to_pixels:new Zo(t,e.u_units_to_pixels),u_scale:new Go(t,e.u_scale),u_fade:new qo(t,e.u_fade)}},lineSDF:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_ratio:new qo(t,e.u_ratio),u_device_pixel_ratio:new qo(t,e.u_device_pixel_ratio),u_units_to_pixels:new Zo(t,e.u_units_to_pixels),u_patternscale_a:new Zo(t,e.u_patternscale_a),u_patternscale_b:new Zo(t,e.u_patternscale_b),u_sdfgamma:new qo(t,e.u_sdfgamma),u_image:new jo(t,e.u_image),u_tex_y_a:new qo(t,e.u_tex_y_a),u_tex_y_b:new qo(t,e.u_tex_y_b),u_mix:new qo(t,e.u_mix)}},raster:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_tl_parent:new Zo(t,e.u_tl_parent),u_scale_parent:new qo(t,e.u_scale_parent),u_buffer_scale:new qo(t,e.u_buffer_scale),u_fade_t:new qo(t,e.u_fade_t),u_opacity:new qo(t,e.u_opacity),u_image0:new jo(t,e.u_image0),u_image1:new jo(t,e.u_image1),u_brightness_low:new qo(t,e.u_brightness_low),u_brightness_high:new qo(t,e.u_brightness_high),u_saturation_factor:new qo(t,e.u_saturation_factor),u_contrast_factor:new qo(t,e.u_contrast_factor),u_spin_weights:new Go(t,e.u_spin_weights)}},symbolIcon:function(t,e){return{u_is_size_zoom_constant:new jo(t,e.u_is_size_zoom_constant),u_is_size_feature_constant:new jo(t,e.u_is_size_feature_constant),u_size_t:new qo(t,e.u_size_t),u_size:new qo(t,e.u_size),u_camera_to_center_distance:new qo(t,e.u_camera_to_center_distance),u_pitch:new qo(t,e.u_pitch),u_rotate_symbol:new jo(t,e.u_rotate_symbol),u_aspect_ratio:new qo(t,e.u_aspect_ratio),u_fade_change:new qo(t,e.u_fade_change),u_matrix:new Ko(t,e.u_matrix),u_label_plane_matrix:new Ko(t,e.u_label_plane_matrix),u_coord_matrix:new Ko(t,e.u_coord_matrix),u_is_text:new jo(t,e.u_is_text),u_pitch_with_map:new jo(t,e.u_pitch_with_map),u_texsize:new Zo(t,e.u_texsize),u_texture:new jo(t,e.u_texture)}},symbolSDF:function(t,e){return{u_is_size_zoom_constant:new jo(t,e.u_is_size_zoom_constant),u_is_size_feature_constant:new jo(t,e.u_is_size_feature_constant),u_size_t:new qo(t,e.u_size_t),u_size:new qo(t,e.u_size),u_camera_to_center_distance:new qo(t,e.u_camera_to_center_distance),u_pitch:new qo(t,e.u_pitch),u_rotate_symbol:new jo(t,e.u_rotate_symbol),u_aspect_ratio:new qo(t,e.u_aspect_ratio),u_fade_change:new qo(t,e.u_fade_change),u_matrix:new Ko(t,e.u_matrix),u_label_plane_matrix:new Ko(t,e.u_label_plane_matrix),u_coord_matrix:new Ko(t,e.u_coord_matrix),u_is_text:new jo(t,e.u_is_text),u_pitch_with_map:new jo(t,e.u_pitch_with_map),u_texsize:new Zo(t,e.u_texsize),u_texture:new jo(t,e.u_texture),u_gamma_scale:new qo(t,e.u_gamma_scale),u_device_pixel_ratio:new qo(t,e.u_device_pixel_ratio),u_is_halo:new jo(t,e.u_is_halo)}},symbolTextAndIcon:function(t,e){return{u_is_size_zoom_constant:new jo(t,e.u_is_size_zoom_constant),u_is_size_feature_constant:new jo(t,e.u_is_size_feature_constant),u_size_t:new qo(t,e.u_size_t),u_size:new qo(t,e.u_size),u_camera_to_center_distance:new qo(t,e.u_camera_to_center_distance),u_pitch:new qo(t,e.u_pitch),u_rotate_symbol:new jo(t,e.u_rotate_symbol),u_aspect_ratio:new qo(t,e.u_aspect_ratio),u_fade_change:new qo(t,e.u_fade_change),u_matrix:new Ko(t,e.u_matrix),u_label_plane_matrix:new Ko(t,e.u_label_plane_matrix),u_coord_matrix:new Ko(t,e.u_coord_matrix),u_is_text:new jo(t,e.u_is_text),u_pitch_with_map:new jo(t,e.u_pitch_with_map),u_texsize:new Zo(t,e.u_texsize),u_texsize_icon:new Zo(t,e.u_texsize_icon),u_texture:new jo(t,e.u_texture),u_texture_icon:new jo(t,e.u_texture_icon),u_gamma_scale:new qo(t,e.u_gamma_scale),u_device_pixel_ratio:new qo(t,e.u_device_pixel_ratio),u_is_halo:new jo(t,e.u_is_halo)}},background:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_opacity:new qo(t,e.u_opacity),u_color:new Ho(t,e.u_color)}},backgroundPattern:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_opacity:new qo(t,e.u_opacity),u_image:new jo(t,e.u_image),u_pattern_tl_a:new Zo(t,e.u_pattern_tl_a),u_pattern_br_a:new Zo(t,e.u_pattern_br_a),u_pattern_tl_b:new Zo(t,e.u_pattern_tl_b),u_pattern_br_b:new Zo(t,e.u_pattern_br_b),u_texsize:new Zo(t,e.u_texsize),u_mix:new qo(t,e.u_mix),u_pattern_size_a:new Zo(t,e.u_pattern_size_a),u_pattern_size_b:new Zo(t,e.u_pattern_size_b),u_scale_a:new qo(t,e.u_scale_a),u_scale_b:new qo(t,e.u_scale_b),u_pixel_coord_upper:new Zo(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new Zo(t,e.u_pixel_coord_lower),u_tile_units_to_pixels:new qo(t,e.u_tile_units_to_pixels)}}};function Wf(t,e,r,n,i,o,a){for(var s=t.context,l=s.gl,u=t.useProgram("collisionBox"),c=[],p=0,h=0,f=0;f<n.length;f++){var d=n[f],m=e.getTile(d),y=m.getBucket(r);if(y){var g=d.posMatrix;0===i[0]&&0===i[1]||(g=t.translatePosMatrix(d.posMatrix,m,i,o));var v=a?y.textCollisionBox:y.iconCollisionBox,_=y.collisionCircleArray;if(_.length>0){var x=Ca(),b=g;Oa(x,y.placementInvProjMatrix,t.transform.glCoordMatrix),Oa(x,x,y.placementViewportMatrix),c.push({circleArray:_,circleOffset:h,transform:b,invTransform:x}),h=p+=_.length/4}v&&u.draw(s,l.LINES,xp.disabled,bp.disabled,t.colorModeForRenderPass(),Sp.disabled,Ef(g,t.transform,m),r.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,null,t.transform.zoom,null,null,v.collisionVertexBuffer)}}if(a&&c.length){var w=t.useProgram("collisionCircle"),S=new so;S.resize(4*p),S._trim();for(var k=0,T=0,E=c;T<E.length;T+=1)for(var I=E[T],z=0;z<I.circleArray.length/4;z++){var C=4*z,A=I.circleArray[C+0],P=I.circleArray[C+1],D=I.circleArray[C+2],M=I.circleArray[C+3];S.emplace(k++,A,P,D,M,0),S.emplace(k++,A,P,D,M,1),S.emplace(k++,A,P,D,M,2),S.emplace(k++,A,P,D,M,3)}(!Nf||Nf.length<2*p)&&(Nf=function(t){var e=2*t,r=new uo;r.resize(e),r._trim();for(var n=0;n<e;n++){var i=6*n;r.uint16[i+0]=4*n+0,r.uint16[i+1]=4*n+1,r.uint16[i+2]=4*n+2,r.uint16[i+3]=4*n+2,r.uint16[i+4]=4*n+3,r.uint16[i+5]=4*n+0}return r}(p));for(var L=s.createIndexBuffer(Nf,!0),R=s.createVertexBuffer(S,wl.members,!0),B=0,O=c;B<O.length;B+=1){var F=O[B],N=If(F.transform,F.invTransform,t.transform);w.draw(s,l.TRIANGLES,xp.disabled,bp.disabled,t.colorModeForRenderPass(),Sp.disabled,N,r.id,R,L,Ao.simpleSegment(0,2*F.circleOffset,F.circleArray.length,F.circleArray.length/2),null,t.transform.zoom,null,null,null)}R.destroy(),L.destroy()}}var Hf=Aa(new Float32Array(16));function Xf(t,e,r,n,o,a){var s=ru(t),l=-(s.horizontalAlign-.5)*e,u=-(s.verticalAlign-.5)*r,c=lu(t,n);return new i((l/o+c[0])*a,(u/o+c[1])*a)}function Kf(t,e,r,n,o,a,s,l,u,c,p){var h=t.text.placedSymbolArray,f=t.text.dynamicLayoutVertexArray,d=t.icon.dynamicLayoutVertexArray,m={};f.clear();for(var y=0;y<h.length;y++){var g=h.get(y),v=g.hidden||!g.crossTileID||t.allowVerticalPlacement&&!g.placedOrientation?null:n[g.crossTileID];if(v){var _=new i(g.anchorX,g.anchorY),x=Kp(_,r?l:s),b=Yp(a.cameraToCenterDistance,x.signedDistanceFromCamera),w=o.evaluateSizeForFeature(t.textSizeData,c,g)*b/24;r&&(w*=t.tilePixelRatio/u);for(var S=Xf(v.anchor,v.width,v.height,v.textOffset,v.textBoxScale,w),k=r?Kp(_.add(S),s).point:x.point.add(e?S.rotate(-a.angle):S),T=t.allowVerticalPlacement&&g.placedOrientation===$l.vertical?Math.PI/2:0,E=0;E<g.numGlyphs;E++)hu(f,k,T);p&&g.associatedIconIndex>=0&&(m[g.associatedIconIndex]={shiftedAnchor:k,angle:T})}else oh(g.numGlyphs,f)}if(p){d.clear();for(var I=t.icon.placedSymbolArray,z=0;z<I.length;z++){var C=I.get(z);if(C.hidden)oh(C.numGlyphs,d);else{var A=m[z];if(A)for(var P=0;P<C.numGlyphs;P++)hu(d,A.shiftedAnchor,A.angle);else oh(C.numGlyphs,d)}}t.icon.dynamicLayoutVertexBuffer.updateData(d)}t.text.dynamicLayoutVertexBuffer.updateData(f)}function Yf(t,e,r){return r.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function Qf(t,e,r,n,i,o,a,s,l,u,c,p){for(var h=t.context,f=h.gl,d=t.transform,m="map"===s,y="map"===l,g=m&&"point"!==r.layout.get("symbol-placement"),v=m&&!y&&!g,_=void 0!==r.layout.get("symbol-sort-key").constantOr(1),x=!1,b=t.depthModeForSublayer(0,xp.ReadOnly),w=r.layout.get("text-variable-anchor"),S=[],k=0,T=n;k<T.length;k+=1){var E=T[k],I=e.getTile(E),z=I.getBucket(r);if(z){var C=i?z.text:z.icon;if(C&&C.segments.get().length){var A=C.programConfigurations.get(r.id),P=i||z.sdfIcons,D=i?z.textSizeData:z.iconSizeData,M=y||0!==d.pitch,L=t.useProgram(Yf(P,i,z),A),R=ou(D,d.zoom),B=void 0,O=[0,0],F=void 0,N=void 0,V=null,U=void 0;if(i)F=I.glyphAtlasTexture,N=f.LINEAR,B=I.glyphAtlasTexture.size,z.iconsInText&&(O=I.imageAtlasTexture.size,V=I.imageAtlasTexture,U=M||t.options.rotating||t.options.zooming||"composite"===D.kind||"camera"===D.kind?f.LINEAR:f.NEAREST);else{var j=1!==r.layout.get("icon-size").constantOr(0)||z.iconsNeedLinear;F=I.imageAtlasTexture,N=P||t.options.rotating||t.options.zooming||j||M?f.LINEAR:f.NEAREST,B=I.imageAtlasTexture.size}var q=lh(I,1,t.transform.zoom),Z=Hp(E.posMatrix,y,m,t.transform,q),G=Xp(E.posMatrix,y,m,t.transform,q),W=w&&z.hasTextData(),H="none"!==r.layout.get("icon-text-fit")&&W&&z.hasIconData();g&&$p(z,E.posMatrix,t,i,Z,G,y,u);var X=t.translatePosMatrix(E.posMatrix,I,o,a),K=g||i&&w||H?Hf:Z,Y=t.translatePosMatrix(G,I,o,a,!0),Q=P&&0!==r.paint.get(i?"text-halo-width":"icon-halo-width").constantOr(1),$={program:L,buffers:C,uniformValues:P?z.iconsInText?jf(D.kind,R,v,y,t,X,K,Y,B,O):Uf(D.kind,R,v,y,t,X,K,Y,i,B,!0):Vf(D.kind,R,v,y,t,X,K,Y,i,B),atlasTexture:F,atlasTextureIcon:V,atlasInterpolation:N,atlasInterpolationIcon:U,isSDF:P,hasHalo:Q};if(_&&z.canOverlap){x=!0;for(var J=0,tt=C.segments.get();J<tt.length;J+=1){var et=tt[J];S.push({segments:new Ao([et]),sortKey:et.sortKey,state:$})}}else S.push({segments:C.segments,sortKey:0,state:$})}}}x&&S.sort((function(t,e){return t.sortKey-e.sortKey}));for(var rt=0,nt=S;rt<nt.length;rt+=1){var it=nt[rt],ot=it.state;if(h.activeTexture.set(f.TEXTURE0),ot.atlasTexture.bind(ot.atlasInterpolation,f.CLAMP_TO_EDGE),ot.atlasTextureIcon&&(h.activeTexture.set(f.TEXTURE1),ot.atlasTextureIcon&&ot.atlasTextureIcon.bind(ot.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),ot.isSDF){var at=ot.uniformValues;ot.hasHalo&&(at.u_is_halo=1,$f(ot.buffers,it.segments,r,t,ot.program,b,c,p,at)),at.u_is_halo=0}$f(ot.buffers,it.segments,r,t,ot.program,b,c,p,ot.uniformValues)}}function $f(t,e,r,n,i,o,a,s,l){var u=n.context;i.draw(u,u.gl.TRIANGLES,o,a,s,Sp.disabled,l,r.id,t.layoutVertexBuffer,t.indexBuffer,e,r.paint,n.transform.zoom,t.programConfigurations.get(r.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Jf(t,e,r,n,i,o,a){var s,l,u,c,p,h=t.context.gl,f=r.paint.get("fill-pattern"),d=f&&f.constantOr(1),m=r.getCrossfadeParameters();a?(l=d&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=h.LINES):(l=d?"fillPattern":"fill",s=h.TRIANGLES);for(var y=0,g=n;y<g.length;y+=1){var v=g[y],_=e.getTile(v);if(!d||_.patternsLoaded()){var x=_.getBucket(r);if(x){var b=x.programConfigurations.get(r.id),w=t.useProgram(l,b);d&&(t.context.activeTexture.set(h.TEXTURE0),_.imageAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),b.updatePaintBuffers(m));var S=f.constantOr(null);if(S&&_.imageAtlas){var k=_.imageAtlas,T=k.patternPositions[S.to.toString()],E=k.patternPositions[S.from.toString()];T&&E&&b.setConstantPatternPositions(T,E)}var I=t.translatePosMatrix(v.posMatrix,_,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(a){c=x.indexBuffer2,p=x.segments2;var z=[h.drawingBufferWidth,h.drawingBufferHeight];u="fillOutlinePattern"===l&&d?kf(I,t,m,_,z):Sf(I,z)}else c=x.indexBuffer,p=x.segments,u=d?wf(I,t,m,_):bf(I);w.draw(t.context,s,i,t.stencilModeForClipping(v),o,Sp.disabled,u,r.id,x.layoutVertexBuffer,c,p,r.paint,t.transform.zoom,b)}}}}function td(t,e,r,n,i,o,a){for(var s=t.context,l=s.gl,u=r.paint.get("fill-extrusion-pattern"),c=u.constantOr(1),p=r.getCrossfadeParameters(),h=r.paint.get("fill-extrusion-opacity"),f=0,d=n;f<d.length;f+=1){var m=d[f],y=e.getTile(m),g=y.getBucket(r);if(g){var v=g.programConfigurations.get(r.id),_=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",v);c&&(t.context.activeTexture.set(l.TEXTURE0),y.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePaintBuffers(p));var x=u.constantOr(null);if(x&&y.imageAtlas){var b=y.imageAtlas,w=b.patternPositions[x.to.toString()],S=b.patternPositions[x.from.toString()];w&&S&&v.setConstantPatternPositions(w,S)}var k=t.translatePosMatrix(m.posMatrix,y,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),T=r.paint.get("fill-extrusion-vertical-gradient"),E=c?xf(k,t,T,h,m,p,y):_f(k,t,T,h);_.draw(s,s.gl.TRIANGLES,i,o,a,Sp.backCCW,E,r.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,r.paint,t.transform.zoom,v)}}}function ed(t,e,r,n,i,o){var a=t.context,s=a.gl,l=e.fbo;if(l){var u=t.useProgram("hillshade");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,l.colorAttachment.get());var c=function(t,e,r){var n=r.paint.get("hillshade-shadow-color"),i=r.paint.get("hillshade-highlight-color"),o=r.paint.get("hillshade-accent-color"),a=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(a-=t.transform.angle);var s,l,u,c=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),c),u_image:0,u_latrange:(s=e.tileID,l=Math.pow(2,s.canonical.z),u=s.canonical.y,[new oc(0,u/l).toLngLat().lat,new oc(0,(u+1)/l).toLngLat().lat]),u_light:[r.paint.get("hillshade-exaggeration"),a],u_shadow:n,u_highlight:i,u_accent:o}}(t,e,r);u.draw(a,s.TRIANGLES,n,i,o,Sp.disabled,c,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function rd(t,e,r,n,i,o){var a=t.context,s=a.gl,l=e.dem;if(l&&l.data){var u=l.dim,c=l.stride,p=l.getPixels();if(a.activeTexture.set(s.TEXTURE1),a.pixelStoreUnpackPremultiplyAlpha.set(!1),e.demTexture=e.demTexture||t.getTileTexture(c),e.demTexture){var h=e.demTexture;h.update(p,{premultiply:!1}),h.bind(s.NEAREST,s.CLAMP_TO_EDGE)}else e.demTexture=new Mu(a,p,s.RGBA,{premultiply:!1}),e.demTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE);a.activeTexture.set(s.TEXTURE0);var f=e.fbo;if(!f){var d=new Mu(a,{width:u,height:u,data:null},s.RGBA);d.bind(s.LINEAR,s.CLAMP_TO_EDGE),(f=e.fbo=a.createFramebuffer(u,u,!0)).colorAttachment.set(d.texture)}a.bindFramebuffer.set(f.framebuffer),a.viewport.set([0,0,u,u]),t.useProgram("hillshadePrepare").draw(a,s.TRIANGLES,n,i,o,Sp.disabled,function(t,e){var r=e.stride,n=Ca();return Ba(n,0,8192,-8192,0,0,1),Ma(n,n,[0,-8192,0]),{u_matrix:n,u_image:1,u_dimension:[r,r],u_zoom:t.overscaledZ,u_unpack:e.getUnpackVector()}}(e.tileID,l),r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),e.needsHillshadePrepare=!1}}function nd(t,e,r,n,i){var o=n.paint.get("raster-fade-duration");if(o>0){var a=V.now(),s=(a-t.timeAdded)/o,l=e?(a-e.timeAdded)/o:-1,u=r.getSource(),c=i.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),h=!e||Math.abs(e.tileID.overscaledZ-c)>Math.abs(t.tileID.overscaledZ-c),f=h&&t.refreshedUponExpiration?1:p(h?s:1-l,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),e?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}var id=new me(1,0,0,1),od=new me(0,1,0,1),ad=new me(0,0,1,1),sd=new me(1,0,1,1),ld=new me(0,1,1,1);function ud(t,e,r,n){pd(t,0,e+r/2,t.transform.width,r,n)}function cd(t,e,r,n){pd(t,e-r/2,0,r,t.transform.height,n)}function pd(t,e,r,n,i,o){var a=t.context,s=a.gl;s.enable(s.SCISSOR_TEST),s.scissor(e*V.devicePixelRatio,r*V.devicePixelRatio,n*V.devicePixelRatio,i*V.devicePixelRatio),a.clear({color:o}),s.disable(s.SCISSOR_TEST)}function hd(t,e,r){var n=t.context,i=n.gl,o=r.posMatrix,a=t.useProgram("debug"),s=xp.disabled,l=bp.disabled,u=t.colorModeForRenderPass();n.activeTexture.set(i.TEXTURE0),t.emptyTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE),a.draw(n,i.LINE_STRIP,s,l,u,Sp.disabled,zf(o,me.red),"$debug",t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments);var c=e.getTileByID(r.key).latestRawTileData,p=Math.floor((c&&c.byteLength||0)/1024),h=e.getTile(r).tileSize,f=512/Math.min(h,512)*(r.overscaledZ/t.transform.zoom)*.5,d=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(d+=" => "+r.overscaledZ),function(t,e){t.initDebugOverlayCanvas();var r=t.debugOverlayCanvas,n=t.context.gl,i=t.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,r.width,r.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(e,5,5),i.strokeText(e,5,5),t.debugOverlayTexture.update(r),t.debugOverlayTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}(t,d+" "+p+"kb"),a.draw(n,i.TRIANGLES,s,l,wp.alphaBlended,Sp.disabled,zf(o,me.transparent,f),"$debug",t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments)}var fd={symbol:function(t,e,r,n,i){if("translucent"===t.renderPass){var o=bp.disabled,a=t.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(t,e,r,n,i,o,a){for(var s=e.transform,l="map"===i,u="map"===o,c=0,p=t;c<p.length;c+=1){var h=p[c],f=n.getTile(h),d=f.getBucket(r);if(d&&d.text&&d.text.segments.get().length){var m=ou(d.textSizeData,s.zoom),y=lh(f,1,e.transform.zoom),g=Hp(h.posMatrix,u,l,e.transform,y),v="none"!==r.layout.get("icon-text-fit")&&d.hasIconData();if(m){var _=Math.pow(2,s.zoom-f.tileID.overscaledZ);Kf(d,l,u,a,au,s,g,h.posMatrix,_,m,v)}}}}(n,t,r,e,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),i),0!==r.paint.get("icon-opacity").constantOr(1)&&Qf(t,e,r,n,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),o,a),0!==r.paint.get("text-opacity").constantOr(1)&&Qf(t,e,r,n,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),o,a),e.map.showCollisionBoxes&&(Wf(t,e,r,n,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Wf(t,e,r,n,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))}},circle:function(t,e,r,n){if("translucent"===t.renderPass){var i=r.paint.get("circle-opacity"),o=r.paint.get("circle-stroke-width"),a=r.paint.get("circle-stroke-opacity"),s=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0!==i.constantOr(1)||0!==o.constantOr(1)&&0!==a.constantOr(1)){for(var l=t.context,u=l.gl,c=t.depthModeForSublayer(0,xp.ReadOnly),p=bp.disabled,h=t.colorModeForRenderPass(),f=[],d=0;d<n.length;d++){var m=n[d],y=e.getTile(m),g=y.getBucket(r);if(g){var v=g.programConfigurations.get(r.id),_={programConfiguration:v,program:t.useProgram("circle",v),layoutVertexBuffer:g.layoutVertexBuffer,indexBuffer:g.indexBuffer,uniformValues:Tf(t,m,y,r)};if(s)for(var x=0,b=g.segments.get();x<b.length;x+=1){var w=b[x];f.push({segments:new Ao([w]),sortKey:w.sortKey,state:_})}else f.push({segments:g.segments,sortKey:0,state:_})}}s&&f.sort((function(t,e){return t.sortKey-e.sortKey}));for(var S=0,k=f;S<k.length;S+=1){var T=k[S],E=T.state;E.program.draw(l,u.TRIANGLES,c,p,h,Sp.disabled,E.uniformValues,r.id,E.layoutVertexBuffer,E.indexBuffer,T.segments,r.paint,t.transform.zoom,E.programConfiguration)}}}},heatmap:function(t,e,r,n){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var i=t.context,o=i.gl,a=bp.disabled,s=new wp([o.ONE,o.ONE],me.transparent,[!0,!0,!0,!0]);!function(t,e,r){var n=t.gl;t.activeTexture.set(n.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var i=r.heatmapFbo;if(i)n.bindTexture(n.TEXTURE_2D,i.colorAttachment.get()),t.bindFramebuffer.set(i.framebuffer);else{var o=n.createTexture();n.bindTexture(n.TEXTURE_2D,o),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),i=r.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,r,n){var i=t.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e.width/4,e.height/4,0,i.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),n.colorAttachment.set(r)}(t,e,o,i)}}(i,t,r),i.clear({color:me.transparent});for(var l=0;l<n.length;l++){var u=n[l];if(!e.hasRenderableParent(u)){var c=e.getTile(u),p=c.getBucket(r);if(p){var h=p.programConfigurations.get(r.id);t.useProgram("heatmap",h).draw(i,o.TRIANGLES,xp.disabled,a,s,Sp.disabled,Af(u.posMatrix,c,t.transform.zoom,r.paint.get("heatmap-intensity")),r.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,r.paint,t.transform.zoom,h)}}}i.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,e){var r=t.context,n=r.gl,i=e.heatmapFbo;if(i){r.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,i.colorAttachment.get()),r.activeTexture.set(n.TEXTURE1);var o=e.colorRampTexture;o||(o=e.colorRampTexture=new Mu(r,e.colorRamp,n.RGBA)),o.bind(n.LINEAR,n.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(r,n.TRIANGLES,xp.disabled,bp.disabled,t.colorModeForRenderPass(),Sp.disabled,function(t,e,r,n){var i=Ca();Ba(i,0,t.width,t.height,0,0,1);var o=t.context.gl;return{u_matrix:i,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:e.paint.get("heatmap-opacity")}}(t,e),e.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,e.paint,t.transform.zoom)}}(t,r))},line:function(t,e,r,n){if("translucent"===t.renderPass){var i=r.paint.get("line-opacity"),o=r.paint.get("line-width");if(0!==i.constantOr(1)&&0!==o.constantOr(1))for(var a,s=t.depthModeForSublayer(0,xp.ReadOnly),l=t.colorModeForRenderPass(),u=r.paint.get("line-dasharray"),c=r.paint.get("line-pattern"),h=c.constantOr(1),f=r.paint.get("line-gradient"),d=r.getCrossfadeParameters(),m=h?"linePattern":u?"lineSDF":f?"lineGradient":"line",y=t.context,g=y.gl,v=!0,_=0,x=n;_<x.length;_+=1){var b=x[_],w=e.getTile(b);if(!h||w.patternsLoaded()){var S=w.getBucket(r);if(S){var k=S.programConfigurations.get(r.id),T=t.context.program.get(),E=t.useProgram(m,k),I=v||E.program!==T,z=c.constantOr(null);if(z&&w.imageAtlas){var C=w.imageAtlas,A=C.patternPositions[z.to.toString()],P=C.patternPositions[z.from.toString()];A&&P&&k.setConstantPatternPositions(A,P)}var D=h?Mf(t,w,r,d):u?Lf(t,w,r,u,d):f?Df(t,w,r,S.lineClipsArray.length):Pf(t,w,r);if(h)y.activeTexture.set(g.TEXTURE0),w.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),k.updatePaintBuffers(d);else if(u&&(I||t.lineAtlas.dirty))y.activeTexture.set(g.TEXTURE0),t.lineAtlas.bind(y);else if(f){var M=S.gradients[r.id],L=M.texture;if(r.gradientVersion!==M.version){var R=256;if(r.stepInterpolant){var B=e.getSource().maxzoom,O=b.canonical.z===B?Math.ceil(1<<t.transform.maxZoom-b.canonical.z):1;R=p((a=S.maxLineLength/8192*1024*O)<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2)),256,y.maxTextureSize)}M.gradient=$a({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:R,image:M.gradient||void 0,clips:S.lineClipsArray}),M.texture?M.texture.update(M.gradient):M.texture=new Mu(y,M.gradient,g.RGBA),M.version=r.gradientVersion,L=M.texture}y.activeTexture.set(g.TEXTURE0),L.bind(r.stepInterpolant?g.NEAREST:g.LINEAR,g.CLAMP_TO_EDGE)}E.draw(y,g.TRIANGLES,s,t.stencilModeForClipping(b),l,Sp.disabled,D,r.id,S.layoutVertexBuffer,S.indexBuffer,S.segments,r.paint,t.transform.zoom,k,S.layoutVertexBuffer2),v=!1}}}}},fill:function(t,e,r,n){var i=r.paint.get("fill-color"),o=r.paint.get("fill-opacity");if(0!==o.constantOr(1)){var a=t.colorModeForRenderPass(),s=r.paint.get("fill-pattern"),l=t.opaquePassEnabledForLayer()&&!s.constantOr(1)&&1===i.constantOr(me.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(t.renderPass===l){var u=t.depthModeForSublayer(1,"opaque"===t.renderPass?xp.ReadWrite:xp.ReadOnly);Jf(t,e,r,n,u,a,!1)}if("translucent"===t.renderPass&&r.paint.get("fill-antialias")){var c=t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,xp.ReadOnly);Jf(t,e,r,n,c,a,!0)}}},"fill-extrusion":function(t,e,r,n){var i=r.paint.get("fill-extrusion-opacity");if(0!==i&&"translucent"===t.renderPass){var o=new xp(t.context.gl.LEQUAL,xp.ReadWrite,t.depthRangeFor3D);if(1!==i||r.paint.get("fill-extrusion-pattern").constantOr(1))td(t,e,r,n,o,bp.disabled,wp.disabled),td(t,e,r,n,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var a=t.colorModeForRenderPass();td(t,e,r,n,o,bp.disabled,a)}}},hillshade:function(t,e,r,n){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var i=t.context,o=t.depthModeForSublayer(0,xp.ReadOnly),a=t.colorModeForRenderPass(),s="translucent"===t.renderPass?t.stencilConfigForOverlap(n):[{},n],l=s[0],u=0,c=s[1];u<c.length;u+=1){var p=c[u],h=e.getTile(p);h.needsHillshadePrepare&&"offscreen"===t.renderPass?rd(t,h,r,o,bp.disabled,a):"translucent"===t.renderPass&&ed(t,h,r,o,l[p.overscaledZ],a)}i.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,r,n){if("translucent"===t.renderPass&&0!==r.paint.get("raster-opacity")&&n.length)for(var i=t.context,o=i.gl,a=e.getSource(),s=t.useProgram("raster"),l=t.colorModeForRenderPass(),u=a instanceof vc?[{},n]:t.stencilConfigForOverlap(n),c=u[0],p=u[1],h=p[p.length-1].overscaledZ,f=!t.options.moving,d=0,m=p;d<m.length;d+=1){var y=m[d],g=t.depthModeForSublayer(y.overscaledZ-h,1===r.paint.get("raster-opacity")?xp.ReadWrite:xp.ReadOnly,o.LESS),v=e.getTile(y),_=t.transform.calculatePosMatrix(y.toUnwrapped(),f);v.registerFadeDuration(r.paint.get("raster-fade-duration"));var x=e.findLoadedParent(y,0),b=nd(v,x,e,r,t.transform),w=void 0,S=void 0,k="nearest"===r.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;i.activeTexture.set(o.TEXTURE0),v.texture.bind(k,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(o.TEXTURE1),x?(x.texture.bind(k,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),w=Math.pow(2,x.tileID.overscaledZ-v.tileID.overscaledZ),S=[v.tileID.canonical.x*w%1,v.tileID.canonical.y*w%1]):v.texture.bind(k,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var T=Of(_,S||[0,0],w||1,b,r);a instanceof vc?s.draw(i,o.TRIANGLES,g,bp.disabled,l,Sp.disabled,T,r.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):s.draw(i,o.TRIANGLES,g,c[y.overscaledZ],l,Sp.disabled,T,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,r){var n=r.paint.get("background-color"),i=r.paint.get("background-opacity");if(0!==i){var o=t.context,a=o.gl,s=t.transform,l=s.tileSize,u=r.paint.get("background-pattern");if(!t.isPatternMissing(u)){var c=!u&&1===n.a&&1===i&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===c){var p=bp.disabled,h=t.depthModeForSublayer(0,"opaque"===c?xp.ReadWrite:xp.ReadOnly),f=t.colorModeForRenderPass(),d=t.useProgram(u?"backgroundPattern":"background"),m=s.coveringTiles({tileSize:l});u&&(o.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));for(var y=r.getCrossfadeParameters(),g=0,v=m;g<v.length;g+=1){var _=v[g],x=t.transform.calculatePosMatrix(_.toUnwrapped()),b=u?Zf(x,i,t,u,{tileID:_,tileSize:l},y):qf(x,i,n);d.draw(o,a.TRIANGLES,h,p,f,Sp.disabled,b,r.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,r){for(var n=0;n<r.length;n++)hd(t,e,r[n])},custom:function(t,e,r){var n=t.context,i=r.implementation;if("offscreen"===t.renderPass){var o=i.prerender;o&&(t.setCustomLayerDefaults(),n.setColorMode(t.colorModeForRenderPass()),o.call(i,n.gl,t.transform.customLayerMatrix()),n.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),n.setColorMode(t.colorModeForRenderPass()),n.setStencilMode(bp.disabled);var a="3d"===i.renderingMode?new xp(t.context.gl.LEQUAL,xp.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,xp.ReadOnly);n.setDepthMode(a),i.render(n.gl,t.transform.customLayerMatrix()),n.setDirty(),t.setBaseState(),n.bindFramebuffer.set(null)}}},dd=function(t,e){this.context=new kp(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=Tp.maxUnderzooming+Tp.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Mh,this.gpuTimers={}};dd.prototype.resize=function(t,e){if(this.width=t*V.devicePixelRatio,this.height=e*V.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,n=this.style._order;r<n.length;r+=1)this.style._layers[n[r]].resize()},dd.prototype.setup=function(){var t=this.context,e=new Yi;e.emplaceBack(0,0),e.emplaceBack(8192,0),e.emplaceBack(0,8192),e.emplaceBack(8192,8192),this.tileExtentBuffer=t.createVertexBuffer(e,Nh.members),this.tileExtentSegments=Ao.simpleSegment(0,0,4,2);var r=new Yi;r.emplaceBack(0,0),r.emplaceBack(8192,0),r.emplaceBack(0,8192),r.emplaceBack(8192,8192),this.debugBuffer=t.createVertexBuffer(r,Nh.members),this.debugSegments=Ao.simpleSegment(0,0,4,5);var n=new Qi;n.emplaceBack(0,0,0,0),n.emplaceBack(8192,0,8192,0),n.emplaceBack(0,8192,0,8192),n.emplaceBack(8192,8192,8192,8192),this.rasterBoundsBuffer=t.createVertexBuffer(n,gc.members),this.rasterBoundsSegments=Ao.simpleSegment(0,0,4,2);var i=new Yi;i.emplaceBack(0,0),i.emplaceBack(1,0),i.emplaceBack(0,1),i.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(i,Nh.members),this.viewportSegments=Ao.simpleSegment(0,0,4,2);var o=new go;o.emplaceBack(0),o.emplaceBack(1),o.emplaceBack(3),o.emplaceBack(2),o.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(o);var a=new uo;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(a),this.emptyTexture=new Mu(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA);var s=this.context.gl;this.stencilClearMode=new bp({func:s.ALWAYS,mask:0},0,255,s.ZERO,s.ZERO,s.ZERO)},dd.prototype.clearStencil=function(){var t=this.context,e=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var r=Ca();Ba(r,0,this.width,this.height,0,0,1),La(r,r,[e.drawingBufferWidth,e.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,e.TRIANGLES,xp.disabled,this.stencilClearMode,wp.disabled,Sp.disabled,Cf(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},dd.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var r=this.context,n=r.gl;this.nextStencilID+e.length>256&&this.clearStencil(),r.setColorMode(wp.disabled),r.setDepthMode(xp.disabled);var i=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],l=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;i.draw(r,n.TRIANGLES,xp.disabled,new bp({func:n.ALWAYS,mask:0},l,255,n.KEEP,n.KEEP,n.REPLACE),wp.disabled,Sp.disabled,Cf(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},dd.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new bp({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},dd.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new bp({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},dd.prototype.stencilConfigForOverlap=function(t){var e,r=this.context.gl,n=t.sort((function(t,e){return e.overscaledZ-t.overscaledZ})),i=n[n.length-1].overscaledZ,o=n[0].overscaledZ-i+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(var a={},s=0;s<o;s++)a[s+i]=new bp({func:r.GEQUAL,mask:255},s+this.nextStencilID,255,r.KEEP,r.KEEP,r.REPLACE);return this.nextStencilID+=o,[a,n]}return[(e={},e[i]=bp.disabled,e),n]},dd.prototype.colorModeForRenderPass=function(){var t=this.context.gl;return this._showOverdrawInspector?new wp([t.CONSTANT_COLOR,t.ONE],new me(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?wp.unblended:wp.alphaBlended},dd.prototype.depthModeForSublayer=function(t,e,r){if(!this.opaquePassEnabledForLayer())return xp.disabled;var n=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new xp(r||this.context.gl.LEQUAL,e,[n,n])},dd.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},dd.prototype.render=function(t,e){var r=this;this.style=t,this.options=e,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(V.now()),this.imageManager.beginFrame();var n=this.style._order,i=this.style.sourceCaches;for(var o in i){var a=i[o];a.used&&a.prepare(this.context)}var s,l,u={},c={},p={};for(var h in i){var f=i[h];u[h]=f.getVisibleCoordinates(),c[h]=u[h].slice().reverse(),p[h]=f.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var m=0;m<n.length;m++)if(this.style._layers[n[m]].is3D()){this.opaquePassCutoff=m;break}this.renderPass="offscreen";for(var y=0,g=n;y<g.length;y+=1){var v=this.style._layers[g[y]];if(v.hasOffscreenPass()&&!v.isHidden(this.transform.zoom)){var _=c[v.source];("custom"===v.type||_.length)&&this.renderLayer(this,i[v.source],v,_)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:e.showOverdrawInspector?me.black:me.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=e.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=n.length-1;this.currentLayer>=0;this.currentLayer--){var x=this.style._layers[n[this.currentLayer]],b=i[x.source],w=u[x.source];this._renderTileClippingMasks(x,w),this.renderLayer(this,b,x,w)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<n.length;this.currentLayer++){var S=this.style._layers[n[this.currentLayer]],k=i[S.source],T=("symbol"===S.type?p:c)[S.source];this._renderTileClippingMasks(S,u[S.source]),this.renderLayer(this,k,S,T)}this.options.showTileBoundaries&&(d(this.style._layers).forEach((function(t){t.source&&!t.isHidden(r.transform.zoom)&&(t.source!==(l&&l.id)&&(l=r.style.sourceCaches[t.source]),(!s||s.getSource().maxzoom<l.getSource().maxzoom)&&(s=l))})),s&&fd.debug(this,s,s.getVisibleCoordinates())),this.options.showPadding&&function(t){var e=t.transform.padding;ud(t,t.transform.height-(e.top||0),3,id),ud(t,e.bottom||0,3,od),cd(t,e.left||0,3,ad),cd(t,t.transform.width-(e.right||0),3,sd);var r=t.transform.centerPoint;!function(t,e,r,n){pd(t,e-1,r-10,2,20,n),pd(t,e-10,r-1,20,2,n)}(t,r.x,t.transform.height-r.y,ld)}(this),this.context.setDefault()},dd.prototype.renderLayer=function(t,e,r,n){r.isHidden(this.transform.zoom)||("background"===r.type||"custom"===r.type||n.length)&&(this.id=r.id,this.gpuTimingStart(r),fd[r.type](t,e,r,n,this.style.placement.variableOffsets),this.gpuTimingEnd())},dd.prototype.gpuTimingStart=function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,r=this.gpuTimers[t.id];r||(r=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),r.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,r.query)}},dd.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}},dd.prototype.collectGpuTimers=function(){var t=this.gpuTimers;return this.gpuTimers={},t},dd.prototype.queryGpuTimers=function(t){var e={};for(var r in t){var n=t[r],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(n.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(n.query),e[r]=o}return e},dd.prototype.translatePosMatrix=function(t,e,r,n,i){if(!r[0]&&!r[1])return t;var o=i?"map"===n?this.transform.angle:0:"viewport"===n?-this.transform.angle:0;if(o){var a=Math.sin(o),s=Math.cos(o);r=[r[0]*s-r[1]*a,r[0]*a+r[1]*s]}var l=[i?r[0]:lh(e,r[0],this.transform.zoom),i?r[1]:lh(e,r[1],this.transform.zoom),0],u=new Float32Array(16);return Ma(u,t,l),u},dd.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},dd.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},dd.prototype.isPatternMissing=function(t){if(!t)return!1;if(!t.from||!t.to)return!0;var e=this.imageManager.getPattern(t.from.toString()),r=this.imageManager.getPattern(t.to.toString());return!e||!r},dd.prototype.useProgram=function(t,e){this.cache=this.cache||{};var r=""+t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[r]||(this.cache[r]=new gf(this.context,t,df[t],e,Gf[t],this._showOverdrawInspector)),this.cache[r]},dd.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},dd.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)},dd.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=a.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Mu(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},dd.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var md=function(t,e){this.points=t,this.planes=e};md.fromInvProjectionMatrix=function(t,e,r){var n=Math.pow(2,r),i=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(e){return Ua([],e,t)})).map((function(t){return function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}([],t,1/t[3]/e*n)})),o=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(t){var e,r,n=function(t,e){var r=e[0],n=e[1],i=e[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}([],function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],l=r[2];return t[0]=i*l-o*s,t[1]=o*a-n*l,t[2]=n*s-i*a,t}([],Va([],i[t[0]],i[t[1]]),Va([],i[t[2]],i[t[1]]))),o=-((e=n)[0]*(r=i[t[1]])[0]+e[1]*r[1]+e[2]*r[2]);return n.concat(o)}));return new md(i,o)};var yd=function(t,e){this.min=t,this.max=e,this.center=function(t,e,r){return t[0]=.5*e[0],t[1]=.5*e[1],t[2]=.5*e[2],t}([],function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}([],this.min,this.max))};yd.prototype.quadrant=function(t){for(var e=[t%2==0,t<2],r=Fa(this.min),n=Fa(this.max),i=0;i<e.length;i++)r[i]=e[i]?this.min[i]:this.center[i],n[i]=e[i]?this.center[i]:this.max[i];return n[2]=this.max[2],new yd(r,n)},yd.prototype.distanceX=function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]},yd.prototype.distanceY=function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]},yd.prototype.intersects=function(t){for(var e,r,n=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],i=!0,o=0;o<t.planes.length;o++){for(var a=t.planes[o],s=0,l=0;l<n.length;l++)s+=(e=a)[0]*(r=n[l])[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3]>=0;if(0===s)return 0;s!==n.length&&(i=!1)}if(i)return 2;for(var u=0;u<3;u++){for(var c=Number.MAX_VALUE,p=-Number.MAX_VALUE,h=0;h<t.points.length;h++){var f=t.points[h][u]-this.min[u];c=Math.min(c,f),p=Math.max(p,f)}if(p<0||c>this.max[u]-this.min[u])return 0}return 1};var gd=function(t,e,r,n){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0),isNaN(t)||t<0||isNaN(e)||e<0||isNaN(r)||r<0||isNaN(n)||n<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=r,this.right=n};gd.prototype.interpolate=function(t,e,r){return null!=e.top&&null!=t.top&&(this.top=or(t.top,e.top,r)),null!=e.bottom&&null!=t.bottom&&(this.bottom=or(t.bottom,e.bottom,r)),null!=e.left&&null!=t.left&&(this.left=or(t.left,e.left,r)),null!=e.right&&null!=t.right&&(this.right=or(t.right,e.right,r)),this},gd.prototype.getCenter=function(t,e){var r=p((this.left+t-this.right)/2,0,t),n=p((this.top+e-this.bottom)/2,0,e);return new i(r,n)},gd.prototype.equals=function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right},gd.prototype.clone=function(){return new gd(this.top,this.bottom,this.left,this.right)},gd.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var vd=function(t,e,r,n,i){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===i||i,this._minZoom=t||0,this._maxZoom=e||22,this._minPitch=null==r?0:r,this._maxPitch=null==n?60:n,this.setMaxBounds(),this.width=0,this.height=0,this._center=new $u(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new gd,this._posMatrixCache={},this._alignedPosMatrixCache={}},_d={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};vd.prototype.clone=function(){var t=new vd(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t},_d.minZoom.get=function(){return this._minZoom},_d.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},_d.maxZoom.get=function(){return this._maxZoom},_d.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},_d.minPitch.get=function(){return this._minPitch},_d.minPitch.set=function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))},_d.maxPitch.get=function(){return this._maxPitch},_d.maxPitch.set=function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))},_d.renderWorldCopies.get=function(){return this._renderWorldCopies},_d.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},_d.worldSize.get=function(){return this.tileSize*this.scale},_d.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},_d.size.get=function(){return new i(this.width,this.height)},_d.bearing.get=function(){return-this.angle/Math.PI*180},_d.bearing.set=function(t){var e=-h(t,-180,180)*Math.PI/180;this.angle!==e&&(this._unmodified=!1,this.angle=e,this._calcMatrices(),this.rotationMatrix=function(){var t=new za(4);return za!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}(),function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),l=Math.cos(r);t[0]=n*l+o*s,t[1]=i*l+a*s,t[2]=n*-s+o*l,t[3]=i*-s+a*l}(this.rotationMatrix,this.rotationMatrix,this.angle))},_d.pitch.get=function(){return this._pitch/Math.PI*180},_d.pitch.set=function(t){var e=p(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==e&&(this._unmodified=!1,this._pitch=e,this._calcMatrices())},_d.fov.get=function(){return this._fov/Math.PI*180},_d.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},_d.zoom.get=function(){return this._zoom},_d.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},_d.center.get=function(){return this._center},_d.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},_d.padding.get=function(){return this._edgeInsets.toJSON()},_d.padding.set=function(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())},_d.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},vd.prototype.isPaddingEqual=function(t){return this._edgeInsets.equals(t)},vd.prototype.interpolatePadding=function(t,e,r){this._unmodified=!1,this._edgeInsets.interpolate(t,e,r),this._constrain(),this._calcMatrices()},vd.prototype.coveringZoomLevel=function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)},vd.prototype.getVisibleUnwrappedCoordinates=function(t){var e=[new sc(0,t)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new i(0,0)),n=this.pointCoordinate(new i(this.width,0)),o=this.pointCoordinate(new i(this.width,this.height)),a=this.pointCoordinate(new i(0,this.height)),s=Math.floor(Math.min(r.x,n.x,o.x,a.x)),l=Math.floor(Math.max(r.x,n.x,o.x,a.x)),u=s-1;u<=l+1;u++)0!==u&&e.push(new sc(u,t));return e},vd.prototype.coveringTiles=function(t){var e=this.coveringZoomLevel(t),r=e;if(void 0!==t.minzoom&&e<t.minzoom)return[];void 0!==t.maxzoom&&e>t.maxzoom&&(e=t.maxzoom);var n=oc.fromLngLat(this.center),i=Math.pow(2,e),o=[i*n.x,i*n.y,0],a=md.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,e),s=t.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(s=e);var l=function(t){return{aabb:new yd([t*i,0,0],[(t+1)*i,i,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}},u=[],c=[],p=e,h=t.reparseOverscaled?r:e;if(this._renderWorldCopies)for(var f=1;f<=3;f++)u.push(l(-f)),u.push(l(f));for(u.push(l(0));u.length>0;){var d=u.pop(),m=d.x,y=d.y,g=d.fullyVisible;if(!g){var v=d.aabb.intersects(a);if(0===v)continue;g=2===v}var _=d.aabb.distanceX(o),x=d.aabb.distanceY(o),b=Math.max(Math.abs(_),Math.abs(x));if(d.zoom===p||b>3+(1<<p-d.zoom)-2&&d.zoom>=s)c.push({tileID:new lc(d.zoom===p?h:d.zoom,d.wrap,d.zoom,m,y),distanceSq:ja([o[0]-.5-m,o[1]-.5-y])});else for(var w=0;w<4;w++){var S=(m<<1)+w%2,k=(y<<1)+(w>>1);u.push({aabb:d.aabb.quadrant(w),zoom:d.zoom+1,x:S,y:k,wrap:d.wrap,fullyVisible:g})}}return c.sort((function(t,e){return t.distanceSq-e.distanceSq})).map((function(t){return t.tileID}))},vd.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},_d.unmodified.get=function(){return this._unmodified},vd.prototype.zoomScale=function(t){return Math.pow(2,t)},vd.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},vd.prototype.project=function(t){var e=p(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new i(ec(t.lng)*this.worldSize,rc(e)*this.worldSize)},vd.prototype.unproject=function(t){return new oc(t.x/this.worldSize,t.y/this.worldSize).toLngLat()},_d.point.get=function(){return this.project(this.center)},vd.prototype.setLocationAtPoint=function(t,e){var r=this.pointCoordinate(e),n=this.pointCoordinate(this.centerPoint),i=this.locationCoordinate(t),o=new oc(i.x-(r.x-n.x),i.y-(r.y-n.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())},vd.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},vd.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},vd.prototype.locationCoordinate=function(t){return oc.fromLngLat(t)},vd.prototype.coordinateLocation=function(t){return t.toLngLat()},vd.prototype.pointCoordinate=function(t){var e=[t.x,t.y,0,1],r=[t.x,t.y,1,1];Ua(e,e,this.pixelMatrixInverse),Ua(r,r,this.pixelMatrixInverse);var n=e[3],i=r[3],o=e[1]/n,a=r[1]/i,s=e[2]/n,l=r[2]/i,u=s===l?0:(0-s)/(l-s);return new oc(or(e[0]/n,r[0]/i,u)/this.worldSize,or(o,a,u)/this.worldSize)},vd.prototype.coordinatePoint=function(t){var e=[t.x*this.worldSize,t.y*this.worldSize,0,1];return Ua(e,e,this.pixelMatrix),new i(e[0]/e[3],e[1]/e[3])},vd.prototype.getBounds=function(){return(new Qu).extend(this.pointLocation(new i(0,0))).extend(this.pointLocation(new i(this.width,0))).extend(this.pointLocation(new i(this.width,this.height))).extend(this.pointLocation(new i(0,this.height)))},vd.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new Qu([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},vd.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},vd.prototype.calculatePosMatrix=function(t,e){void 0===e&&(e=!1);var r=t.key,n=e?this._alignedPosMatrixCache:this._posMatrixCache;if(n[r])return n[r];var i=t.canonical,o=this.worldSize/this.zoomScale(i.z),a=i.x+Math.pow(2,i.z)*t.wrap,s=Aa(new Float64Array(16));return Ma(s,s,[a*o,i.y*o,0]),La(s,s,[o/8192,o/8192,1]),Da(s,e?this.alignedProjMatrix:this.projMatrix,s),n[r]=new Float32Array(s),n[r]},vd.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},vd.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,e,r,n,o=-90,a=90,s=-180,l=180,u=this.size,c=this._unmodified;if(this.latRange){var p=this.latRange;o=rc(p[1])*this.worldSize,t=(a=rc(p[0])*this.worldSize)-o<u.y?u.y/(a-o):0}if(this.lngRange){var h=this.lngRange;s=ec(h[0])*this.worldSize,e=(l=ec(h[1])*this.worldSize)-s<u.x?u.x/(l-s):0}var f=this.point,d=Math.max(e||0,t||0);if(d)return this.center=this.unproject(new i(e?(l+s)/2:f.x,t?(a+o)/2:f.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var m=f.y,y=u.y/2;m-y<o&&(n=o+y),m+y>a&&(n=a-y)}if(this.lngRange){var g=f.x,v=u.x/2;g-v<s&&(r=s+v),g+v>l&&(r=l-v)}void 0===r&&void 0===n||(this.center=this.unproject(new i(void 0!==r?r:f.x,void 0!==n?n:f.y))),this._unmodified=c,this._constraining=!1}},vd.prototype._calcMatrices=function(){if(this.height){var t=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=Math.PI/2+this._pitch,r=this._fov*(.5+t.y/this.height),n=Math.sin(r)*this.cameraToCenterDistance/Math.sin(p(Math.PI-e-r,.01,Math.PI-.01)),i=this.point,o=i.x,a=i.y,s=1.01*(Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance),l=this.height/50,u=new Float64Array(16);!function(t,e,r,n,i){var o,a=1/Math.tan(e/2);t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+n)*(o=1/(n-i)),t[14]=2*i*n*o):(t[10]=-1,t[14]=-2*n)}(u,this._fov,this.width/this.height,l,s),u[8]=2*-t.x/this.width,u[9]=2*t.y/this.height,La(u,u,[1,-1,1]),Ma(u,u,[0,0,-this.cameraToCenterDistance]),function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],p=e[10],h=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+u*n,t[5]=a*i+c*n,t[6]=s*i+p*n,t[7]=l*i+h*n,t[8]=u*i-o*n,t[9]=c*i-a*n,t[10]=p*i-s*n,t[11]=h*i-l*n}(u,u,this._pitch),Ra(u,u,this.angle),Ma(u,u,[-o,-a,0]),this.mercatorMatrix=La([],u,[this.worldSize,this.worldSize,this.worldSize]),La(u,u,[1,1,nc(1,this.center.lat)*this.worldSize,1]),this.projMatrix=u,this.invProjMatrix=Pa([],this.projMatrix);var c=this.width%2/2,h=this.height%2/2,f=Math.cos(this.angle),d=Math.sin(this.angle),m=o-Math.round(o)+f*c+d*h,y=a-Math.round(a)+f*h+d*c,g=new Float64Array(u);if(Ma(g,g,[m>.5?m-1:m,y>.5?y-1:y,0]),this.alignedProjMatrix=g,La(u=Ca(),u,[this.width/2,-this.height/2,1]),Ma(u,u,[1,-1,0]),this.labelPlaneMatrix=u,La(u=Ca(),u,[1,-1,1]),Ma(u,u,[-1,-1,0]),La(u,u,[2/this.width,2/this.height,1]),this.glCoordMatrix=u,this.pixelMatrix=Da(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(u=Pa(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=u,this._posMatrixCache={},this._alignedPosMatrixCache={}}},vd.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var t=this.pointCoordinate(new i(0,0)),e=[t.x*this.worldSize,t.y*this.worldSize,0,1];return Ua(e,e,this.pixelMatrix)[3]/this.cameraToCenterDistance},vd.prototype.getCameraPoint=function(){var t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i(0,t))},vd.prototype.getCameraQueryGeometry=function(t){var e=this.getCameraPoint();if(1===t.length)return[t[0],e];for(var r=e.x,n=e.y,o=e.x,a=e.y,s=0,l=t;s<l.length;s+=1){var u=l[s];r=Math.min(r,u.x),n=Math.min(n,u.y),o=Math.max(o,u.x),a=Math.max(a,u.y)}return[new i(r,n),new i(o,n),new i(o,a),new i(r,a),new i(r,n)]},Object.defineProperties(vd.prototype,_d);var xd=function(t){var e,r,n,i;this._hashName=t&&encodeURIComponent(t),b(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(e=this._updateHashUnthrottled.bind(this),r=!1,n=null,i=function(){n=null,r&&(e(),n=setTimeout(i,300),r=!1)},function(){return r=!0,n||i(),n})};xd.prototype.addTo=function(t){return this._map=t,a.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},xd.prototype.remove=function(){return a.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},xd.prototype.getHashString=function(t){var e=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,n=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,n),o=Math.round(e.lng*i)/i,s=Math.round(e.lat*i)/i,l=this._map.getBearing(),u=this._map.getPitch(),c="";if(c+=t?"/"+o+"/"+s+"/"+r:r+"/"+s+"/"+o,(l||u)&&(c+="/"+Math.round(10*l)/10),u&&(c+="/"+Math.round(u)),this._hashName){var p=this._hashName,h=!1,f=a.location.hash.slice(1).split("&").map((function(t){var e=t.split("=")[0];return e===p?(h=!0,e+"="+c):t})).filter((function(t){return t}));return h||f.push(p+"="+c),"#"+f.join("&")}return"#"+c},xd.prototype._getCurrentHash=function(){var t,e=this,r=a.location.hash.replace("#","");return this._hashName?(r.split("&").map((function(t){return t.split("=")})).forEach((function(r){r[0]===e._hashName&&(t=r)})),(t&&t[1]||"").split("/")):r.split("/")},xd.prototype._onHashChange=function(){var t=this._getCurrentHash();if(t.length>=3&&!t.some((function(t){return isNaN(t)}))){var e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},xd.prototype._updateHashUnthrottled=function(){var t=a.location.href.replace(/(#.+)?$/,this.getHashString());try{a.history.replaceState(a.history.state,null,t)}catch(t){}};var bd={linearity:.3,easing:u(0,0,.3,1)},wd=m({deceleration:2500,maxSpeed:1400},bd),Sd=m({deceleration:20,maxSpeed:1400},bd),kd=m({deceleration:1e3,maxSpeed:360},bd),Td=m({deceleration:1e3,maxSpeed:90},bd),Ed=function(t){this._map=t,this.clear()};function Id(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function zd(t,e,r){var n=r.maxSpeed,i=r.linearity,o=r.deceleration,a=p(t*i/(e/1e3),-n,n),s=Math.abs(a)/(o*i);return{easing:r.easing,duration:1e3*s,amount:a*(s/2)}}Ed.prototype.clear=function(){this._inertiaBuffer=[]},Ed.prototype.record=function(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:V.now(),settings:t})},Ed.prototype._drainInertiaBuffer=function(){for(var t=this._inertiaBuffer,e=V.now();t.length>0&&e-t[0].time>160;)t.shift()},Ed.prototype._onMoveEnd=function(t){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var e={zoom:0,bearing:0,pitch:0,pan:new i(0,0),pinchAround:void 0,around:void 0},r=0,n=this._inertiaBuffer;r<n.length;r+=1){var o=n[r].settings;e.zoom+=o.zoomDelta||0,e.bearing+=o.bearingDelta||0,e.pitch+=o.pitchDelta||0,o.panDelta&&e.pan._add(o.panDelta),o.around&&(e.around=o.around),o.pinchAround&&(e.pinchAround=o.pinchAround)}var a=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(e.pan.mag()){var l=zd(e.pan.mag(),a,m({},wd,t||{}));s.offset=e.pan.mult(l.amount/e.pan.mag()),s.center=this._map.transform.center,Id(s,l)}if(e.zoom){var u=zd(e.zoom,a,Sd);s.zoom=this._map.transform.zoom+u.amount,Id(s,u)}if(e.bearing){var c=zd(e.bearing,a,kd);s.bearing=this._map.transform.bearing+p(c.amount,-179,179),Id(s,c)}if(e.pitch){var h=zd(e.pitch,a,Td);s.pitch=this._map.transform.pitch+h.amount,Id(s,h)}if(s.zoom||s.bearing){var f=void 0===e.pinchAround?e.around:e.pinchAround;s.around=f?this._map.unproject(f):this._map.getCenter()}return this.clear(),m(s,{noMoveStart:!0})}};var Cd=function(t){function e(e,r,n,i){void 0===i&&(i={});var o=U.mousePos(r.getCanvasContainer(),n),a=r.unproject(o);t.call(this,e,m({point:o,lngLat:a,originalEvent:n},i)),this._defaultPrevented=!1,this.target=r}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,r),e}(Ut),Ad=function(t){function e(e,r,n){var o="touchend"===e?n.changedTouches:n.touches,a=U.touchPos(r.getCanvasContainer(),o),s=a.map((function(t){return r.unproject(t)})),l=a.reduce((function(t,e,r,n){return t.add(e.div(n.length))}),new i(0,0)),u=r.unproject(l);t.call(this,e,{points:a,point:l,lngLats:s,lngLat:u,originalEvent:n}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,r),e}(Ut),Pd=function(t){function e(e,r,n){t.call(this,e,{originalEvent:n}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,r),e}(Ut),Dd=function(t,e){this._map=t,this._clickTolerance=e.clickTolerance};Dd.prototype.reset=function(){delete this._mousedownPos},Dd.prototype.wheel=function(t){return this._firePreventable(new Pd(t.type,this._map,t))},Dd.prototype.mousedown=function(t,e){return this._mousedownPos=e,this._firePreventable(new Cd(t.type,this._map,t))},Dd.prototype.mouseup=function(t){this._map.fire(new Cd(t.type,this._map,t))},Dd.prototype.click=function(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new Cd(t.type,this._map,t))},Dd.prototype.dblclick=function(t){return this._firePreventable(new Cd(t.type,this._map,t))},Dd.prototype.mouseover=function(t){this._map.fire(new Cd(t.type,this._map,t))},Dd.prototype.mouseout=function(t){this._map.fire(new Cd(t.type,this._map,t))},Dd.prototype.touchstart=function(t){return this._firePreventable(new Ad(t.type,this._map,t))},Dd.prototype.touchmove=function(t){this._map.fire(new Ad(t.type,this._map,t))},Dd.prototype.touchend=function(t){this._map.fire(new Ad(t.type,this._map,t))},Dd.prototype.touchcancel=function(t){this._map.fire(new Ad(t.type,this._map,t))},Dd.prototype._firePreventable=function(t){if(this._map.fire(t),t.defaultPrevented)return{}},Dd.prototype.isEnabled=function(){return!0},Dd.prototype.isActive=function(){return!1},Dd.prototype.enable=function(){},Dd.prototype.disable=function(){};var Md=function(t){this._map=t};Md.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Md.prototype.mousemove=function(t){this._map.fire(new Cd(t.type,this._map,t))},Md.prototype.mousedown=function(){this._delayContextMenu=!0},Md.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Cd("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Md.prototype.contextmenu=function(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new Cd(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()},Md.prototype.isEnabled=function(){return!0},Md.prototype.isActive=function(){return!1},Md.prototype.enable=function(){},Md.prototype.disable=function(){};var Ld=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1};function Rd(t,e){for(var r={},n=0;n<t.length;n++)r[t[n].identifier]=e[n];return r}Ld.prototype.isEnabled=function(){return!!this._enabled},Ld.prototype.isActive=function(){return!!this._active},Ld.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Ld.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ld.prototype.mousedown=function(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(U.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)},Ld.prototype.mousemoveWindow=function(t,e){if(this._active){var r=e;if(!(this._lastPos.equals(r)||!this._box&&r.dist(this._startPos)<this._clickTolerance)){var n=this._startPos;this._lastPos=r,this._box||(this._box=U.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var i=Math.min(n.x,r.x),o=Math.max(n.x,r.x),a=Math.min(n.y,r.y),s=Math.max(n.y,r.y);U.setTransform(this._box,"translate("+i+"px,"+a+"px)"),this._box.style.width=o-i+"px",this._box.style.height=s-a+"px"}}},Ld.prototype.mouseupWindow=function(t,e){var r=this;if(this._active&&0===t.button){var n=this._startPos,i=e;if(this.reset(),U.suppressClick(),n.x!==i.x||n.y!==i.y)return this._map.fire(new Ut("boxzoomend",{originalEvent:t})),{cameraAnimation:function(t){return t.fitScreenCoordinates(n,i,r._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",t)}},Ld.prototype.keydown=function(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))},Ld.prototype.blur=function(){this.reset()},Ld.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(U.remove(this._box),this._box=null),U.enableDrag(),delete this._startPos,delete this._lastPos},Ld.prototype._fireEvent=function(t,e){return this._map.fire(new Ut(t,{originalEvent:e}))};var Bd=function(t){this.reset(),this.numTouches=t.numTouches};Bd.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Bd.prototype.touchstart=function(t,e,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),r.length===this.numTouches&&(this.centroid=function(t){for(var e=new i(0,0),r=0,n=t;r<n.length;r+=1)e._add(n[r]);return e.div(t.length)}(e),this.touches=Rd(r,e)))},Bd.prototype.touchmove=function(t,e,r){if(!this.aborted&&this.centroid){var n=Rd(r,e);for(var i in this.touches){var o=n[i];(!o||o.dist(this.touches[i])>30)&&(this.aborted=!0)}}},Bd.prototype.touchend=function(t,e,r){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===r.length){var n=!this.aborted&&this.centroid;if(this.reset(),n)return n}};var Od=function(t){this.singleTap=new Bd(t),this.numTaps=t.numTaps,this.reset()};Od.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Od.prototype.touchstart=function(t,e,r){this.singleTap.touchstart(t,e,r)},Od.prototype.touchmove=function(t,e,r){this.singleTap.touchmove(t,e,r)},Od.prototype.touchend=function(t,e,r){var n=this.singleTap.touchend(t,e,r);if(n){var i=t.timeStamp-this.lastTime<500,o=!this.lastTap||this.lastTap.dist(n)<30;if(i&&o||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=n,this.count===this.numTaps)return this.reset(),n}};var Fd=function(){this._zoomIn=new Od({numTouches:1,numTaps:2}),this._zoomOut=new Od({numTouches:2,numTaps:1}),this.reset()};Fd.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Fd.prototype.touchstart=function(t,e,r){this._zoomIn.touchstart(t,e,r),this._zoomOut.touchstart(t,e,r)},Fd.prototype.touchmove=function(t,e,r){this._zoomIn.touchmove(t,e,r),this._zoomOut.touchmove(t,e,r)},Fd.prototype.touchend=function(t,e,r){var n=this,i=this._zoomIn.touchend(t,e,r),o=this._zoomOut.touchend(t,e,r);return i?(this._active=!0,t.preventDefault(),setTimeout((function(){return n.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(i)},{originalEvent:t})}}):o?(this._active=!0,t.preventDefault(),setTimeout((function(){return n.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(o)},{originalEvent:t})}}):void 0},Fd.prototype.touchcancel=function(){this.reset()},Fd.prototype.enable=function(){this._enabled=!0},Fd.prototype.disable=function(){this._enabled=!1,this.reset()},Fd.prototype.isEnabled=function(){return this._enabled},Fd.prototype.isActive=function(){return this._active};var Nd={0:1,2:2},Vd=function(t){this.reset(),this._clickTolerance=t.clickTolerance||1};Vd.prototype.blur=function(){this.reset()},Vd.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Vd.prototype._correctButton=function(t,e){return!1},Vd.prototype._move=function(t,e){return{}},Vd.prototype.mousedown=function(t,e){if(!this._lastPoint){var r=U.mouseButton(t);this._correctButton(t,r)&&(this._lastPoint=e,this._eventButton=r)}},Vd.prototype.mousemoveWindow=function(t,e){var r=this._lastPoint;if(r)if(t.preventDefault(),function(t,e){var r=Nd[e];return void 0===t.buttons||(t.buttons&r)!==r}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(r)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(r,e)},Vd.prototype.mouseupWindow=function(t){this._lastPoint&&U.mouseButton(t)===this._eventButton&&(this._moved&&U.suppressClick(),this.reset())},Vd.prototype.enable=function(){this._enabled=!0},Vd.prototype.disable=function(){this._enabled=!1,this.reset()},Vd.prototype.isEnabled=function(){return this._enabled},Vd.prototype.isActive=function(){return this._active};var Ud=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.mousedown=function(e,r){t.prototype.mousedown.call(this,e,r),this._lastPoint&&(this._active=!0)},e.prototype._correctButton=function(t,e){return 0===e&&!t.ctrlKey},e.prototype._move=function(t,e){return{around:e,panDelta:e.sub(t)}},e}(Vd),jd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var r=.8*(e.x-t.x);if(r)return this._active=!0,{bearingDelta:r}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Vd),qd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var r=-.5*(e.y-t.y);if(r)return this._active=!0,{pitchDelta:r}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Vd),Zd=function(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()};Zd.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new i(0,0)},Zd.prototype.touchstart=function(t,e,r){return this._calculateTransform(t,e,r)},Zd.prototype.touchmove=function(t,e,r){if(this._active&&!(r.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,r)},Zd.prototype.touchend=function(t,e,r){this._calculateTransform(t,e,r),this._active&&r.length<this._minTouches&&this.reset()},Zd.prototype.touchcancel=function(){this.reset()},Zd.prototype._calculateTransform=function(t,e,r){r.length>0&&(this._active=!0);var n=Rd(r,e),o=new i(0,0),a=new i(0,0),s=0;for(var l in n){var u=n[l],c=this._touches[l];c&&(o._add(u),a._add(u.sub(c)),s++,n[l]=u)}if(this._touches=n,!(s<this._minTouches)&&a.mag()){var p=a.div(s);if(this._sum._add(p),!(this._sum.mag()<this._clickTolerance))return{around:o.div(s),panDelta:p}}},Zd.prototype.enable=function(){this._enabled=!0},Zd.prototype.disable=function(){this._enabled=!1,this.reset()},Zd.prototype.isEnabled=function(){return this._enabled},Zd.prototype.isActive=function(){return this._active};var Gd=function(){this.reset()};function Wd(t,e,r){for(var n=0;n<t.length;n++)if(t[n].identifier===r)return e[n]}function Hd(t,e){return Math.log(t/e)/Math.LN2}Gd.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Gd.prototype._start=function(t){},Gd.prototype._move=function(t,e,r){return{}},Gd.prototype.touchstart=function(t,e,r){this._firstTwoTouches||r.length<2||(this._firstTwoTouches=[r[0].identifier,r[1].identifier],this._start([e[0],e[1]]))},Gd.prototype.touchmove=function(t,e,r){if(this._firstTwoTouches){t.preventDefault();var n=this._firstTwoTouches,i=n[1],o=Wd(r,e,n[0]),a=Wd(r,e,i);if(o&&a){var s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,t)}}},Gd.prototype.touchend=function(t,e,r){if(this._firstTwoTouches){var n=this._firstTwoTouches,i=n[1],o=Wd(r,e,n[0]),a=Wd(r,e,i);o&&a||(this._active&&U.suppressClick(),this.reset())}},Gd.prototype.touchcancel=function(){this.reset()},Gd.prototype.enable=function(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around},Gd.prototype.disable=function(){this._enabled=!1,this.reset()},Gd.prototype.isEnabled=function(){return this._enabled},Gd.prototype.isActive=function(){return this._active};var Xd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._distance,delete this._startDistance},e.prototype._start=function(t){this._startDistance=this._distance=t[0].dist(t[1])},e.prototype._move=function(t,e){var r=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Hd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Hd(this._distance,r),pinchAround:e}},e}(Gd);function Kd(t,e){return 180*t.angleWith(e)/Math.PI}var Yd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},e.prototype._start=function(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])},e.prototype._move=function(t,e){var r=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Kd(this._vector,r),pinchAround:e}},e.prototype._isBelowThreshold=function(t){this._minDiameter=Math.min(this._minDiameter,t.mag());var e=25/(Math.PI*this._minDiameter)*360,r=Kd(t,this._startVector);return Math.abs(r)<e},e}(Gd);function Qd(t){return Math.abs(t.y)>Math.abs(t.x)}var $d=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},e.prototype._start=function(t){this._lastPoints=t,Qd(t[0].sub(t[1]))&&(this._valid=!1)},e.prototype._move=function(t,e,r){var n=t[0].sub(this._lastPoints[0]),i=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(n,i,r.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(n.y+i.y)/2*-.5}},e.prototype.gestureBeginsVertically=function(t,e,r){if(void 0!==this._valid)return this._valid;var n=t.mag()>=2,i=e.mag()>=2;if(n||i){if(!n||!i)return void 0===this._firstMove&&(this._firstMove=r),r-this._firstMove<100&&void 0;var o=t.y>0==e.y>0;return Qd(t)&&Qd(e)&&o}},e}(Gd),Jd={panStep:100,bearingStep:15,pitchStep:10},tm=function(){var t=Jd;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1};function em(t){return t*(2-t)}tm.prototype.blur=function(){this.reset()},tm.prototype.reset=function(){this._active=!1},tm.prototype.keydown=function(t){var e=this;if(!(t.altKey||t.ctrlKey||t.metaKey)){var r=0,n=0,i=0,o=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:r=1;break;case 189:case 109:case 173:r=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),o=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),o=1);break;case 38:t.shiftKey?i=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?i=-1:(t.preventDefault(),a=1);break;default:return}return this._rotationDisabled&&(n=0,i=0),{cameraAnimation:function(s){var l=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:em,zoom:r?Math.round(l)+r*(t.shiftKey?2:1):l,bearing:s.getBearing()+n*e._bearingStep,pitch:s.getPitch()+i*e._pitchStep,offset:[-o*e._panStep,-a*e._panStep],center:s.getCenter()},{originalEvent:t})}}}},tm.prototype.enable=function(){this._enabled=!0},tm.prototype.disable=function(){this._enabled=!1,this.reset()},tm.prototype.isEnabled=function(){return this._enabled},tm.prototype.isActive=function(){return this._active},tm.prototype.disableRotation=function(){this._rotationDisabled=!0},tm.prototype.enableRotation=function(){this._rotationDisabled=!1};var rm=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._handler=e,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,b(["_onTimeout"],this)};rm.prototype.setZoomRate=function(t){this._defaultZoomRate=t},rm.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},rm.prototype.isEnabled=function(){return!!this._enabled},rm.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},rm.prototype.isZooming=function(){return!!this._zooming},rm.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},rm.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},rm.prototype.wheel=function(t){if(this.isEnabled()){var e=t.deltaMode===a.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,r=V.now(),n=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==e&&e%4.000244140625==0?this._type="wheel":0!==e&&Math.abs(e)<4?this._type="trackpad":n>400?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(n*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&(this._lastWheelEvent=t,this._delta-=e,this._active||this._start(t)),t.preventDefault()}},rm.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)},rm.prototype._start=function(t){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var e=U.mousePos(this._el,t);this._around=$u.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(e)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},rm.prototype.renderFrame=function(){var t=this;if(this._frameId&&(this._frameId=null,this.isActive())){var e=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,n=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==n&&(n=1/n);var i="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(i*n))),"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var o,a="number"==typeof this._targetZoom?this._targetZoom:e.zoom,s=this._startZoom,l=this._easing,u=!1;if("wheel"===this._type&&s&&l){var c=Math.min((V.now()-this._lastWheelEventTime)/200,1);o=or(s,a,l(c)),c<1?this._frameId||(this._frameId=!0):u=!0}else o=a,u=!0;return this._active=!0,u&&(this._active=!1,this._finishTimeout=setTimeout((function(){t._zooming=!1,t._handler._triggerRenderFrame(),delete t._targetZoom,delete t._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!u,zoomDelta:o-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},rm.prototype._smoothOutEasing=function(t){var e=c;if(this._prevEase){var r=this._prevEase,n=(V.now()-r.start)/r.duration,i=r.easing(n+.01)-r.easing(n),o=.27/Math.sqrt(i*i+1e-4)*.01;e=u(o,Math.sqrt(.0729-o*o),.25,1)}return this._prevEase={start:V.now(),duration:t,easing:e},e},rm.prototype.blur=function(){this.reset()},rm.prototype.reset=function(){this._active=!1};var nm=function(t,e){this._clickZoom=t,this._tapZoom=e};nm.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},nm.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},nm.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},nm.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var im=function(){this.reset()};im.prototype.reset=function(){this._active=!1},im.prototype.blur=function(){this.reset()},im.prototype.dblclick=function(t,e){return t.preventDefault(),{cameraAnimation:function(r){r.easeTo({duration:300,zoom:r.getZoom()+(t.shiftKey?-1:1),around:r.unproject(e)},{originalEvent:t})}}},im.prototype.enable=function(){this._enabled=!0},im.prototype.disable=function(){this._enabled=!1,this.reset()},im.prototype.isEnabled=function(){return this._enabled},im.prototype.isActive=function(){return this._active};var om=function(){this._tap=new Od({numTouches:1,numTaps:1}),this.reset()};om.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},om.prototype.touchstart=function(t,e,r){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?r.length>0&&(this._swipePoint=e[0],this._swipeTouch=r[0].identifier):this._tap.touchstart(t,e,r))},om.prototype.touchmove=function(t,e,r){if(this._tapTime){if(this._swipePoint){if(r[0].identifier!==this._swipeTouch)return;var n=e[0],i=n.y-this._swipePoint.y;return this._swipePoint=n,t.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(t,e,r)},om.prototype.touchend=function(t,e,r){this._tapTime?this._swipePoint&&0===r.length&&this.reset():this._tap.touchend(t,e,r)&&(this._tapTime=t.timeStamp)},om.prototype.touchcancel=function(){this.reset()},om.prototype.enable=function(){this._enabled=!0},om.prototype.disable=function(){this._enabled=!1,this.reset()},om.prototype.isEnabled=function(){return this._enabled},om.prototype.isActive=function(){return this._active};var am=function(t,e,r){this._el=t,this._mousePan=e,this._touchPan=r};am.prototype.enable=function(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},am.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},am.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},am.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var sm=function(t,e,r){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=r};sm.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},sm.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},sm.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},sm.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var lm=function(t,e,r,n){this._el=t,this._touchZoom=e,this._touchRotate=r,this._tapDragZoom=n,this._rotationDisabled=!1,this._enabled=!0};lm.prototype.enable=function(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},lm.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},lm.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},lm.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},lm.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},lm.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var um=function(t){return t.zoom||t.drag||t.pitch||t.rotate},cm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Ut);function pm(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}var hm=function(t,e){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ed(t),this._bearingSnap=e.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(e),b(["handleEvent","handleWindowEvent"],this);var r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[a.document,"mousemove",{capture:!0}],[a.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[a,"blur",void 0]];for(var n=0,i=this._listeners;n<i.length;n+=1){var o=i[n],s=o[0];U.addEventListener(s,o[1],s===a.document?this.handleWindowEvent:this.handleEvent,o[2])}};hm.prototype.destroy=function(){for(var t=0,e=this._listeners;t<e.length;t+=1){var r=e[t],n=r[0];U.removeEventListener(n,r[1],n===a.document?this.handleWindowEvent:this.handleEvent,r[2])}},hm.prototype._addDefaultHandlers=function(t){var e=this._map,r=e.getCanvasContainer();this._add("mapEvent",new Dd(e,t));var n=e.boxZoom=new Ld(e,t);this._add("boxZoom",n);var i=new Fd,o=new im;e.doubleClickZoom=new nm(o,i),this._add("tapZoom",i),this._add("clickZoom",o);var a=new om;this._add("tapDragZoom",a);var s=e.touchPitch=new $d;this._add("touchPitch",s);var l=new jd(t),u=new qd(t);e.dragRotate=new sm(t,l,u),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",u,["mouseRotate"]);var c=new Ud(t),p=new Zd(t);e.dragPan=new am(r,c,p),this._add("mousePan",c),this._add("touchPan",p,["touchZoom","touchRotate"]);var h=new Yd,f=new Xd;e.touchZoomRotate=new lm(r,f,h,a),this._add("touchRotate",h,["touchPan","touchZoom"]),this._add("touchZoom",f,["touchPan","touchRotate"]);var d=e.scrollZoom=new rm(e,this);this._add("scrollZoom",d,["mousePan"]);var m=e.keyboard=new tm;this._add("keyboard",m),this._add("blockableMapEvent",new Md(e));for(var y=0,g=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];y<g.length;y+=1){var v=g[y];t.interactive&&t[v]&&e[v].enable(t[v])}},hm.prototype._add=function(t,e,r){this._handlers.push({handlerName:t,handler:e,allowed:r}),this._handlersById[t]=e},hm.prototype.stop=function(t){if(!this._updatingCamera){for(var e=0,r=this._handlers;e<r.length;e+=1)r[e].handler.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}},hm.prototype.isActive=function(){for(var t=0,e=this._handlers;t<e.length;t+=1)if(e[t].handler.isActive())return!0;return!1},hm.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},hm.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},hm.prototype.isMoving=function(){return Boolean(um(this._eventsInProgress))||this.isZooming()},hm.prototype._blockedByActive=function(t,e,r){for(var n in t)if(n!==r&&(!e||e.indexOf(n)<0))return!0;return!1},hm.prototype.handleWindowEvent=function(t){this.handleEvent(t,t.type+"Window")},hm.prototype._getMapTouches=function(t){for(var e=[],r=0,n=t;r<n.length;r+=1){var i=n[r];this._el.contains(i.target)&&e.push(i)}return e},hm.prototype.handleEvent=function(t,e){this._updatingCamera=!0;for(var r="renderFrame"===t.type?void 0:t,n={needsRenderFrame:!1},i={},o={},a=t.touches?this._getMapTouches(t.touches):void 0,s=a?U.touchPos(this._el,a):U.mousePos(this._el,t),l=0,u=this._handlers;l<u.length;l+=1){var c=u[l],p=c.handlerName,h=c.handler,f=c.allowed;if(h.isEnabled()){var d=void 0;this._blockedByActive(o,f,p)?h.reset():h[e||t.type]&&(d=h[e||t.type](t,s,a),this.mergeHandlerResult(n,i,d,p,r),d&&d.needsRenderFrame&&this._triggerRenderFrame()),(d||h.isActive())&&(o[p]=h)}}var m={};for(var y in this._previousActiveHandlers)o[y]||(m[y]=r);this._previousActiveHandlers=o,(Object.keys(m).length||pm(n))&&(this._changes.push([n,i,m]),this._triggerRenderFrame()),(Object.keys(o).length||pm(n))&&this._map._stop(!0),this._updatingCamera=!1;var g=n.cameraAnimation;g&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],g(this._map))},hm.prototype.mergeHandlerResult=function(t,e,r,n,i){if(r){m(t,r);var o={handlerName:n,originalEvent:r.originalEvent||i};void 0!==r.zoomDelta&&(e.zoom=o),void 0!==r.panDelta&&(e.drag=o),void 0!==r.pitchDelta&&(e.pitch=o),void 0!==r.bearingDelta&&(e.rotate=o)}},hm.prototype._applyChanges=function(){for(var t={},e={},r={},n=0,o=this._changes;n<o.length;n+=1){var a=o[n],s=a[0],l=a[1],u=a[2];s.panDelta&&(t.panDelta=(t.panDelta||new i(0,0))._add(s.panDelta)),s.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(t.around=s.around),void 0!==s.pinchAround&&(t.pinchAround=s.pinchAround),s.noInertia&&(t.noInertia=s.noInertia),m(e,l),m(r,u)}this._updateMapTransform(t,e,r),this._changes=[]},hm.prototype._updateMapTransform=function(t,e,r){var n=this._map,i=n.transform;if(!pm(t))return this._fireEvents(e,r,!0);var o=t.panDelta,a=t.zoomDelta,s=t.bearingDelta,l=t.pitchDelta,u=t.around,c=t.pinchAround;void 0!==c&&(u=c),n._stop(!0),u=u||n.transform.centerPoint;var p=i.pointLocation(o?u.sub(o):u);s&&(i.bearing+=s),l&&(i.pitch+=l),a&&(i.zoom+=a),i.setLocationAtPoint(p,u),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(e,r,!0)},hm.prototype._fireEvents=function(t,e,r){var n=this,i=um(this._eventsInProgress),o=um(t),a={};for(var s in t)this._eventsInProgress[s]||(a[s+"start"]=t[s].originalEvent),this._eventsInProgress[s]=t[s];for(var l in!i&&o&&this._fireEvent("movestart",o.originalEvent),a)this._fireEvent(l,a[l]);for(var u in o&&this._fireEvent("move",o.originalEvent),t)this._fireEvent(u,t[u].originalEvent);var c,p={};for(var h in this._eventsInProgress){var f=this._eventsInProgress[h],d=f.handlerName,m=f.originalEvent;this._handlersById[d].isActive()||(delete this._eventsInProgress[h],p[h+"end"]=c=e[d]||m)}for(var y in p)this._fireEvent(y,p[y]);var g=um(this._eventsInProgress);if(r&&(i||o)&&!g){this._updatingCamera=!0;var v=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),_=function(t){return 0!==t&&-n._bearingSnap<t&&t<n._bearingSnap};v?(_(v.bearing||this._map.getBearing())&&(v.bearing=0),this._map.easeTo(v,{originalEvent:c})):(this._map.fire(new Ut("moveend",{originalEvent:c})),_(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},hm.prototype._fireEvent=function(t,e){this._map.fire(new Ut(t,e?{originalEvent:e}:{}))},hm.prototype._requestFrame=function(){var t=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(e){delete t._frameId,t.handleEvent(new cm("renderFrame",{timeStamp:e})),t._applyChanges()}))},hm.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var fm=function(t){function e(e,r){t.call(this),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=r.bearingSnap,b(["_renderFrameCallback"],this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCenter=function(){return new $u(this.transform.center.lng,this.transform.center.lat)},e.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},e.prototype.panBy=function(t,e,r){return t=i.convert(t).mult(-1),this.panTo(this.transform.center,m({offset:t},e),r)},e.prototype.panTo=function(t,e,r){return this.easeTo(m({center:t},e),r)},e.prototype.getZoom=function(){return this.transform.zoom},e.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},e.prototype.zoomTo=function(t,e,r){return this.easeTo(m({zoom:t},e),r)},e.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},e.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},e.prototype.getBearing=function(){return this.transform.bearing},e.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},e.prototype.getPadding=function(){return this.transform.padding},e.prototype.setPadding=function(t,e){return this.jumpTo({padding:t},e),this},e.prototype.rotateTo=function(t,e,r){return this.easeTo(m({bearing:t},e),r)},e.prototype.resetNorth=function(t,e){return this.rotateTo(0,m({duration:1e3},t),e),this},e.prototype.resetNorthPitch=function(t,e){return this.easeTo(m({bearing:0,pitch:0,duration:1e3},t),e),this},e.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},e.prototype.getPitch=function(){return this.transform.pitch},e.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},e.prototype.cameraForBounds=function(t,e){t=Qu.convert(t);var r=e&&e.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),r,e)},e.prototype._cameraForBoxAndBearing=function(t,e,r,n){var o={top:0,bottom:0,right:0,left:0};if("number"==typeof(n=m({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},n)).padding){var a=n.padding;n.padding={top:a,bottom:a,right:a,left:a}}n.padding=m(o,n.padding);var s=this.transform,l=s.padding,u=s.project($u.convert(t)),c=s.project($u.convert(e)),p=u.rotate(-r*Math.PI/180),h=c.rotate(-r*Math.PI/180),f=new i(Math.max(p.x,h.x),Math.max(p.y,h.y)),d=new i(Math.min(p.x,h.x),Math.min(p.y,h.y)),y=f.sub(d),g=(s.width-(l.left+l.right+n.padding.left+n.padding.right))/y.x,v=(s.height-(l.top+l.bottom+n.padding.top+n.padding.bottom))/y.y;if(!(v<0||g<0)){var _=Math.min(s.scaleZoom(s.scale*Math.min(g,v)),n.maxZoom),x="number"==typeof n.offset.x?new i(n.offset.x,n.offset.y):i.convert(n.offset),b=new i((n.padding.left-n.padding.right)/2,(n.padding.top-n.padding.bottom)/2).rotate(r*Math.PI/180),w=x.add(b).mult(s.scale/s.zoomScale(_));return{center:s.unproject(u.add(c).div(2).sub(w)),zoom:_,bearing:r}}I("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},e.prototype.fitBounds=function(t,e,r){return this._fitInternal(this.cameraForBounds(t,e),e,r)},e.prototype.fitScreenCoordinates=function(t,e,r,n,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(i.convert(t)),this.transform.pointLocation(i.convert(e)),r,n),n,o)},e.prototype._fitInternal=function(t,e,r){return t?(delete(e=m(t,e)).padding,e.linear?this.easeTo(e,r):this.flyTo(e,r)):this},e.prototype.jumpTo=function(t,e){this.stop();var r=this.transform,n=!1,i=!1,o=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(n=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=$u.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(i=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(o=!0,r.pitch=+t.pitch),null==t.padding||r.isPaddingEqual(t.padding)||(r.padding=t.padding),this.fire(new Ut("movestart",e)).fire(new Ut("move",e)),n&&this.fire(new Ut("zoomstart",e)).fire(new Ut("zoom",e)).fire(new Ut("zoomend",e)),i&&this.fire(new Ut("rotatestart",e)).fire(new Ut("rotate",e)).fire(new Ut("rotateend",e)),o&&this.fire(new Ut("pitchstart",e)).fire(new Ut("pitch",e)).fire(new Ut("pitchend",e)),this.fire(new Ut("moveend",e))},e.prototype.easeTo=function(t,e){var r=this;this._stop(!1,t.easeId),(!1===(t=m({offset:[0,0],duration:500,easing:c},t)).animate||!t.essential&&V.prefersReducedMotion)&&(t.duration=0);var n=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),l=this.getPadding(),u="zoom"in t?+t.zoom:o,p="bearing"in t?this._normalizeBearing(t.bearing,a):a,h="pitch"in t?+t.pitch:s,f="padding"in t?t.padding:n.padding,d=i.convert(t.offset),y=n.centerPoint.add(d),g=n.pointLocation(y),v=$u.convert(t.center||g);this._normalizeCenter(v);var _,x,b=n.project(g),w=n.project(v).sub(b),S=n.zoomScale(u-o);t.around&&(_=$u.convert(t.around),x=n.locationPoint(_));var k={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||u!==o,this._rotating=this._rotating||a!==p,this._pitching=this._pitching||h!==s,this._padding=!n.isPaddingEqual(f),this._easeId=t.easeId,this._prepareEase(e,t.noMoveStart,k),this._ease((function(t){if(r._zooming&&(n.zoom=or(o,u,t)),r._rotating&&(n.bearing=or(a,p,t)),r._pitching&&(n.pitch=or(s,h,t)),r._padding&&(n.interpolatePadding(l,f,t),y=n.centerPoint.add(d)),_)n.setLocationAtPoint(_,x);else{var i=n.zoomScale(n.zoom-o),c=u>o?Math.min(2,S):Math.max(.5,S),m=Math.pow(c,1-t),g=n.unproject(b.add(w.mult(t*m)).mult(i));n.setLocationAtPoint(n.renderWorldCopies?g.wrap():g,y)}r._fireMoveEvents(e)}),(function(t){r._afterEase(e,t)}),t),this},e.prototype._prepareEase=function(t,e,r){void 0===r&&(r={}),this._moving=!0,e||r.moving||this.fire(new Ut("movestart",t)),this._zooming&&!r.zooming&&this.fire(new Ut("zoomstart",t)),this._rotating&&!r.rotating&&this.fire(new Ut("rotatestart",t)),this._pitching&&!r.pitching&&this.fire(new Ut("pitchstart",t))},e.prototype._fireMoveEvents=function(t){this.fire(new Ut("move",t)),this._zooming&&this.fire(new Ut("zoom",t)),this._rotating&&this.fire(new Ut("rotate",t)),this._pitching&&this.fire(new Ut("pitch",t))},e.prototype._afterEase=function(t,e){if(!this._easeId||!e||this._easeId!==e){delete this._easeId;var r=this._zooming,n=this._rotating,i=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new Ut("zoomend",t)),n&&this.fire(new Ut("rotateend",t)),i&&this.fire(new Ut("pitchend",t)),this.fire(new Ut("moveend",t))}},e.prototype.flyTo=function(t,e){var r=this;if(!t.essential&&V.prefersReducedMotion){var n=y(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(n,e)}this.stop(),t=m({offset:[0,0],speed:1.2,curve:1.42,easing:c},t);var o=this.transform,a=this.getZoom(),s=this.getBearing(),l=this.getPitch(),u=this.getPadding(),h="zoom"in t?p(+t.zoom,o.minZoom,o.maxZoom):a,f="bearing"in t?this._normalizeBearing(t.bearing,s):s,d="pitch"in t?+t.pitch:l,g="padding"in t?t.padding:o.padding,v=o.zoomScale(h-a),_=i.convert(t.offset),x=o.centerPoint.add(_),b=o.pointLocation(x),w=$u.convert(t.center||b);this._normalizeCenter(w);var S=o.project(b),k=o.project(w).sub(S),T=t.curve,E=Math.max(o.width,o.height),I=E/v,z=k.mag();if("minZoom"in t){var C=p(Math.min(t.minZoom,a,h),o.minZoom,o.maxZoom),A=E/o.zoomScale(C-a);T=Math.sqrt(A/z*2)}var P=T*T;function D(t){var e=(I*I-E*E+(t?-1:1)*P*P*z*z)/(2*(t?I:E)*P*z);return Math.log(Math.sqrt(e*e+1)-e)}function M(t){return(Math.exp(t)-Math.exp(-t))/2}function L(t){return(Math.exp(t)+Math.exp(-t))/2}var R=D(0),B=function(t){return L(R)/L(R+T*t)},O=function(t){return E*((L(R)*(M(e=R+T*t)/L(e))-M(R))/P)/z;var e},F=(D(1)-R)/T;if(Math.abs(z)<1e-6||!isFinite(F)){if(Math.abs(E-I)<1e-6)return this.easeTo(t,e);var N=I<E?-1:1;F=Math.abs(Math.log(I/E))/T,O=function(){return 0},B=function(t){return Math.exp(N*T*t)}}return t.duration="duration"in t?+t.duration:1e3*F/("screenSpeed"in t?+t.screenSpeed/T:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=s!==f,this._pitching=d!==l,this._padding=!o.isPaddingEqual(g),this._prepareEase(e,!1),this._ease((function(t){var n=t*F,i=1/B(n);o.zoom=1===t?h:a+o.scaleZoom(i),r._rotating&&(o.bearing=or(s,f,t)),r._pitching&&(o.pitch=or(l,d,t)),r._padding&&(o.interpolatePadding(u,g,t),x=o.centerPoint.add(_));var c=1===t?w:o.unproject(S.add(k.mult(O(n))).mult(i));o.setLocationAtPoint(o.renderWorldCopies?c.wrap():c,x),r._fireMoveEvents(e)}),(function(){return r._afterEase(e)}),t),this},e.prototype.isEasing=function(){return!!this._easeFrameId},e.prototype.stop=function(){return this._stop()},e.prototype._stop=function(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var r=this._onEaseEnd;delete this._onEaseEnd,r.call(this,e)}if(!t){var n=this.handlers;n&&n.stop(!1)}return this},e.prototype._ease=function(t,e,r){!1===r.animate||0===r.duration?(t(1),e()):(this._easeStart=V.now(),this._easeOptions=r,this._onEaseFrame=t,this._onEaseEnd=e,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},e.prototype._renderFrameCallback=function(){var t=Math.min((V.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},e.prototype._normalizeBearing=function(t,e){t=h(t,-180,180);var r=Math.abs(t-e);return Math.abs(t-360-e)<r&&(t-=360),Math.abs(t+360-e)<r&&(t+=360),t},e.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var r=t.lng-e.center.lng;t.lng+=r>180?-360:r<-180?360:0}},e}(qt),dm=function(t){void 0===t&&(t={}),this.options=t,b(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};dm.prototype.getDefaultPosition=function(){return"bottom-right"},dm.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=U.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=U.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=U.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},dm.prototype.onRemove=function(){U.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},dm.prototype._setElementTitle=function(t,e){var r=this._map._getUIString("AttributionControl."+e);t.title=r,t.setAttribute("aria-label",r)},dm.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},dm.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var e=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||$.ACCESS_TOKEN}];if(t){var r=e.reduce((function(t,r,n){return r.value&&(t+=r.key+"="+r.value+(n<e.length-1?"&":"")),t}),"?");t.href=$.FEEDBACK_URL+"/"+r+(this._map._hash?this._map._hash.getHashString(!0):""),t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}},dm.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},dm.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((function(t){return"string"!=typeof t?"":t}))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var r=this._map.style.sourceCaches;for(var n in r){var i=r[n];if(i.used){var o=i.getSource();o.attribution&&t.indexOf(o.attribution)<0&&t.push(o.attribution)}}t.sort((function(t,e){return t.length-e.length}));var a=(t=t.filter((function(e,r){for(var n=r+1;n<t.length;n++)if(t[n].indexOf(e)>=0)return!1;return!0}))).join(" | ");a!==this._attribHTML&&(this._attribHTML=a,t.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},dm.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var mm=function(){b(["_updateLogo"],this),b(["_updateCompact"],this)};mm.prototype.onAdd=function(t){this._map=t,this._container=U.create("div","mapboxgl-ctrl");var e=U.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},mm.prototype.onRemove=function(){U.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},mm.prototype.getDefaultPosition=function(){return"bottom-left"},mm.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},mm.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},mm.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var ym=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ym.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},ym.prototype.remove=function(t){for(var e=this._currentlyRunning,r=0,n=e?this._queue.concat(e):this._queue;r<n.length;r+=1){var i=n[r];if(i.id===t)return void(i.cancelled=!0)}},ym.prototype.run=function(t){void 0===t&&(t=0);var e=this._currentlyRunning=this._queue;this._queue=[];for(var r=0,n=e;r<n.length;r+=1){var i=n[r];if(!i.cancelled&&(i.callback(t),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ym.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var gm={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},vm=a.HTMLImageElement,_m=a.HTMLElement,xm=a.ImageBitmap,bm={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},wm=function(t){function r(e){var r=this;if(null!=(e=m({},bm,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var n=new vd(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies);if(t.call(this,n,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new ym,this._controls=[],this._mapId=v(),this._locale=m({},gm,e.locale),this._clickTolerance=e.clickTolerance,this._requestManager=new it(e.transformRequest,e.accessToken),"string"==typeof e.container){if(this._container=a.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof _m))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),b(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return r._update(!1)})),this.on("moveend",(function(){return r._update(!1)})),this.on("zoom",(function(){return r._update(!0)})),void 0!==a&&(a.addEventListener("online",this._onWindowOnline,!1),a.addEventListener("resize",this._onWindowResize,!1),a.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new hm(this,e),this._hash=e.hash&&new xd("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,m({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new dm({customAttribution:e.customAttribution})),this.addControl(new mm,e.logoPosition),this.on("style.load",(function(){r.transform.unmodified&&r.jumpTo(r.style.stylesheet)})),this.on("data",(function(t){r._update("style"===t.dataType),r.fire(new Ut(t.dataType+"data",t))})),this.on("dataloading",(function(t){r.fire(new Ut(t.dataType+"dataloading",t))}))}t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r;var n={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return r.prototype._getMapId=function(){return this._mapId},r.prototype.addControl=function(t,e){if(void 0===e&&(e=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new jt(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=t.onAdd(this);this._controls.push(t);var n=this._controlPositions[e];return-1!==e.indexOf("bottom")?n.insertBefore(r,n.firstChild):n.appendChild(r),this},r.prototype.removeControl=function(t){if(!t||!t.onRemove)return this.fire(new jt(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var e=this._controls.indexOf(t);return e>-1&&this._controls.splice(e,1),t.onRemove(this),this},r.prototype.hasControl=function(t){return this._controls.indexOf(t)>-1},r.prototype.resize=function(t){var e=this._containerDimensions(),r=e[0],n=e[1];if(r===this.transform.width&&n===this.transform.height)return this;this._resizeCanvas(r,n),this.transform.resize(r,n),this.painter.resize(r,n);var i=!this._moving;return i&&this.fire(new Ut("movestart",t)).fire(new Ut("move",t)),this.fire(new Ut("resize",t)),i&&this.fire(new Ut("moveend",t)),this},r.prototype.getBounds=function(){return this.transform.getBounds()},r.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},r.prototype.setMaxBounds=function(t){return this.transform.setMaxBounds(Qu.convert(t)),this._update()},r.prototype.setMinZoom=function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},r.prototype.getMinZoom=function(){return this.transform.minZoom},r.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},r.prototype.getMaxZoom=function(){return this.transform.maxZoom},r.prototype.setMinPitch=function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},r.prototype.getMinPitch=function(){return this.transform.minPitch},r.prototype.setMaxPitch=function(t){if((t=null==t?60:t)>60)throw new Error("maxPitch must be less than or equal to 60");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")},r.prototype.getMaxPitch=function(){return this.transform.maxPitch},r.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},r.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},r.prototype.project=function(t){return this.transform.locationPoint($u.convert(t))},r.prototype.unproject=function(t){return this.transform.pointLocation(i.convert(t))},r.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},r.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},r.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},r.prototype._createDelegatedListener=function(t,e,r){var n,i=this;if("mouseenter"===t||"mouseover"===t){var o=!1;return{layer:e,listener:r,delegates:{mousemove:function(n){var a=i.getLayer(e)?i.queryRenderedFeatures(n.point,{layers:[e]}):[];a.length?o||(o=!0,r.call(i,new Cd(t,i,n.originalEvent,{features:a}))):o=!1},mouseout:function(){o=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:e,listener:r,delegates:{mousemove:function(n){(i.getLayer(e)?i.queryRenderedFeatures(n.point,{layers:[e]}):[]).length?a=!0:a&&(a=!1,r.call(i,new Cd(t,i,n.originalEvent)))},mouseout:function(e){a&&(a=!1,r.call(i,new Cd(t,i,e.originalEvent)))}}}}return{layer:e,listener:r,delegates:(n={},n[t]=function(t){var n=i.getLayer(e)?i.queryRenderedFeatures(t.point,{layers:[e]}):[];n.length&&(t.features=n,r.call(i,t),delete t.features)},n)}},r.prototype.on=function(e,r,n){if(void 0===n)return t.prototype.on.call(this,e,r);var i=this._createDelegatedListener(e,r,n);for(var o in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(i),i.delegates)this.on(o,i.delegates[o]);return this},r.prototype.once=function(e,r,n){if(void 0===n)return t.prototype.once.call(this,e,r);var i=this._createDelegatedListener(e,r,n);for(var o in i.delegates)this.once(o,i.delegates[o]);return this},r.prototype.off=function(e,r,n){var i=this;return void 0===n?t.prototype.off.call(this,e,r):(this._delegatedListeners&&this._delegatedListeners[e]&&function(t){for(var o=t[e],a=0;a<o.length;a++){var s=o[a];if(s.layer===r&&s.listener===n){for(var l in s.delegates)i.off(l,s.delegates[l]);return o.splice(a,1),i}}}(this._delegatedListeners),this)},r.prototype.queryRenderedFeatures=function(t,e){if(!this.style)return[];var r;if(void 0!==e||void 0===t||t instanceof i||Array.isArray(t)||(e=t,t=void 0),e=e||{},(t=t||[[0,0],[this.transform.width,this.transform.height]])instanceof i||"number"==typeof t[0])r=[i.convert(t)];else{var n=i.convert(t[0]),o=i.convert(t[1]);r=[n,new i(o.x,n.y),o,new i(n.x,o.y),n]}return this.style.queryRenderedFeatures(r,e,this.transform)},r.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},r.prototype.setStyle=function(t,e){return!1!==(e=m({},{localIdeographFontFamily:this._localIdeographFontFamily},e)).diff&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&t?(this._diffStyle(t,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(t,e))},r.prototype._getUIString=function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '"+t+"'");return e},r.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new Fh(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},r.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Fh(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},r.prototype._diffStyle=function(t,e){var r=this;if("string"==typeof t){var n=this._requestManager.normalizeStyleURL(t),i=this._requestManager.transformRequest(n,zt.Style);Lt(i,(function(t,n){t?r.fire(new jt(t)):n&&r._updateDiff(n,e)}))}else"object"==typeof t&&this._updateDiff(t,e)},r.prototype._updateDiff=function(t,e){try{this.style.setState(t)&&this._update(!0)}catch(r){I("Unable to perform style diff: "+(r.message||r.error||r)+".  Rebuilding the style from scratch."),this._updateStyle(t,e)}},r.prototype.getStyle=function(){if(this.style)return this.style.serialize()},r.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():I("There is no style added to the map.")},r.prototype.addSource=function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)},r.prototype.isSourceLoaded=function(t){var e=this.style&&this.style.sourceCaches[t];if(void 0!==e)return e.loaded();this.fire(new jt(new Error("There is no source with ID '"+t+"'")))},r.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var r=t[e]._tiles;for(var n in r){var i=r[n];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},r.prototype.addSourceType=function(t,e,r){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,r)},r.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},r.prototype.getSource=function(t){return this.style.getSource(t)},r.prototype.addImage=function(t,e,r){void 0===r&&(r={});var n=r.pixelRatio;void 0===n&&(n=1);var i=r.sdf;void 0===i&&(i=!1);var o=r.stretchX,a=r.stretchY,s=r.content;if(this._lazyInitEmptyStyle(),e instanceof vm||xm&&e instanceof xm){var l=V.getImageData(e);this.style.addImage(t,{data:new Ya({width:l.width,height:l.height},l.data),pixelRatio:n,stretchX:o,stretchY:a,content:s,sdf:i,version:0})}else{if(void 0===e.width||void 0===e.height)return this.fire(new jt(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var u=e;this.style.addImage(t,{data:new Ya({width:e.width,height:e.height},new Uint8Array(e.data)),pixelRatio:n,stretchX:o,stretchY:a,content:s,sdf:i,version:0,userImage:u}),u.onAdd&&u.onAdd(this,t)}},r.prototype.updateImage=function(t,e){var r=this.style.getImage(t);if(!r)return this.fire(new jt(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var n=e instanceof vm||xm&&e instanceof xm?V.getImageData(e):e,i=n.width,o=n.height,a=n.data;return void 0===i||void 0===o?this.fire(new jt(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):i!==r.data.width||o!==r.data.height?this.fire(new jt(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(r.data.replace(a,!(e instanceof vm||xm&&e instanceof xm)),void this.style.updateImage(t,r))},r.prototype.hasImage=function(t){return t?!!this.style.getImage(t):(this.fire(new jt(new Error("Missing required image id"))),!1)},r.prototype.removeImage=function(t){this.style.removeImage(t)},r.prototype.loadImage=function(t,e){Ft(this._requestManager.transformRequest(t,zt.Image),e)},r.prototype.listImages=function(){return this.style.listImages()},r.prototype.addLayer=function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)},r.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},r.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},r.prototype.getLayer=function(t){return this.style.getLayer(t)},r.prototype.setLayerZoomRange=function(t,e,r){return this.style.setLayerZoomRange(t,e,r),this._update(!0)},r.prototype.setFilter=function(t,e,r){return void 0===r&&(r={}),this.style.setFilter(t,e,r),this._update(!0)},r.prototype.getFilter=function(t){return this.style.getFilter(t)},r.prototype.setPaintProperty=function(t,e,r,n){return void 0===n&&(n={}),this.style.setPaintProperty(t,e,r,n),this._update(!0)},r.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},r.prototype.setLayoutProperty=function(t,e,r,n){return void 0===n&&(n={}),this.style.setLayoutProperty(t,e,r,n),this._update(!0)},r.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},r.prototype.setLight=function(t,e){return void 0===e&&(e={}),this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)},r.prototype.getLight=function(){return this.style.getLight()},r.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},r.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},r.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},r.prototype.getContainer=function(){return this._container},r.prototype.getCanvasContainer=function(){return this._canvasContainer},r.prototype.getCanvas=function(){return this._canvas},r.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},r.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==a.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&I("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},r.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=U.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=U.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=U.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var r=this._containerDimensions();this._resizeCanvas(r[0],r[1]);var n=this._controlContainer=U.create("div","mapboxgl-control-container",t),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(t){i[t]=U.create("div","mapboxgl-ctrl-"+t,n)})),this._container.addEventListener("scroll",this._onMapScroll,!1)},r.prototype._resizeCanvas=function(t,e){var r=V.devicePixelRatio||1;this._canvas.width=r*t,this._canvas.height=r*e,this._canvas.style.width=t+"px",this._canvas.style.height=e+"px"},r.prototype._setupPainter=function(){var t=m({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);r?(this.painter=new dd(r,this.transform),J.testSupport(r)):this.fire(new jt(new Error("Failed to initialize WebGL")))},r.prototype._contextLost=function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new Ut("webglcontextlost",{originalEvent:t}))},r.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new Ut("webglcontextrestored",{originalEvent:t}))},r.prototype._onMapScroll=function(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},r.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},r.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},r.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},r.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},r.prototype._render=function(t){var e,r=this,n=0,i=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(e=i.createQueryEXT(),i.beginQueryEXT(i.TIME_ELAPSED_EXT,e),n=V.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),!this._removed){var o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var a=this.transform.zoom,s=V.now();this.style.zoomHistory.update(a,s);var l=new Ci(a,{now:s,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),u=l.crossFadingFactor();1===u&&u===this._crossFadingFactor||(o=!0,this._crossFadingFactor=u),this.style.update(l)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new Ut("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new Ut("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var c=V.now()-n;i.endQueryEXT(i.TIME_ELAPSED_EXT,e),setTimeout((function(){var t=i.getQueryObjectEXT(e,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(e),r.fire(new Ut("gpu-timing-frame",{cpuTime:c,gpuTime:t}))}),50)}if(this.listens("gpu-timing-layer")){var p=this.painter.collectGpuTimers();setTimeout((function(){var t=r.painter.queryGpuTimers(p);r.fire(new Ut("gpu-timing-layer",{layerTimes:t}))}),50)}var h=this._sourcesDirty||this._styleDirty||this._placementDirty;return h||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new Ut("idle")),!this._loaded||this._fullyLoaded||h||(this._fullyLoaded=!0),this}},r.prototype.remove=function(){this._hash&&this._hash.remove();for(var t=0,e=this._controls;t<e.length;t+=1)e[t].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==a&&(a.removeEventListener("resize",this._onWindowResize,!1),a.removeEventListener("orientationchange",this._onWindowResize,!1),a.removeEventListener("online",this._onWindowOnline,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),Sm(this._canvasContainer),Sm(this._controlContainer),Sm(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new Ut("remove"))},r.prototype.triggerRepaint=function(){var t=this;this.style&&!this._frame&&(this._frame=V.frame((function(e){t._frame=null,t._render(e)})))},r.prototype._onWindowOnline=function(){this._update()},r.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},n.showTileBoundaries.get=function(){return!!this._showTileBoundaries},n.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},n.showPadding.get=function(){return!!this._showPadding},n.showPadding.set=function(t){this._showPadding!==t&&(this._showPadding=t,this._update())},n.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},n.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},n.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},n.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},n.repaint.get=function(){return!!this._repaint},n.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},n.vertices.get=function(){return!!this._vertices},n.vertices.set=function(t){this._vertices=t,this._update()},r.prototype._setCacheLimits=function(t,e){!function(t,e){xt=t,bt=e}(t,e)},n.version.get=function(){return"1.13.3"},Object.defineProperties(r.prototype,n),r}(fm);function Sm(t){t.parentNode&&t.parentNode.removeChild(t)}var km={showCompass:!0,showZoom:!0,visualizePitch:!1},Tm=function(t){var e=this;this.options=m({},km,t),this._container=U.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.options.showZoom&&(b(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(t){return e._map.zoomIn({},{originalEvent:t})})),U.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(t){return e._map.zoomOut({},{originalEvent:t})})),U.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(b(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(t){e.options.visualizePitch?e._map.resetNorthPitch({},{originalEvent:t}):e._map.resetNorth({},{originalEvent:t})})),this._compassIcon=U.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Tm.prototype._updateZoomButtons=function(){var t=this._map.getZoom(),e=t===this._map.getMaxZoom(),r=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=r,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",r.toString())},Tm.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=t},Tm.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Em(this._map,this._compass,this.options.visualizePitch)),this._container},Tm.prototype.onRemove=function(){U.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Tm.prototype._createButton=function(t,e){var r=U.create("button",t,this._container);return r.type="button",r.addEventListener("click",e),r},Tm.prototype._setButtonTitle=function(t,e){var r=this._map._getUIString("NavigationControl."+e);t.title=r,t.setAttribute("aria-label",r)};var Em=function(t,e,r){void 0===r&&(r=!1),this._clickTolerance=10,this.element=e,this.mouseRotate=new jd({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,r&&(this.mousePitch=new qd({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),b(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),U.addEventListener(e,"mousedown",this.mousedown),U.addEventListener(e,"touchstart",this.touchstart,{passive:!1}),U.addEventListener(e,"touchmove",this.touchmove),U.addEventListener(e,"touchend",this.touchend),U.addEventListener(e,"touchcancel",this.reset)};function Im(t,e,r){if(t=new $u(t.lng,t.lat),e){var n=new $u(t.lng-360,t.lat),i=new $u(t.lng+360,t.lat),o=r.locationPoint(t).distSqr(e);r.locationPoint(n).distSqr(e)<o?t=n:r.locationPoint(i).distSqr(e)<o&&(t=i)}for(;Math.abs(t.lng-r.center.lng)>180;){var a=r.locationPoint(t);if(a.x>=0&&a.y>=0&&a.x<=r.width&&a.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}Em.prototype.down=function(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),U.disableDrag()},Em.prototype.move=function(t,e){var r=this.map,n=this.mouseRotate.mousemoveWindow(t,e);if(n&&n.bearingDelta&&r.setBearing(r.getBearing()+n.bearingDelta),this.mousePitch){var i=this.mousePitch.mousemoveWindow(t,e);i&&i.pitchDelta&&r.setPitch(r.getPitch()+i.pitchDelta)}},Em.prototype.off=function(){var t=this.element;U.removeEventListener(t,"mousedown",this.mousedown),U.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),U.removeEventListener(t,"touchmove",this.touchmove),U.removeEventListener(t,"touchend",this.touchend),U.removeEventListener(t,"touchcancel",this.reset),this.offTemp()},Em.prototype.offTemp=function(){U.enableDrag(),U.removeEventListener(a,"mousemove",this.mousemove),U.removeEventListener(a,"mouseup",this.mouseup)},Em.prototype.mousedown=function(t){this.down(m({},t,{ctrlKey:!0,preventDefault:function(){return t.preventDefault()}}),U.mousePos(this.element,t)),U.addEventListener(a,"mousemove",this.mousemove),U.addEventListener(a,"mouseup",this.mouseup)},Em.prototype.mousemove=function(t){this.move(t,U.mousePos(this.element,t))},Em.prototype.mouseup=function(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()},Em.prototype.touchstart=function(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=U.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return t.preventDefault()}},this._startPos))},Em.prototype.touchmove=function(t){1!==t.targetTouches.length?this.reset():(this._lastPos=U.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:function(){return t.preventDefault()}},this._lastPos))},Em.prototype.touchend=function(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Em.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var zm={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Cm(t,e,r){var n=t.classList;for(var i in zm)n.remove("mapboxgl-"+r+"-anchor-"+i);n.add("mapboxgl-"+r+"-anchor-"+e)}var Am,Pm=function(t){function e(e,r){if(t.call(this),(e instanceof a.HTMLElement||r)&&(e=m({element:e},r)),b(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,e&&e.element)this._element=e.element,this._offset=i.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=U.create("div"),this._element.setAttribute("aria-label","Map marker");var n=U.createNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height","41px"),n.setAttributeNS(null,"width","27px"),n.setAttributeNS(null,"viewBox","0 0 27 41");var o=U.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");var s=U.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");var l=U.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");for(var u=0,c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];u<c.length;u+=1){var p=c[u],h=U.createNS("http://www.w3.org/2000/svg","ellipse");h.setAttributeNS(null,"opacity","0.04"),h.setAttributeNS(null,"cx","10.5"),h.setAttributeNS(null,"cy","5.80029008"),h.setAttributeNS(null,"rx",p.rx),h.setAttributeNS(null,"ry",p.ry),l.appendChild(h)}var f=U.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"fill",this._color);var d=U.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),f.appendChild(d);var y=U.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"opacity","0.25"),y.setAttributeNS(null,"fill","#000000");var g=U.createNS("http://www.w3.org/2000/svg","path");g.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),y.appendChild(g);var v=U.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(6.0, 7.0)"),v.setAttributeNS(null,"fill","#FFFFFF");var _=U.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"transform","translate(8.0, 8.0)");var x=U.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#000000"),x.setAttributeNS(null,"opacity","0.25"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962");var w=U.createNS("http://www.w3.org/2000/svg","circle");w.setAttributeNS(null,"fill","#FFFFFF"),w.setAttributeNS(null,"cx","5.5"),w.setAttributeNS(null,"cy","5.5"),w.setAttributeNS(null,"r","5.4999962"),_.appendChild(x),_.appendChild(w),s.appendChild(l),s.appendChild(f),s.appendChild(y),s.appendChild(v),s.appendChild(_),n.appendChild(s),n.setAttributeNS(null,"height",41*this._scale+"px"),n.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(n),this._offset=i.convert(e&&e.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(t){t.preventDefault()})),this._element.addEventListener("mousedown",(function(t){t.preventDefault()})),Cm(this._element,this._anchor,"marker"),this._popup=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},e.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),U.remove(this._element),this._popup&&this._popup.remove(),this},e.prototype.getLngLat=function(){return this._lngLat},e.prototype.setLngLat=function(t){return this._lngLat=$u.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},e.prototype.getElement=function(){return this._element},e.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},e.prototype._onKeyPress=function(t){var e=t.code,r=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==r&&13!==r||this.togglePopup()},e.prototype._onMapClick=function(t){var e=t.originalEvent.target,r=this._element;this._popup&&(e===r||r.contains(e))&&this.togglePopup()},e.prototype.getPopup=function(){return this._popup},e.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},e.prototype._update=function(t){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Im(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(e="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var r="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?r="rotateX(0deg)":"map"===this._pitchAlignment&&(r="rotateX("+this._map.getPitch()+"deg)"),t&&"moveend"!==t.type||(this._pos=this._pos.round()),U.setTransform(this._element,zm[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+r+" "+e)}},e.prototype.getOffset=function(){return this._offset},e.prototype.setOffset=function(t){return this._offset=i.convert(t),this._update(),this},e.prototype._onMove=function(t){if(!this._isDragging){var e=this._clickTolerance||this._map._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=e}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new Ut("dragstart"))),this.fire(new Ut("drag")))},e.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new Ut("dragend")),this._state="inactive"},e.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},e.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},e.prototype.isDraggable=function(){return this._draggable},e.prototype.setRotation=function(t){return this._rotation=t||0,this._update(),this},e.prototype.getRotation=function(){return this._rotation},e.prototype.setRotationAlignment=function(t){return this._rotationAlignment=t||"auto",this._update(),this},e.prototype.getRotationAlignment=function(){return this._rotationAlignment},e.prototype.setPitchAlignment=function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this},e.prototype.getPitchAlignment=function(){return this._pitchAlignment},e}(qt),Dm={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Mm=0,Lm=!1,Rm=function(t){function e(e){t.call(this),this.options=m({},Dm,e),b(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.onAdd=function(t){var e;return this._map=t,this._container=U.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),e=this._setupUI,void 0!==Am?e(Am):void 0!==a.navigator.permissions?a.navigator.permissions.query({name:"geolocation"}).then((function(t){e(Am="denied"!==t.state)})):e(Am=!!a.navigator.geolocation),this._container},e.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(a.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),U.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Mm=0,Lm=!1},e.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),r=t.coords;return e&&(r.longitude<e.getWest()||r.longitude>e.getEast()||r.latitude<e.getSouth()||r.latitude>e.getNorth())},e.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},e.prototype._onSuccess=function(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new Ut("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new Ut("geolocate",t)),this._finish()}},e.prototype._updateCamera=function(t){var e=new $u(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy,n=m({bearing:this._map.getBearing()},this.options.fitBoundsOptions);this._map.fitBounds(e.toBounds(r),n,{geolocateSource:!0})},e.prototype._updateMarker=function(t){if(t){var e=new $u(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(e).addTo(this._map),this._userLocationDotMarker.setLngLat(e).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},e.prototype._updateCircleRadius=function(){var t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),r=this._map.unproject([1,t]),n=e.distanceTo(r),i=Math.ceil(2*this._accuracy/n);this._circleElement.style.width=i+"px",this._circleElement.style.height=i+"px"},e.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},e.prototype._onError=function(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&Lm)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new Ut("error",t)),this._finish()}},e.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},e.prototype._setupUI=function(t){var e=this;if(this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this._geolocateButton=U.create("button","mapboxgl-ctrl-geolocate",this._container),U.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===t){I("Geolocation support is not available so the GeolocateControl will be disabled.");var r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}else{var n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=U.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Pm(this._dotElement),this._circleElement=U.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Pm({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(t){t.geolocateSource||"ACTIVE_LOCK"!==e._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(e._watchState="BACKGROUND",e._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),e._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),e.fire(new Ut("trackuserlocationend")))}))},e.prototype.trigger=function(){if(!this._setup)return I("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new Ut("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Mm--,Lm=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new Ut("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new Ut("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Mm>1?(t={maximumAge:6e5,timeout:0},Lm=!0):(t=this.options.positionOptions,Lm=!1),this._geolocationWatchID=a.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)}}else a.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},e.prototype._clearWatch=function(){a.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},e}(qt),Bm={maxWidth:100,unit:"metric"},Om=function(t){this.options=m({},Bm,t),b(["_onMove","setUnit"],this)};function Fm(t,e,r){var n=r&&r.maxWidth||100,i=t._container.clientHeight/2,o=t.unproject([0,i]),a=t.unproject([n,i]),s=o.distanceTo(a);if(r&&"imperial"===r.unit){var l=3.2808*s;l>5280?Nm(e,n,l/5280,t._getUIString("ScaleControl.Miles")):Nm(e,n,l,t._getUIString("ScaleControl.Feet"))}else r&&"nautical"===r.unit?Nm(e,n,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?Nm(e,n,s/1e3,t._getUIString("ScaleControl.Kilometers")):Nm(e,n,s,t._getUIString("ScaleControl.Meters"))}function Nm(t,e,r,n){var i,o,a,s=(i=r,(o=Math.pow(10,(""+Math.floor(i)).length-1))*(a=(a=i/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(a)));t.style.width=e*(s/r)+"px",t.innerHTML=s+"&nbsp;"+n}Om.prototype.getDefaultPosition=function(){return"bottom-left"},Om.prototype._onMove=function(){Fm(this._map,this._container,this.options)},Om.prototype.onAdd=function(t){return this._map=t,this._container=U.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Om.prototype.onRemove=function(){U.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Om.prototype.setUnit=function(t){this.options.unit=t,Fm(this._map,this._container,this.options)};var Vm=function(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof a.HTMLElement?this._container=t.container:I("Full screen control 'container' must be a DOM element.")),b(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.document&&(this._fullscreenchange="MSFullscreenChange")};Vm.prototype.onAdd=function(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=U.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",I("This device does not support fullscreen mode.")),this._controlContainer},Vm.prototype.onRemove=function(){U.remove(this._controlContainer),this._map=null,a.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Vm.prototype._checkFullscreenSupport=function(){return!!(a.document.fullscreenEnabled||a.document.mozFullScreenEnabled||a.document.msFullscreenEnabled||a.document.webkitFullscreenEnabled)},Vm.prototype._setupUI=function(){var t=this._fullscreenButton=U.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);U.create("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden",!0),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.document.addEventListener(this._fullscreenchange,this._changeIcon)},Vm.prototype._updateTitle=function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},Vm.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Vm.prototype._isFullscreen=function(){return this._fullscreen},Vm.prototype._changeIcon=function(){(a.document.fullscreenElement||a.document.mozFullScreenElement||a.document.webkitFullscreenElement||a.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Vm.prototype._onClickFullscreen=function(){this._isFullscreen()?a.document.exitFullscreen?a.document.exitFullscreen():a.document.mozCancelFullScreen?a.document.mozCancelFullScreen():a.document.msExitFullscreen?a.document.msExitFullscreen():a.document.webkitCancelFullScreen&&a.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Um={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},jm=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),qm=function(t){function e(e){t.call(this),this.options=m(Object.create(Um),e),b(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.addTo=function(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new Ut("open")),this},e.prototype.isOpen=function(){return!!this._map},e.prototype.remove=function(){return this._content&&U.remove(this._content),this._container&&(U.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new Ut("close")),this},e.prototype.getLngLat=function(){return this._lngLat},e.prototype.setLngLat=function(t){return this._lngLat=$u.convert(t),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},e.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},e.prototype.getElement=function(){return this._container},e.prototype.setText=function(t){return this.setDOMContent(a.document.createTextNode(t))},e.prototype.setHTML=function(t){var e,r=a.document.createDocumentFragment(),n=a.document.createElement("body");for(n.innerHTML=t;e=n.firstChild;)r.appendChild(e);return this.setDOMContent(r)},e.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},e.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},e.prototype.setDOMContent=function(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=U.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this},e.prototype.addClassName=function(t){this._container&&this._container.classList.add(t)},e.prototype.removeClassName=function(t){this._container&&this._container.classList.remove(t)},e.prototype.setOffset=function(t){return this.options.offset=t,this._update(),this},e.prototype.toggleClassName=function(t){if(this._container)return this._container.classList.toggle(t)},e.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=U.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},e.prototype._onMouseUp=function(t){this._update(t.point)},e.prototype._onMouseMove=function(t){this._update(t.point)},e.prototype._onDrag=function(t){this._update(t.point)},e.prototype._update=function(t){var e=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=U.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=U.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(t){return e._container.classList.add(t)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Im(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||t)){var r=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat),n=this.options.anchor,o=function t(e){if(e){if("number"==typeof e){var r=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{center:new i(0,0),top:new i(0,e),"top-left":new i(r,r),"top-right":new i(-r,r),bottom:new i(0,-e),"bottom-left":new i(r,-r),"bottom-right":new i(-r,-r),left:new i(e,0),right:new i(-e,0)}}if(e instanceof i||Array.isArray(e)){var n=i.convert(e);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:i.convert(e.center||[0,0]),top:i.convert(e.top||[0,0]),"top-left":i.convert(e["top-left"]||[0,0]),"top-right":i.convert(e["top-right"]||[0,0]),bottom:i.convert(e.bottom||[0,0]),"bottom-left":i.convert(e["bottom-left"]||[0,0]),"bottom-right":i.convert(e["bottom-right"]||[0,0]),left:i.convert(e.left||[0,0]),right:i.convert(e.right||[0,0])}}return t(new i(0,0))}(this.options.offset);if(!n){var a,s=this._container.offsetWidth,l=this._container.offsetHeight;a=r.y+o.bottom.y<l?["top"]:r.y>this._map.transform.height-l?["bottom"]:[],r.x<s/2?a.push("left"):r.x>this._map.transform.width-s/2&&a.push("right"),n=0===a.length?"bottom":a.join("-")}var u=r.add(o[n]).round();U.setTransform(this._container,zm[n]+" translate("+u.x+"px,"+u.y+"px)"),Cm(this._container,n,"popup")}},e.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var t=this._container.querySelector(jm);t&&t.focus()}},e.prototype._onClose=function(){this.remove()},e}(qt),Zm={version:"1.13.3",supported:e,setRTLTextPlugin:function(t,e,r){if(void 0===r&&(r=!1),"deferred"===bi||"loading"===bi||"loaded"===bi)throw new Error("setRTLTextPlugin cannot be called multiple times.");wi=V.resolveURL(t),bi="deferred",xi=e,ki(),r||Ii()},getRTLTextPluginStatus:Ei,Map:wm,NavigationControl:Tm,GeolocateControl:Rm,AttributionControl:dm,ScaleControl:Om,FullscreenControl:Vm,Popup:qm,Marker:Pm,Style:Fh,LngLat:$u,LngLatBounds:Qu,Point:i,MercatorCoordinate:oc,Evented:qt,config:$,prewarm:function(){Mp().acquire(Cp)},clearPrewarmedResources:function(){var t=Pp;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(Cp),Pp=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return $.ACCESS_TOKEN},set accessToken(t){$.ACCESS_TOKEN=t},get baseApiUrl(){return $.API_URL},set baseApiUrl(t){$.API_URL=t},get workerCount(){return Ap.workerCount},set workerCount(t){Ap.workerCount=t},get maxParallelImageRequests(){return $.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){$.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage:function(t){!function(t){var e=a.caches.delete("mapbox-tiles");t&&e.catch(t).then((function(){return t()}))}(t)},workerUrl:""};return Zm}()},463:function(t,e,r){"use strict";var n=r(791),i=r(296);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(t,e){u(t,e),u(t+"Capture",e)}function u(t,e){for(s[t]=e,t=0;t<e.length;t++)a.add(e[t])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),p=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},d={};function m(t,e,r,n,i,o,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){y[t]=new m(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];y[e]=new m(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){y[t]=new m(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){y[t]=new m(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){y[t]=new m(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){y[t]=new m(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){y[t]=new m(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){y[t]=new m(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){y[t]=new m(t,5,!1,t.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function v(t){return t[1].toUpperCase()}function _(t,e,r,n){var i=y.hasOwnProperty(e)?y[e]:null;(null!==i?0!==i.type:n||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,r,n){if(null===e||"undefined"===typeof e||function(t,e,r,n){if(null!==r&&0===r.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,r,i,n)&&(r=null),n||null===i?function(t){return!!p.call(d,t)||!p.call(f,t)&&(h.test(t)?d[t]=!0:(f[t]=!0,!1))}(e)&&(null===r?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=null===r?3!==i.type&&"":r:(e=i.attributeName,n=i.attributeNamespace,null===r?t.removeAttribute(e):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(g,v);y[e]=new m(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(g,v);y[e]=new m(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(g,v);y[e]=new m(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){y[t]=new m(t,1,!1,t.toLowerCase(),null,!1,!1)})),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){y[t]=new m(t,1,!1,t.toLowerCase(),null,!0,!0)}));var x=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),I=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function R(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=L&&t[L]||t["@@iterator"])?t:null}var B,O=Object.assign;function F(t){if(void 0===B)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);B=e&&e[1]||""}return"\n"+B+t}var N=!1;function V(t,e){if(!t||N)return"";N=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=n.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=a&&0<=s);break}}}finally{N=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?F(t):""}function U(t){switch(t.tag){case 5:return F(t.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return t=V(t.type,!1);case 11:return t=V(t.type.render,!1);case 1:return t=V(t.type,!0);default:return""}}function j(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case S:return"Fragment";case w:return"Portal";case T:return"Profiler";case k:return"StrictMode";case C:return"Suspense";case A:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case I:return(t.displayName||"Context")+".Consumer";case E:return(t._context.displayName||"Context")+".Provider";case z:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case P:return null!==(e=t.displayName||null)?e:j(t.type)||"Memo";case D:e=t._payload,t=t._init;try{return j(t(e))}catch(r){}}return null}function q(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(e);case 8:return e===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function Z(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function G(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function W(t){t._valueTracker||(t._valueTracker=function(t){var e=G(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){n=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(t){n=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function H(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=G(t)?t.checked?"true":"false":t.value),(t=n)!==r&&(e.setValue(t),!0)}function X(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function K(t,e){var r=e.checked;return O({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:t._wrapperState.initialChecked})}function Y(t,e){var r=null==e.defaultValue?"":e.defaultValue,n=null!=e.checked?e.checked:e.defaultChecked;r=Z(null!=e.value?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Q(t,e){null!=(e=e.checked)&&_(t,"checked",e,!1)}function $(t,e){Q(t,e);var r=Z(e.value),n=e.type;if(null!=r)"number"===n?(0===r&&""===t.value||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if("submit"===n||"reset"===n)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,r):e.hasOwnProperty("defaultValue")&&tt(t,e.type,Z(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function J(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!("submit"!==n&&"reset"!==n||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}""!==(r=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==r&&(t.name=r)}function tt(t,e,r){"number"===e&&X(t.ownerDocument)===t||(null==r?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var et=Array.isArray;function rt(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Z(r),e=null,i=0;i<t.length;i++){if(t[i].value===r)return t[i].selected=!0,void(n&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function nt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return O({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function it(t,e){var r=e.value;if(null==r){if(r=e.children,e=e.defaultValue,null!=r){if(null!=e)throw Error(o(92));if(et(r)){if(1<r.length)throw Error(o(93));r=r[0]}e=r}null==e&&(e=""),r=e}t._wrapperState={initialValue:Z(r)}}function ot(t,e){var r=Z(e.value),n=Z(e.defaultValue);null!=r&&((r=""+r)!==t.value&&(t.value=r),null==e.defaultValue&&t.defaultValue!==r&&(t.defaultValue=r)),null!=n&&(t.defaultValue=""+n)}function at(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function st(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?st(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ut,ct,pt=(ct=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ut=ut||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ut.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,r,n){MSApp.execUnsafeLocalFunction((function(){return ct(t,e)}))}:ct);function ht(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&3===r.nodeType)return void(r.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dt=["Webkit","ms","Moz","O"];function mt(t,e,r){return null==e||"boolean"===typeof e||""===e?"":r||"number"!==typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function yt(t,e){for(var r in t=t.style,e)if(e.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=mt(r,e[r],n);"float"===r&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}Object.keys(ft).forEach((function(t){dt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]}))}));var gt=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(t,e){if(e){if(gt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(o(62))}}function _t(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xt=null;function bt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var wt=null,St=null,kt=null;function Tt(t){if(t=_i(t)){if("function"!==typeof wt)throw Error(o(280));var e=t.stateNode;e&&(e=bi(e),wt(t.stateNode,t.type,e))}}function Et(t){St?kt?kt.push(t):kt=[t]:St=t}function It(){if(St){var t=St,e=kt;if(kt=St=null,Tt(t),e)for(t=0;t<e.length;t++)Tt(e[t])}}function zt(t,e){return t(e)}function Ct(){}var At=!1;function Pt(t,e,r){if(At)return t(e,r);At=!0;try{return zt(t,e,r)}finally{At=!1,(null!==St||null!==kt)&&(Ct(),It())}}function Dt(t,e){var r=t.stateNode;if(null===r)return null;var n=bi(r);if(null===n)return null;r=n[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!n;break t;default:t=!1}if(t)return null;if(r&&"function"!==typeof r)throw Error(o(231,e,typeof r));return r}var Mt=!1;if(c)try{var Lt={};Object.defineProperty(Lt,"passive",{get:function(){Mt=!0}}),window.addEventListener("test",Lt,Lt),window.removeEventListener("test",Lt,Lt)}catch(ct){Mt=!1}function Rt(t,e,r,n,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(c){this.onError(c)}}var Bt=!1,Ot=null,Ft=!1,Nt=null,Vt={onError:function(t){Bt=!0,Ot=t}};function Ut(t,e,r,n,i,o,a,s,l){Bt=!1,Ot=null,Rt.apply(Vt,arguments)}function jt(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(r=e.return),t=e.return}while(t)}return 3===e.tag?r:null}function qt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Zt(t){if(jt(t)!==t)throw Error(o(188))}function Gt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=jt(t)))throw Error(o(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(n=i.return)){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return Zt(i),t;if(a===n)return Zt(i),e;a=a.sibling}throw Error(o(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,l=i.child;l;){if(l===r){s=!0,r=i,n=a;break}if(l===n){s=!0,n=i,r=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===r){s=!0,r=a,n=i;break}if(l===n){s=!0,n=a,r=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(r.alternate!==n)throw Error(o(190))}if(3!==r.tag)throw Error(o(188));return r.stateNode.current===r?t:e}(t))?Wt(t):null}function Wt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Wt(t);if(null!==e)return e;t=t.sibling}return null}var Ht=i.unstable_scheduleCallback,Xt=i.unstable_cancelCallback,Kt=i.unstable_shouldYield,Yt=i.unstable_requestPaint,Qt=i.unstable_now,$t=i.unstable_getCurrentPriorityLevel,Jt=i.unstable_ImmediatePriority,te=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,re=i.unstable_LowPriority,ne=i.unstable_IdlePriority,ie=null,oe=null;var ae=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(se(t)/le|0)|0},se=Math.log,le=Math.LN2;var ue=64,ce=4194304;function pe(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function he(t,e){var r=t.pendingLanes;if(0===r)return 0;var n=0,i=t.suspendedLanes,o=t.pingedLanes,a=268435455&r;if(0!==a){var s=a&~i;0!==s?n=pe(s):0!==(o&=a)&&(n=pe(o))}else 0!==(a=r&~i)?n=pe(a):0!==o&&(n=pe(o));if(0===n)return 0;if(0!==e&&e!==n&&0===(e&i)&&((i=n&-n)>=(o=e&-e)||16===i&&0!==(4194240&o)))return e;if(0!==(4&n)&&(n|=16&r),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=n;0<e;)i=1<<(r=31-ae(e)),n|=t[r],e&=~i;return n}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function de(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function me(){var t=ue;return 0===(4194240&(ue<<=1))&&(ue=64),t}function ye(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function ge(t,e,r){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-ae(e)]=r}function ve(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-ae(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var _e=0;function xe(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var be,we,Se,ke,Te,Ee=!1,Ie=[],ze=null,Ce=null,Ae=null,Pe=new Map,De=new Map,Me=[],Le="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Re(t,e){switch(t){case"focusin":case"focusout":ze=null;break;case"dragenter":case"dragleave":Ce=null;break;case"mouseover":case"mouseout":Ae=null;break;case"pointerover":case"pointerout":Pe.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":De.delete(e.pointerId)}}function Be(t,e,r,n,i,o){return null===t||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},null!==e&&(null!==(e=_i(e))&&we(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function Oe(t){var e=vi(t.target);if(null!==e){var r=jt(e);if(null!==r)if(13===(e=r.tag)){if(null!==(e=qt(r)))return t.blockedOn=e,void Te(t.priority,(function(){Se(r)}))}else if(3===e&&r.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}t.blockedOn=null}function Fe(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var r=Ke(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==r)return null!==(e=_i(r))&&we(e),t.blockedOn=r,!1;var n=new(r=t.nativeEvent).constructor(r.type,r);xt=n,r.target.dispatchEvent(n),xt=null,e.shift()}return!0}function Ne(t,e,r){Fe(t)&&r.delete(e)}function Ve(){Ee=!1,null!==ze&&Fe(ze)&&(ze=null),null!==Ce&&Fe(Ce)&&(Ce=null),null!==Ae&&Fe(Ae)&&(Ae=null),Pe.forEach(Ne),De.forEach(Ne)}function Ue(t,e){t.blockedOn===e&&(t.blockedOn=null,Ee||(Ee=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ve)))}function je(t){function e(e){return Ue(e,t)}if(0<Ie.length){Ue(Ie[0],t);for(var r=1;r<Ie.length;r++){var n=Ie[r];n.blockedOn===t&&(n.blockedOn=null)}}for(null!==ze&&Ue(ze,t),null!==Ce&&Ue(Ce,t),null!==Ae&&Ue(Ae,t),Pe.forEach(e),De.forEach(e),r=0;r<Me.length;r++)(n=Me[r]).blockedOn===t&&(n.blockedOn=null);for(;0<Me.length&&null===(r=Me[0]).blockedOn;)Oe(r),null===r.blockedOn&&Me.shift()}var qe=x.ReactCurrentBatchConfig,Ze=!0;function Ge(t,e,r,n){var i=_e,o=qe.transition;qe.transition=null;try{_e=1,He(t,e,r,n)}finally{_e=i,qe.transition=o}}function We(t,e,r,n){var i=_e,o=qe.transition;qe.transition=null;try{_e=4,He(t,e,r,n)}finally{_e=i,qe.transition=o}}function He(t,e,r,n){if(Ze){var i=Ke(t,e,r,n);if(null===i)Zn(t,e,n,Xe,r),Re(t,n);else if(function(t,e,r,n,i){switch(e){case"focusin":return ze=Be(ze,t,e,r,n,i),!0;case"dragenter":return Ce=Be(Ce,t,e,r,n,i),!0;case"mouseover":return Ae=Be(Ae,t,e,r,n,i),!0;case"pointerover":var o=i.pointerId;return Pe.set(o,Be(Pe.get(o)||null,t,e,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,De.set(o,Be(De.get(o)||null,t,e,r,n,i)),!0}return!1}(i,t,e,r,n))n.stopPropagation();else if(Re(t,n),4&e&&-1<Le.indexOf(t)){for(;null!==i;){var o=_i(i);if(null!==o&&be(o),null===(o=Ke(t,e,r,n))&&Zn(t,e,n,Xe,r),o===i)break;i=o}null!==i&&n.stopPropagation()}else Zn(t,e,n,null,r)}}var Xe=null;function Ke(t,e,r,n){if(Xe=null,null!==(t=vi(t=bt(n))))if(null===(e=jt(t)))t=null;else if(13===(r=e.tag)){if(null!==(t=qt(e)))return t;t=null}else if(3===r){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xe=t,null}function Ye(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($t()){case Jt:return 1;case te:return 4;case ee:case re:return 16;case ne:return 536870912;default:return 16}default:return 16}}var Qe=null,$e=null,Je=null;function tr(){if(Je)return Je;var t,e,r=$e,n=r.length,i="value"in Qe?Qe.value:Qe.textContent,o=i.length;for(t=0;t<n&&r[t]===i[t];t++);var a=n-t;for(e=1;e<=a&&r[n-e]===i[o-e];e++);return Je=i.slice(t,1<e?1-e:void 0)}function er(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function rr(){return!0}function nr(){return!1}function ir(t){function e(e,r,n,i,o){for(var a in this._reactName=e,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return O(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),e}var or,ar,sr,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ur=ir(lr),cr=O({},lr,{view:0,detail:0}),pr=ir(cr),hr=O({},cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kr,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==sr&&(sr&&"mousemove"===t.type?(or=t.screenX-sr.screenX,ar=t.screenY-sr.screenY):ar=or=0,sr=t),or)},movementY:function(t){return"movementY"in t?t.movementY:ar}}),fr=ir(hr),dr=ir(O({},hr,{dataTransfer:0})),mr=ir(O({},cr,{relatedTarget:0})),yr=ir(O({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),gr=O({},lr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vr=ir(gr),_r=ir(O({},lr,{data:0})),xr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},br={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sr(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=wr[t])&&!!e[t]}function kr(){return Sr}var Tr=O({},cr,{key:function(t){if(t.key){var e=xr[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=er(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?br[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kr,charCode:function(t){return"keypress"===t.type?er(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?er(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Er=ir(Tr),Ir=ir(O({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),zr=ir(O({},cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kr})),Cr=ir(O({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ar=O({},hr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Pr=ir(Ar),Dr=[9,13,27,32],Mr=c&&"CompositionEvent"in window,Lr=null;c&&"documentMode"in document&&(Lr=document.documentMode);var Rr=c&&"TextEvent"in window&&!Lr,Br=c&&(!Mr||Lr&&8<Lr&&11>=Lr),Or=String.fromCharCode(32),Fr=!1;function Nr(t,e){switch(t){case"keyup":return-1!==Dr.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vr(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Ur=!1;var jr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!jr[t.type]:"textarea"===e}function Zr(t,e,r,n){Et(n),0<(e=Wn(e,"onChange")).length&&(r=new ur("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Gr=null,Wr=null;function Hr(t){Fn(t,0)}function Xr(t){if(H(xi(t)))return t}function Kr(t,e){if("change"===t)return e}var Yr=!1;if(c){var Qr;if(c){var $r="oninput"in document;if(!$r){var Jr=document.createElement("div");Jr.setAttribute("oninput","return;"),$r="function"===typeof Jr.oninput}Qr=$r}else Qr=!1;Yr=Qr&&(!document.documentMode||9<document.documentMode)}function tn(){Gr&&(Gr.detachEvent("onpropertychange",en),Wr=Gr=null)}function en(t){if("value"===t.propertyName&&Xr(Wr)){var e=[];Zr(e,Wr,t,bt(t)),Pt(Hr,e)}}function rn(t,e,r){"focusin"===t?(tn(),Wr=r,(Gr=e).attachEvent("onpropertychange",en)):"focusout"===t&&tn()}function nn(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Xr(Wr)}function on(t,e){if("click"===t)return Xr(e)}function an(t,e){if("input"===t||"change"===t)return Xr(e)}var sn="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function ln(t,e){if(sn(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!p.call(e,i)||!sn(t[i],e[i]))return!1}return!0}function un(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cn(t,e){var r,n=un(t);for(t=0;n;){if(3===n.nodeType){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=un(n)}}function pn(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?pn(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function hn(){for(var t=window,e=X();e instanceof t.HTMLIFrameElement;){try{var r="string"===typeof e.contentWindow.location.href}catch(n){r=!1}if(!r)break;e=X((t=e.contentWindow).document)}return e}function fn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function dn(t){var e=hn(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&pn(r.ownerDocument.documentElement,r)){if(null!==n&&fn(r))if(e=n.start,void 0===(t=n.end)&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if((t=(e=r.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=void 0===n.end?o:Math.min(n.end,i),!t.extend&&o>n&&(i=n,n=o,o=i),i=cn(r,o);var a=cn(r,n);i&&a&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}for(e=[],t=r;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<e.length;r++)(t=e[r]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mn=c&&"documentMode"in document&&11>=document.documentMode,yn=null,gn=null,vn=null,_n=!1;function xn(t,e,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;_n||null==yn||yn!==X(n)||("selectionStart"in(n=yn)&&fn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},vn&&ln(vn,n)||(vn=n,0<(n=Wn(gn,"onSelect")).length&&(e=new ur("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=yn)))}function bn(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var wn={animationend:bn("Animation","AnimationEnd"),animationiteration:bn("Animation","AnimationIteration"),animationstart:bn("Animation","AnimationStart"),transitionend:bn("Transition","TransitionEnd")},Sn={},kn={};function Tn(t){if(Sn[t])return Sn[t];if(!wn[t])return t;var e,r=wn[t];for(e in r)if(r.hasOwnProperty(e)&&e in kn)return Sn[t]=r[e];return t}c&&(kn=document.createElement("div").style,"AnimationEvent"in window||(delete wn.animationend.animation,delete wn.animationiteration.animation,delete wn.animationstart.animation),"TransitionEvent"in window||delete wn.transitionend.transition);var En=Tn("animationend"),In=Tn("animationiteration"),zn=Tn("animationstart"),Cn=Tn("transitionend"),An=new Map,Pn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(t,e){An.set(t,e),l(e,[t])}for(var Mn=0;Mn<Pn.length;Mn++){var Ln=Pn[Mn];Dn(Ln.toLowerCase(),"on"+(Ln[0].toUpperCase()+Ln.slice(1)))}Dn(En,"onAnimationEnd"),Dn(In,"onAnimationIteration"),Dn(zn,"onAnimationStart"),Dn("dblclick","onDoubleClick"),Dn("focusin","onFocus"),Dn("focusout","onBlur"),Dn(Cn,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rn));function On(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,function(t,e,r,n,i,a,s,l,u){if(Ut.apply(this,arguments),Bt){if(!Bt)throw Error(o(198));var c=Ot;Bt=!1,Ot=null,Ft||(Ft=!0,Nt=c)}}(n,e,void 0,t),t.currentTarget=null}function Fn(t,e){e=0!==(4&e);for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;t:{var o=void 0;if(e)for(var a=n.length-1;0<=a;a--){var s=n[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break t;On(i,s,u),o=l}else for(a=0;a<n.length;a++){if(l=(s=n[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break t;On(i,s,u),o=l}}}if(Ft)throw t=Nt,Ft=!1,Nt=null,t}function Nn(t,e){var r=e[mi];void 0===r&&(r=e[mi]=new Set);var n=t+"__bubble";r.has(n)||(qn(e,t,2,!1),r.add(n))}function Vn(t,e,r){var n=0;e&&(n|=4),qn(r,t,n,e)}var Un="_reactListening"+Math.random().toString(36).slice(2);function jn(t){if(!t[Un]){t[Un]=!0,a.forEach((function(e){"selectionchange"!==e&&(Bn.has(e)||Vn(e,!1,t),Vn(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Un]||(e[Un]=!0,Vn("selectionchange",!1,e))}}function qn(t,e,r,n){switch(Ye(e)){case 1:var i=Ge;break;case 4:i=We;break;default:i=He}r=i.bind(null,e,r,t),i=void 0,!Mt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),n?void 0!==i?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):void 0!==i?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Zn(t,e,r,n,i){var o=n;if(0===(1&e)&&0===(2&e)&&null!==n)t:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var s=n.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=n.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=vi(s)))return;if(5===(l=a.tag)||6===l){n=o=a;continue t}s=s.parentNode}}n=n.return}Pt((function(){var n=o,i=bt(r),a=[];t:{var s=An.get(t);if(void 0!==s){var l=ur,u=t;switch(t){case"keypress":if(0===er(r))break t;case"keydown":case"keyup":l=Er;break;case"focusin":u="focus",l=mr;break;case"focusout":u="blur",l=mr;break;case"beforeblur":case"afterblur":l=mr;break;case"click":if(2===r.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=dr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=zr;break;case En:case In:case zn:l=yr;break;case Cn:l=Cr;break;case"scroll":l=pr;break;case"wheel":l=Pr;break;case"copy":case"cut":case"paste":l=vr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ir}var c=0!==(4&e),p=!c&&"scroll"===t,h=c?null!==s?s+"Capture":null:s;c=[];for(var f,d=n;null!==d;){var m=(f=d).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Dt(d,h))&&c.push(Gn(d,m,f)))),p)break;d=d.return}0<c.length&&(s=new l(s,u,null,r,i),a.push({event:s,listeners:c}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||r===xt||!(u=r.relatedTarget||r.fromElement)||!vi(u)&&!u[di])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=n,null!==(u=(u=r.relatedTarget||r.toElement)?vi(u):null)&&(u!==(p=jt(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=n),l!==u)){if(c=fr,m="onMouseLeave",h="onMouseEnter",d="mouse","pointerout"!==t&&"pointerover"!==t||(c=Ir,m="onPointerLeave",h="onPointerEnter",d="pointer"),p=null==l?s:xi(l),f=null==u?s:xi(u),(s=new c(m,d+"leave",l,r,i)).target=p,s.relatedTarget=f,m=null,vi(i)===n&&((c=new c(h,d+"enter",u,r,i)).target=f,c.relatedTarget=p,m=c),p=m,l&&u)t:{for(h=u,d=0,f=c=l;f;f=Hn(f))d++;for(f=0,m=h;m;m=Hn(m))f++;for(;0<d-f;)c=Hn(c),d--;for(;0<f-d;)h=Hn(h),f--;for(;d--;){if(c===h||null!==h&&c===h.alternate)break t;c=Hn(c),h=Hn(h)}c=null}else c=null;null!==l&&Xn(a,s,l,c,!1),null!==u&&null!==p&&Xn(a,p,u,c,!0)}if("select"===(l=(s=n?xi(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var y=Kr;else if(qr(s))if(Yr)y=an;else{y=nn;var g=rn}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=on);switch(y&&(y=y(t,n))?Zr(a,y,r,i):(g&&g(t,s,n),"focusout"===t&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&tt(s,"number",s.value)),g=n?xi(n):window,t){case"focusin":(qr(g)||"true"===g.contentEditable)&&(yn=g,gn=n,vn=null);break;case"focusout":vn=gn=yn=null;break;case"mousedown":_n=!0;break;case"contextmenu":case"mouseup":case"dragend":_n=!1,xn(a,r,i);break;case"selectionchange":if(mn)break;case"keydown":case"keyup":xn(a,r,i)}var v;if(Mr)t:{switch(t){case"compositionstart":var _="onCompositionStart";break t;case"compositionend":_="onCompositionEnd";break t;case"compositionupdate":_="onCompositionUpdate";break t}_=void 0}else Ur?Nr(t,r)&&(_="onCompositionEnd"):"keydown"===t&&229===r.keyCode&&(_="onCompositionStart");_&&(Br&&"ko"!==r.locale&&(Ur||"onCompositionStart"!==_?"onCompositionEnd"===_&&Ur&&(v=tr()):($e="value"in(Qe=i)?Qe.value:Qe.textContent,Ur=!0)),0<(g=Wn(n,_)).length&&(_=new _r(_,t,null,r,i),a.push({event:_,listeners:g}),v?_.data=v:null!==(v=Vr(r))&&(_.data=v))),(v=Rr?function(t,e){switch(t){case"compositionend":return Vr(e);case"keypress":return 32!==e.which?null:(Fr=!0,Or);case"textInput":return(t=e.data)===Or&&Fr?null:t;default:return null}}(t,r):function(t,e){if(Ur)return"compositionend"===t||!Mr&&Nr(t,e)?(t=tr(),Je=$e=Qe=null,Ur=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Br&&"ko"!==e.locale?null:e.data}}(t,r))&&(0<(n=Wn(n,"onBeforeInput")).length&&(i=new _r("onBeforeInput","beforeinput",null,r,i),a.push({event:i,listeners:n}),i.data=v))}Fn(a,e)}))}function Gn(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Wn(t,e){for(var r=e+"Capture",n=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Dt(t,r))&&n.unshift(Gn(t,o,i)),null!=(o=Dt(t,e))&&n.push(Gn(t,o,i))),t=t.return}return n}function Hn(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Xn(t,e,r,n,i){for(var o=e._reactName,a=[];null!==r&&r!==n;){var s=r,l=s.alternate,u=s.stateNode;if(null!==l&&l===n)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Dt(r,o))&&a.unshift(Gn(r,l,s)):i||null!=(l=Dt(r,o))&&a.push(Gn(r,l,s))),r=r.return}0!==a.length&&t.push({event:e,listeners:a})}var Kn=/\r\n?/g,Yn=/\u0000|\uFFFD/g;function Qn(t){return("string"===typeof t?t:""+t).replace(Kn,"\n").replace(Yn,"")}function $n(t,e,r){if(e=Qn(e),Qn(t)!==e&&r)throw Error(o(425))}function Jn(){}var ti=null,ei=null;function ri(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ni="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(t){return oi.resolve(null).then(t).catch(si)}:ni;function si(t){setTimeout((function(){throw t}))}function li(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0===n)return t.removeChild(i),void je(e);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=i}while(r);je(e)}function ui(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ci(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var r=t.data;if("$"===r||"$!"===r||"$?"===r){if(0===e)return t;e--}else"/$"===r&&e++}t=t.previousSibling}return null}var pi=Math.random().toString(36).slice(2),hi="__reactFiber$"+pi,fi="__reactProps$"+pi,di="__reactContainer$"+pi,mi="__reactEvents$"+pi,yi="__reactListeners$"+pi,gi="__reactHandles$"+pi;function vi(t){var e=t[hi];if(e)return e;for(var r=t.parentNode;r;){if(e=r[di]||r[hi]){if(r=e.alternate,null!==e.child||null!==r&&null!==r.child)for(t=ci(t);null!==t;){if(r=t[hi])return r;t=ci(t)}return e}r=(t=r).parentNode}return null}function _i(t){return!(t=t[hi]||t[di])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function xi(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function bi(t){return t[fi]||null}var wi=[],Si=-1;function ki(t){return{current:t}}function Ti(t){0>Si||(t.current=wi[Si],wi[Si]=null,Si--)}function Ei(t,e){Si++,wi[Si]=t.current,t.current=e}var Ii={},zi=ki(Ii),Ci=ki(!1),Ai=Ii;function Pi(t,e){var r=t.type.contextTypes;if(!r)return Ii;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in r)o[i]=e[i];return n&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Di(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Mi(){Ti(Ci),Ti(zi)}function Li(t,e,r){if(zi.current!==Ii)throw Error(o(168));Ei(zi,e),Ei(Ci,r)}function Ri(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var i in n=n.getChildContext())if(!(i in e))throw Error(o(108,q(t)||"Unknown",i));return O({},r,n)}function Bi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ii,Ai=zi.current,Ei(zi,t),Ei(Ci,Ci.current),!0}function Oi(t,e,r){var n=t.stateNode;if(!n)throw Error(o(169));r?(t=Ri(t,e,Ai),n.__reactInternalMemoizedMergedChildContext=t,Ti(Ci),Ti(zi),Ei(zi,t)):Ti(Ci),Ei(Ci,r)}var Fi=null,Ni=!1,Vi=!1;function Ui(t){null===Fi?Fi=[t]:Fi.push(t)}function ji(){if(!Vi&&null!==Fi){Vi=!0;var t=0,e=_e;try{var r=Fi;for(_e=1;t<r.length;t++){var n=r[t];do{n=n(!0)}while(null!==n)}Fi=null,Ni=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(t+1)),Ht(Jt,ji),i}finally{_e=e,Vi=!1}}return null}var qi=[],Zi=0,Gi=null,Wi=0,Hi=[],Xi=0,Ki=null,Yi=1,Qi="";function $i(t,e){qi[Zi++]=Wi,qi[Zi++]=Gi,Gi=t,Wi=e}function Ji(t,e,r){Hi[Xi++]=Yi,Hi[Xi++]=Qi,Hi[Xi++]=Ki,Ki=t;var n=Yi;t=Qi;var i=32-ae(n)-1;n&=~(1<<i),r+=1;var o=32-ae(e)+i;if(30<o){var a=i-i%5;o=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Yi=1<<32-ae(e)+i|r<<i|n,Qi=o+t}else Yi=1<<o|r<<i|n,Qi=t}function to(t){null!==t.return&&($i(t,1),Ji(t,1,0))}function eo(t){for(;t===Gi;)Gi=qi[--Zi],qi[Zi]=null,Wi=qi[--Zi],qi[Zi]=null;for(;t===Ki;)Ki=Hi[--Xi],Hi[Xi]=null,Qi=Hi[--Xi],Hi[Xi]=null,Yi=Hi[--Xi],Hi[Xi]=null}var ro=null,no=null,io=!1,oo=null;function ao(t,e){var r=Du(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,null===(e=t.deletions)?(t.deletions=[r],t.flags|=16):e.push(r)}function so(t,e){switch(t.tag){case 5:var r=t.type;return null!==(e=1!==e.nodeType||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,ro=t,no=ui(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,ro=t,no=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(r=null!==Ki?{id:Yi,overflow:Qi}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},(r=Du(18,null,null,0)).stateNode=e,r.return=t,t.child=r,ro=t,no=null,!0);default:return!1}}function lo(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function uo(t){if(io){var e=no;if(e){var r=e;if(!so(t,e)){if(lo(t))throw Error(o(418));e=ui(r.nextSibling);var n=ro;e&&so(t,e)?ao(n,r):(t.flags=-4097&t.flags|2,io=!1,ro=t)}}else{if(lo(t))throw Error(o(418));t.flags=-4097&t.flags|2,io=!1,ro=t}}}function co(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;ro=t}function po(t){if(t!==ro)return!1;if(!io)return co(t),io=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!ri(t.type,t.memoizedProps)),e&&(e=no)){if(lo(t))throw ho(),Error(o(418));for(;e;)ao(t,e),e=ui(e.nextSibling)}if(co(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var r=t.data;if("/$"===r){if(0===e){no=ui(t.nextSibling);break t}e--}else"$"!==r&&"$!"!==r&&"$?"!==r||e++}t=t.nextSibling}no=null}}else no=ro?ui(t.stateNode.nextSibling):null;return!0}function ho(){for(var t=no;t;)t=ui(t.nextSibling)}function fo(){no=ro=null,io=!1}function mo(t){null===oo?oo=[t]:oo.push(t)}var yo=x.ReactCurrentBatchConfig;function go(t,e){if(t&&t.defaultProps){for(var r in e=O({},e),t=t.defaultProps)void 0===e[r]&&(e[r]=t[r]);return e}return e}var vo=ki(null),_o=null,xo=null,bo=null;function wo(){bo=xo=_o=null}function So(t){var e=vo.current;Ti(vo),t._currentValue=e}function ko(t,e,r){for(;null!==t;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==n&&(n.childLanes|=e)):null!==n&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function To(t,e){_o=t,bo=xo=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(xs=!0),t.firstContext=null)}function Eo(t){var e=t._currentValue;if(bo!==t)if(t={context:t,memoizedValue:e,next:null},null===xo){if(null===_o)throw Error(o(308));xo=t,_o.dependencies={lanes:0,firstContext:t}}else xo=xo.next=t;return e}var Io=null;function zo(t){null===Io?Io=[t]:Io.push(t)}function Co(t,e,r,n){var i=e.interleaved;return null===i?(r.next=r,zo(e)):(r.next=i.next,i.next=r),e.interleaved=r,Ao(t,n)}function Ao(t,e){t.lanes|=e;var r=t.alternate;for(null!==r&&(r.lanes|=e),r=t,t=t.return;null!==t;)t.childLanes|=e,null!==(r=t.alternate)&&(r.childLanes|=e),r=t,t=t.return;return 3===r.tag?r.stateNode:null}var Po=!1;function Do(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mo(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Lo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ro(t,e,r){var n=t.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Cl)){var i=n.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Ao(t,r)}return null===(i=n.interleaved)?(e.next=e,zo(n)):(e.next=i.next,i.next=e),n.interleaved=e,Ao(t,r)}function Bo(t,e,r){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&r))){var n=e.lanes;r|=n&=t.pendingLanes,e.lanes=r,ve(t,r)}}function Oo(t,e){var r=t.updateQueue,n=t.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,o=null;if(null!==(r=r.firstBaseUpdate)){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===o?i=o=a:o=o.next=a,r=r.next}while(null!==r);null===o?i=o=e:o=o.next=e}else i=o=e;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},void(t.updateQueue=r)}null===(t=r.lastBaseUpdate)?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Fo(t,e,r,n){var i=t.updateQueue;Po=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===a?o=u:a.next=u,a=l;var c=t.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==o){var p=i.baseState;for(a=0,c=u=l=null,s=o;;){var h=s.lane,f=s.eventTime;if((n&h)===h){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});t:{var d=t,m=s;switch(h=e,f=r,m.tag){case 1:if("function"===typeof(d=m.payload)){p=d.call(f,p,h);break t}p=d;break t;case 3:d.flags=-65537&d.flags|128;case 0:if(null===(h="function"===typeof(d=m.payload)?d.call(f,p,h):d)||void 0===h)break t;p=O({},p,h);break t;case 2:Po=!0}}null!==s.callback&&0!==s.lane&&(t.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=f,l=p):c=c.next=f,a|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===c&&(l=p),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(e=i.shared.interleaved)){i=e;do{a|=i.lane,i=i.next}while(i!==e)}else null===o&&(i.shared.lanes=0);Ol|=a,t.lanes=a,t.memoizedState=p}}function No(t,e,r){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(null!==i){if(n.callback=null,n=r,"function"!==typeof i)throw Error(o(191,i));i.call(n)}}}var Vo=(new n.Component).refs;function Uo(t,e,r,n){r=null===(r=r(n,e=t.memoizedState))||void 0===r?e:O({},e,r),t.memoizedState=r,0===t.lanes&&(t.updateQueue.baseState=r)}var jo={isMounted:function(t){return!!(t=t._reactInternals)&&jt(t)===t},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=eu(),i=ru(t),o=Lo(n,i);o.payload=e,void 0!==r&&null!==r&&(o.callback=r),null!==(e=Ro(t,o,i))&&(nu(e,t,i,n),Bo(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=eu(),i=ru(t),o=Lo(n,i);o.tag=1,o.payload=e,void 0!==r&&null!==r&&(o.callback=r),null!==(e=Ro(t,o,i))&&(nu(e,t,i,n),Bo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=eu(),n=ru(t),i=Lo(r,n);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),null!==(e=Ro(t,i,n))&&(nu(e,t,n,r),Bo(e,t,n))}};function qo(t,e,r,n,i,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(n,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!ln(r,n)||!ln(i,o))}function Zo(t,e,r){var n=!1,i=Ii,o=e.contextType;return"object"===typeof o&&null!==o?o=Eo(o):(i=Di(e)?Ai:zi.current,o=(n=null!==(n=e.contextTypes)&&void 0!==n)?Pi(t,i):Ii),e=new e(r,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=jo,t.stateNode=e,e._reactInternals=t,n&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Go(t,e,r,n){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(r,n),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&jo.enqueueReplaceState(e,e.state,null)}function Wo(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=Vo,Do(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=Eo(o):(o=Di(e)?Ai:zi.current,i.context=Pi(t,o)),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(Uo(t,e,o,r),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&jo.enqueueReplaceState(i,i.state,null),Fo(t,r,i,n),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308)}function Ho(t,e,r){if(null!==(t=r.ref)&&"function"!==typeof t&&"object"!==typeof t){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(o(309));var n=r.stateNode}if(!n)throw Error(o(147,t));var i=n,a=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===a?e.ref:(e=function(t){var e=i.refs;e===Vo&&(e=i.refs={}),null===t?delete e[a]:e[a]=t},e._stringRef=a,e)}if("string"!==typeof t)throw Error(o(284));if(!r._owner)throw Error(o(290,t))}return t}function Xo(t,e){throw t=Object.prototype.toString.call(e),Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ko(t){return(0,t._init)(t._payload)}function Yo(t){function e(e,r){if(t){var n=e.deletions;null===n?(e.deletions=[r],e.flags|=16):n.push(r)}}function r(r,n){if(!t)return null;for(;null!==n;)e(r,n),n=n.sibling;return null}function n(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Lu(t,e)).index=0,t.sibling=null,t}function a(e,r,n){return e.index=n,t?null!==(n=e.alternate)?(n=n.index)<r?(e.flags|=2,r):n:(e.flags|=2,r):(e.flags|=1048576,r)}function s(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,r,n){return null===e||6!==e.tag?((e=Fu(r,t.mode,n)).return=t,e):((e=i(e,r)).return=t,e)}function u(t,e,r,n){var o=r.type;return o===S?p(t,e,r.props.children,n,r.key):null!==e&&(e.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===D&&Ko(o)===e.type)?((n=i(e,r.props)).ref=Ho(t,e,r),n.return=t,n):((n=Ru(r.type,r.key,r.props,null,t.mode,n)).ref=Ho(t,e,r),n.return=t,n)}function c(t,e,r,n){return null===e||4!==e.tag||e.stateNode.containerInfo!==r.containerInfo||e.stateNode.implementation!==r.implementation?((e=Nu(r,t.mode,n)).return=t,e):((e=i(e,r.children||[])).return=t,e)}function p(t,e,r,n,o){return null===e||7!==e.tag?((e=Bu(r,t.mode,n,o)).return=t,e):((e=i(e,r)).return=t,e)}function h(t,e,r){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Fu(""+e,t.mode,r)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case b:return(r=Ru(e.type,e.key,e.props,null,t.mode,r)).ref=Ho(t,null,e),r.return=t,r;case w:return(e=Nu(e,t.mode,r)).return=t,e;case D:return h(t,(0,e._init)(e._payload),r)}if(et(e)||R(e))return(e=Bu(e,t.mode,r,null)).return=t,e;Xo(t,e)}return null}function f(t,e,r,n){var i=null!==e?e.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==i?null:l(t,e,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return r.key===i?u(t,e,r,n):null;case w:return r.key===i?c(t,e,r,n):null;case D:return f(t,e,(i=r._init)(r._payload),n)}if(et(r)||R(r))return null!==i?null:p(t,e,r,n,null);Xo(t,r)}return null}function d(t,e,r,n,i){if("string"===typeof n&&""!==n||"number"===typeof n)return l(e,t=t.get(r)||null,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return u(e,t=t.get(null===n.key?r:n.key)||null,n,i);case w:return c(e,t=t.get(null===n.key?r:n.key)||null,n,i);case D:return d(t,e,r,(0,n._init)(n._payload),i)}if(et(n)||R(n))return p(e,t=t.get(r)||null,n,i,null);Xo(e,n)}return null}function m(i,o,s,l){for(var u=null,c=null,p=o,m=o=0,y=null;null!==p&&m<s.length;m++){p.index>m?(y=p,p=null):y=p.sibling;var g=f(i,p,s[m],l);if(null===g){null===p&&(p=y);break}t&&p&&null===g.alternate&&e(i,p),o=a(g,o,m),null===c?u=g:c.sibling=g,c=g,p=y}if(m===s.length)return r(i,p),io&&$i(i,m),u;if(null===p){for(;m<s.length;m++)null!==(p=h(i,s[m],l))&&(o=a(p,o,m),null===c?u=p:c.sibling=p,c=p);return io&&$i(i,m),u}for(p=n(i,p);m<s.length;m++)null!==(y=d(p,i,m,s[m],l))&&(t&&null!==y.alternate&&p.delete(null===y.key?m:y.key),o=a(y,o,m),null===c?u=y:c.sibling=y,c=y);return t&&p.forEach((function(t){return e(i,t)})),io&&$i(i,m),u}function y(i,s,l,u){var c=R(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var p=c=null,m=s,y=s=0,g=null,v=l.next();null!==m&&!v.done;y++,v=l.next()){m.index>y?(g=m,m=null):g=m.sibling;var _=f(i,m,v.value,u);if(null===_){null===m&&(m=g);break}t&&m&&null===_.alternate&&e(i,m),s=a(_,s,y),null===p?c=_:p.sibling=_,p=_,m=g}if(v.done)return r(i,m),io&&$i(i,y),c;if(null===m){for(;!v.done;y++,v=l.next())null!==(v=h(i,v.value,u))&&(s=a(v,s,y),null===p?c=v:p.sibling=v,p=v);return io&&$i(i,y),c}for(m=n(i,m);!v.done;y++,v=l.next())null!==(v=d(m,i,y,v.value,u))&&(t&&null!==v.alternate&&m.delete(null===v.key?y:v.key),s=a(v,s,y),null===p?c=v:p.sibling=v,p=v);return t&&m.forEach((function(t){return e(i,t)})),io&&$i(i,y),c}return function t(n,o,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case b:t:{for(var u=a.key,c=o;null!==c;){if(c.key===u){if((u=a.type)===S){if(7===c.tag){r(n,c.sibling),(o=i(c,a.props.children)).return=n,n=o;break t}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===D&&Ko(u)===c.type){r(n,c.sibling),(o=i(c,a.props)).ref=Ho(n,c,a),o.return=n,n=o;break t}r(n,c);break}e(n,c),c=c.sibling}a.type===S?((o=Bu(a.props.children,n.mode,l,a.key)).return=n,n=o):((l=Ru(a.type,a.key,a.props,null,n.mode,l)).ref=Ho(n,o,a),l.return=n,n=l)}return s(n);case w:t:{for(c=a.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){r(n,o.sibling),(o=i(o,a.children||[])).return=n,n=o;break t}r(n,o);break}e(n,o),o=o.sibling}(o=Nu(a,n.mode,l)).return=n,n=o}return s(n);case D:return t(n,o,(c=a._init)(a._payload),l)}if(et(a))return m(n,o,a,l);if(R(a))return y(n,o,a,l);Xo(n,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(r(n,o.sibling),(o=i(o,a)).return=n,n=o):(r(n,o),(o=Fu(a,n.mode,l)).return=n,n=o),s(n)):r(n,o)}}var Qo=Yo(!0),$o=Yo(!1),Jo={},ta=ki(Jo),ea=ki(Jo),ra=ki(Jo);function na(t){if(t===Jo)throw Error(o(174));return t}function ia(t,e){switch(Ei(ra,e),Ei(ea,t),Ei(ta,Jo),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Ti(ta),Ei(ta,e)}function oa(){Ti(ta),Ti(ea),Ti(ra)}function aa(t){na(ra.current);var e=na(ta.current),r=lt(e,t.type);e!==r&&(Ei(ea,t),Ei(ta,r))}function sa(t){ea.current===t&&(Ti(ta),Ti(ea))}var la=ki(0);function ua(t){for(var e=t;null!==e;){if(13===e.tag){var r=e.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ca=[];function pa(){for(var t=0;t<ca.length;t++)ca[t]._workInProgressVersionPrimary=null;ca.length=0}var ha=x.ReactCurrentDispatcher,fa=x.ReactCurrentBatchConfig,da=0,ma=null,ya=null,ga=null,va=!1,_a=!1,xa=0,ba=0;function wa(){throw Error(o(321))}function Sa(t,e){if(null===e)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!sn(t[r],e[r]))return!1;return!0}function ka(t,e,r,n,i,a){if(da=a,ma=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ha.current=null===t||null===t.memoizedState?ss:ls,t=r(n,i),_a){a=0;do{if(_a=!1,xa=0,25<=a)throw Error(o(301));a+=1,ga=ya=null,e.updateQueue=null,ha.current=us,t=r(n,i)}while(_a)}if(ha.current=as,e=null!==ya&&null!==ya.next,da=0,ga=ya=ma=null,va=!1,e)throw Error(o(300));return t}function Ta(){var t=0!==xa;return xa=0,t}function Ea(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ga?ma.memoizedState=ga=t:ga=ga.next=t,ga}function Ia(){if(null===ya){var t=ma.alternate;t=null!==t?t.memoizedState:null}else t=ya.next;var e=null===ga?ma.memoizedState:ga.next;if(null!==e)ga=e,ya=t;else{if(null===t)throw Error(o(310));t={memoizedState:(ya=t).memoizedState,baseState:ya.baseState,baseQueue:ya.baseQueue,queue:ya.queue,next:null},null===ga?ma.memoizedState=ga=t:ga=ga.next=t}return ga}function za(t,e){return"function"===typeof e?e(t):e}function Ca(t){var e=Ia(),r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=t;var n=ya,i=n.baseQueue,a=r.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(null!==i){a=i.next,n=n.baseState;var l=s=null,u=null,c=a;do{var p=c.lane;if((da&p)===p)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:p,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=h,s=n):u=u.next=h,ma.lanes|=p,Ol|=p}c=c.next}while(null!==c&&c!==a);null===u?s=n:u.next=l,sn(n,e.memoizedState)||(xs=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=u,r.lastRenderedState=n}if(null!==(t=r.interleaved)){i=t;do{a=i.lane,ma.lanes|=a,Ol|=a,i=i.next}while(i!==t)}else null===i&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Aa(t){var e=Ia(),r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(null!==i){r.pending=null;var s=i=i.next;do{a=t(a,s.action),s=s.next}while(s!==i);sn(a,e.memoizedState)||(xs=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function Pa(){}function Da(t,e){var r=ma,n=Ia(),i=e(),a=!sn(n.memoizedState,i);if(a&&(n.memoizedState=i,xs=!0),n=n.queue,Za(Ra.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||null!==ga&&1&ga.memoizedState.tag){if(r.flags|=2048,Na(9,La.bind(null,r,n,i,e),void 0,null),null===Al)throw Error(o(349));0!==(30&da)||Ma(r,e,i)}return i}function Ma(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},null===(e=ma.updateQueue)?(e={lastEffect:null,stores:null},ma.updateQueue=e,e.stores=[t]):null===(r=e.stores)?e.stores=[t]:r.push(t)}function La(t,e,r,n){e.value=r,e.getSnapshot=n,Ba(e)&&Oa(t)}function Ra(t,e,r){return r((function(){Ba(e)&&Oa(t)}))}function Ba(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!sn(t,r)}catch(n){return!0}}function Oa(t){var e=Ao(t,1);null!==e&&nu(e,t,1,-1)}function Fa(t){var e=Ea();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:t},e.queue=t,t=t.dispatch=rs.bind(null,ma,t),[e.memoizedState,t]}function Na(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},null===(e=ma.updateQueue)?(e={lastEffect:null,stores:null},ma.updateQueue=e,e.lastEffect=t.next=t):null===(r=e.lastEffect)?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t),t}function Va(){return Ia().memoizedState}function Ua(t,e,r,n){var i=Ea();ma.flags|=t,i.memoizedState=Na(1|e,r,void 0,void 0===n?null:n)}function ja(t,e,r,n){var i=Ia();n=void 0===n?null:n;var o=void 0;if(null!==ya){var a=ya.memoizedState;if(o=a.destroy,null!==n&&Sa(n,a.deps))return void(i.memoizedState=Na(e,r,o,n))}ma.flags|=t,i.memoizedState=Na(1|e,r,o,n)}function qa(t,e){return Ua(8390656,8,t,e)}function Za(t,e){return ja(2048,8,t,e)}function Ga(t,e){return ja(4,2,t,e)}function Wa(t,e){return ja(4,4,t,e)}function Ha(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Xa(t,e,r){return r=null!==r&&void 0!==r?r.concat([t]):null,ja(4,4,Ha.bind(null,e,t),r)}function Ka(){}function Ya(t,e){var r=Ia();e=void 0===e?null:e;var n=r.memoizedState;return null!==n&&null!==e&&Sa(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Qa(t,e){var r=Ia();e=void 0===e?null:e;var n=r.memoizedState;return null!==n&&null!==e&&Sa(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function $a(t,e,r){return 0===(21&da)?(t.baseState&&(t.baseState=!1,xs=!0),t.memoizedState=r):(sn(r,e)||(r=me(),ma.lanes|=r,Ol|=r,t.baseState=!0),e)}function Ja(t,e){var r=_e;_e=0!==r&&4>r?r:4,t(!0);var n=fa.transition;fa.transition={};try{t(!1),e()}finally{_e=r,fa.transition=n}}function ts(){return Ia().memoizedState}function es(t,e,r){var n=ru(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},ns(t))is(e,r);else if(null!==(r=Co(t,e,r,n))){nu(r,t,n,eu()),os(r,e,n)}}function rs(t,e,r){var n=ru(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(ns(t))is(e,i);else{var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,r);if(i.hasEagerState=!0,i.eagerState=s,sn(s,a)){var l=e.interleaved;return null===l?(i.next=i,zo(e)):(i.next=l.next,l.next=i),void(e.interleaved=i)}}catch(u){}null!==(r=Co(t,e,i,n))&&(nu(r,t,n,i=eu()),os(r,e,n))}}function ns(t){var e=t.alternate;return t===ma||null!==e&&e===ma}function is(t,e){_a=va=!0;var r=t.pending;null===r?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function os(t,e,r){if(0!==(4194240&r)){var n=e.lanes;r|=n&=t.pendingLanes,e.lanes=r,ve(t,r)}}var as={readContext:Eo,useCallback:wa,useContext:wa,useEffect:wa,useImperativeHandle:wa,useInsertionEffect:wa,useLayoutEffect:wa,useMemo:wa,useReducer:wa,useRef:wa,useState:wa,useDebugValue:wa,useDeferredValue:wa,useTransition:wa,useMutableSource:wa,useSyncExternalStore:wa,useId:wa,unstable_isNewReconciler:!1},ss={readContext:Eo,useCallback:function(t,e){return Ea().memoizedState=[t,void 0===e?null:e],t},useContext:Eo,useEffect:qa,useImperativeHandle:function(t,e,r){return r=null!==r&&void 0!==r?r.concat([t]):null,Ua(4194308,4,Ha.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ua(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ua(4,2,t,e)},useMemo:function(t,e){var r=Ea();return e=void 0===e?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Ea();return e=void 0!==r?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=es.bind(null,ma,t),[n.memoizedState,t]},useRef:function(t){return t={current:t},Ea().memoizedState=t},useState:Fa,useDebugValue:Ka,useDeferredValue:function(t){return Ea().memoizedState=t},useTransition:function(){var t=Fa(!1),e=t[0];return t=Ja.bind(null,t[1]),Ea().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ma,i=Ea();if(io){if(void 0===r)throw Error(o(407));r=r()}else{if(r=e(),null===Al)throw Error(o(349));0!==(30&da)||Ma(n,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,qa(Ra.bind(null,n,a,t),[t]),n.flags|=2048,Na(9,La.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=Ea(),e=Al.identifierPrefix;if(io){var r=Qi;e=":"+e+"R"+(r=(Yi&~(1<<32-ae(Yi)-1)).toString(32)+r),0<(r=xa++)&&(e+="H"+r.toString(32)),e+=":"}else e=":"+e+"r"+(r=ba++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ls={readContext:Eo,useCallback:Ya,useContext:Eo,useEffect:Za,useImperativeHandle:Xa,useInsertionEffect:Ga,useLayoutEffect:Wa,useMemo:Qa,useReducer:Ca,useRef:Va,useState:function(){return Ca(za)},useDebugValue:Ka,useDeferredValue:function(t){return $a(Ia(),ya.memoizedState,t)},useTransition:function(){return[Ca(za)[0],Ia().memoizedState]},useMutableSource:Pa,useSyncExternalStore:Da,useId:ts,unstable_isNewReconciler:!1},us={readContext:Eo,useCallback:Ya,useContext:Eo,useEffect:Za,useImperativeHandle:Xa,useInsertionEffect:Ga,useLayoutEffect:Wa,useMemo:Qa,useReducer:Aa,useRef:Va,useState:function(){return Aa(za)},useDebugValue:Ka,useDeferredValue:function(t){var e=Ia();return null===ya?e.memoizedState=t:$a(e,ya.memoizedState,t)},useTransition:function(){return[Aa(za)[0],Ia().memoizedState]},useMutableSource:Pa,useSyncExternalStore:Da,useId:ts,unstable_isNewReconciler:!1};function cs(t,e){try{var r="",n=e;do{r+=U(n),n=n.return}while(n);var i=r}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i,digest:null}}function ps(t,e,r){return{value:t,source:null,stack:null!=r?r:null,digest:null!=e?e:null}}function hs(t,e){try{console.error(e.value)}catch(r){setTimeout((function(){throw r}))}}var fs="function"===typeof WeakMap?WeakMap:Map;function ds(t,e,r){(r=Lo(-1,r)).tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Gl||(Gl=!0,Wl=n),hs(0,e)},r}function ms(t,e,r){(r=Lo(-1,r)).tag=3;var n=t.type.getDerivedStateFromError;if("function"===typeof n){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){hs(0,e)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(r.callback=function(){hs(0,e),"function"!==typeof n&&(null===Hl?Hl=new Set([this]):Hl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),r}function ys(t,e,r){var n=t.pingCache;if(null===n){n=t.pingCache=new fs;var i=new Set;n.set(e,i)}else void 0===(i=n.get(e))&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=Eu.bind(null,t,e,r),e.then(t,t))}function gs(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function vs(t,e,r,n,i){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((e=Lo(-1,1)).tag=2,Ro(r,e,1))),r.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var _s=x.ReactCurrentOwner,xs=!1;function bs(t,e,r,n){e.child=null===t?$o(e,null,r,n):Qo(e,t.child,r,n)}function ws(t,e,r,n,i){r=r.render;var o=e.ref;return To(e,i),n=ka(t,e,r,n,o,i),r=Ta(),null===t||xs?(io&&r&&to(e),e.flags|=1,bs(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Gs(t,e,i))}function Ss(t,e,r,n,i){if(null===t){var o=r.type;return"function"!==typeof o||Mu(o)||void 0!==o.defaultProps||null!==r.compare||void 0!==r.defaultProps?((t=Ru(r.type,null,n,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,ks(t,e,o,n,i))}if(o=t.child,0===(t.lanes&i)){var a=o.memoizedProps;if((r=null!==(r=r.compare)?r:ln)(a,n)&&t.ref===e.ref)return Gs(t,e,i)}return e.flags|=1,(t=Lu(o,n)).ref=e.ref,t.return=e,e.child=t}function ks(t,e,r,n,i){if(null!==t){var o=t.memoizedProps;if(ln(o,n)&&t.ref===e.ref){if(xs=!1,e.pendingProps=n=o,0===(t.lanes&i))return e.lanes=t.lanes,Gs(t,e,i);0!==(131072&t.flags)&&(xs=!0)}}return Is(t,e,r,n,i)}function Ts(t,e,r){var n=e.pendingProps,i=n.children,o=null!==t?t.memoizedState:null;if("hidden"===n.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Ll,Ml),Ml|=r;else{if(0===(1073741824&r))return t=null!==o?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ei(Ll,Ml),Ml|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==o?o.baseLanes:r,Ei(Ll,Ml),Ml|=n}else null!==o?(n=o.baseLanes|r,e.memoizedState=null):n=r,Ei(Ll,Ml),Ml|=n;return bs(t,e,i,r),e.child}function Es(t,e){var r=e.ref;(null===t&&null!==r||null!==t&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Is(t,e,r,n,i){var o=Di(r)?Ai:zi.current;return o=Pi(e,o),To(e,i),r=ka(t,e,r,n,o,i),n=Ta(),null===t||xs?(io&&n&&to(e),e.flags|=1,bs(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Gs(t,e,i))}function zs(t,e,r,n,i){if(Di(r)){var o=!0;Bi(e)}else o=!1;if(To(e,i),null===e.stateNode)Zs(t,e),Zo(e,r,n),Wo(e,r,n,i),n=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,u=r.contextType;"object"===typeof u&&null!==u?u=Eo(u):u=Pi(e,u=Di(r)?Ai:zi.current);var c=r.getDerivedStateFromProps,p="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;p||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==n||l!==u)&&Go(e,a,n,u),Po=!1;var h=e.memoizedState;a.state=h,Fo(e,n,a,i),l=e.memoizedState,s!==n||h!==l||Ci.current||Po?("function"===typeof c&&(Uo(e,r,c,n),l=e.memoizedState),(s=Po||qo(e,r,s,n,h,l,u))?(p||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4194308)):("function"===typeof a.componentDidMount&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=u,n=s):("function"===typeof a.componentDidMount&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,Mo(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:go(e.type,s),a.props=u,p=e.pendingProps,h=a.context,"object"===typeof(l=r.contextType)&&null!==l?l=Eo(l):l=Pi(e,l=Di(r)?Ai:zi.current);var f=r.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==p||h!==l)&&Go(e,a,n,l),Po=!1,h=e.memoizedState,a.state=h,Fo(e,n,a,i);var d=e.memoizedState;s!==p||h!==d||Ci.current||Po?("function"===typeof f&&(Uo(e,r,f,n),d=e.memoizedState),(u=Po||qo(e,r,u,n,h,d,l)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(n,d,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,d,l)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=d),a.props=n,a.state=d,a.context=l,n=u):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return Cs(t,e,r,n,o,i)}function Cs(t,e,r,n,i,o){Es(t,e);var a=0!==(128&e.flags);if(!n&&!a)return i&&Oi(e,r,!1),Gs(t,e,o);n=e.stateNode,_s.current=e;var s=a&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return e.flags|=1,null!==t&&a?(e.child=Qo(e,t.child,null,o),e.child=Qo(e,null,s,o)):bs(t,e,s,o),e.memoizedState=n.state,i&&Oi(e,r,!0),e.child}function As(t){var e=t.stateNode;e.pendingContext?Li(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Li(0,e.context,!1),ia(t,e.containerInfo)}function Ps(t,e,r,n,i){return fo(),mo(i),e.flags|=256,bs(t,e,r,n),e.child}var Ds,Ms,Ls,Rs,Bs={dehydrated:null,treeContext:null,retryLane:0};function Os(t){return{baseLanes:t,cachePool:null,transitions:null}}function Fs(t,e,r){var n,i=e.pendingProps,a=la.current,s=!1,l=0!==(128&e.flags);if((n=l)||(n=(null===t||null!==t.memoizedState)&&0!==(2&a)),n?(s=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(a|=1),Ei(la,1&a),null===t)return uo(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=i.children,t=i.fallback,s?(i=e.mode,s=e.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Ou(l,i,0,null),t=Bu(t,i,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Os(r),e.memoizedState=Bs,t):Ns(e,l));if(null!==(a=t.memoizedState)&&null!==(n=a.dehydrated))return function(t,e,r,n,i,a,s){if(r)return 256&e.flags?(e.flags&=-257,Vs(t,e,s,n=ps(Error(o(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=Ou({mode:"visible",children:n.children},i,0,null),(a=Bu(a,i,s,null)).flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,0!==(1&e.mode)&&Qo(e,t.child,null,s),e.child.memoizedState=Os(s),e.memoizedState=Bs,a);if(0===(1&e.mode))return Vs(t,e,s,null);if("$!"===i.data){if(n=i.nextSibling&&i.nextSibling.dataset)var l=n.dgst;return n=l,Vs(t,e,s,n=ps(a=Error(o(419)),n,void 0))}if(l=0!==(s&t.childLanes),xs||l){if(null!==(n=Al)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(n.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ao(t,i),nu(n,t,i,-1))}return yu(),Vs(t,e,s,n=ps(Error(o(421))))}return"$?"===i.data?(e.flags|=128,e.child=t.child,e=zu.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,no=ui(i.nextSibling),ro=e,io=!0,oo=null,null!==t&&(Hi[Xi++]=Yi,Hi[Xi++]=Qi,Hi[Xi++]=Ki,Yi=t.id,Qi=t.overflow,Ki=e),e=Ns(e,n.children),e.flags|=4096,e)}(t,e,l,i,n,a,r);if(s){s=i.fallback,l=e.mode,n=(a=t.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&e.child!==a?((i=e.child).childLanes=0,i.pendingProps=u,e.deletions=null):(i=Lu(a,u)).subtreeFlags=14680064&a.subtreeFlags,null!==n?s=Lu(n,s):(s=Bu(s,l,r,null)).flags|=2,s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,l=null===(l=t.child.memoizedState)?Os(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~r,e.memoizedState=Bs,i}return t=(s=t.child).sibling,i=Lu(s,{mode:"visible",children:i.children}),0===(1&e.mode)&&(i.lanes=r),i.return=e,i.sibling=null,null!==t&&(null===(r=e.deletions)?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=i,e.memoizedState=null,i}function Ns(t,e){return(e=Ou({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Vs(t,e,r,n){return null!==n&&mo(n),Qo(e,t.child,null,r),(t=Ns(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Us(t,e,r){t.lanes|=e;var n=t.alternate;null!==n&&(n.lanes|=e),ko(t.return,e,r)}function js(t,e,r,n,i){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function qs(t,e,r){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(bs(t,e,n.children,r),0!==(2&(n=la.current)))n=1&n|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Us(t,r,e);else if(19===t.tag)Us(t,r,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ei(la,n),0===(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;null!==r;)null!==(t=r.alternate)&&null===ua(t)&&(i=r),r=r.sibling;null===(r=i)?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),js(e,!1,i,r,o);break;case"backwards":for(r=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===ua(t)){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}js(e,!0,r,null,o);break;case"together":js(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zs(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Gs(t,e,r){if(null!==t&&(e.dependencies=t.dependencies),Ol|=e.lanes,0===(r&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(r=Lu(t=e.child,t.pendingProps),e.child=r,r.return=e;null!==t.sibling;)t=t.sibling,(r=r.sibling=Lu(t,t.pendingProps)).return=e;r.sibling=null}return e.child}function Ws(t,e){if(!io)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;null!==e;)null!==e.alternate&&(r=e),e=e.sibling;null===r?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?e||null===t.tail?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Hs(t){var e=null!==t.alternate&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;null!==i;)r|=i.lanes|i.childLanes,n|=14680064&i.subtreeFlags,n|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Xs(t,e,r){var n=e.pendingProps;switch(eo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(e),null;case 1:case 17:return Di(e.type)&&Mi(),Hs(e),null;case 3:return n=e.stateNode,oa(),Ti(Ci),Ti(zi),pa(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||(po(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==oo&&(su(oo),oo=null))),Ms(t,e),Hs(e),null;case 5:sa(e);var i=na(ra.current);if(r=e.type,null!==t&&null!=e.stateNode)Ls(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(null===e.stateNode)throw Error(o(166));return Hs(e),null}if(t=na(ta.current),po(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[hi]=e,n[fi]=a,t=0!==(1&e.mode),r){case"dialog":Nn("cancel",n),Nn("close",n);break;case"iframe":case"object":case"embed":Nn("load",n);break;case"video":case"audio":for(i=0;i<Rn.length;i++)Nn(Rn[i],n);break;case"source":Nn("error",n);break;case"img":case"image":case"link":Nn("error",n),Nn("load",n);break;case"details":Nn("toggle",n);break;case"input":Y(n,a),Nn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Nn("invalid",n);break;case"textarea":it(n,a),Nn("invalid",n)}for(var l in vt(r,a),i=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"===typeof u?n.textContent!==u&&(!0!==a.suppressHydrationWarning&&$n(n.textContent,u,t),i=["children",u]):"number"===typeof u&&n.textContent!==""+u&&(!0!==a.suppressHydrationWarning&&$n(n.textContent,u,t),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Nn("scroll",n)}switch(r){case"input":W(n),J(n,a,!0);break;case"textarea":W(n),at(n);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(n.onclick=Jn)}n=i,e.updateQueue=n,null!==n&&(e.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=st(r)),"http://www.w3.org/1999/xhtml"===t?"script"===r?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof n.is?t=l.createElement(r,{is:n.is}):(t=l.createElement(r),"select"===r&&(l=t,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):t=l.createElementNS(t,r),t[hi]=e,t[fi]=n,Ds(t,e,!1,!1),e.stateNode=t;t:{switch(l=_t(r,n),r){case"dialog":Nn("cancel",t),Nn("close",t),i=n;break;case"iframe":case"object":case"embed":Nn("load",t),i=n;break;case"video":case"audio":for(i=0;i<Rn.length;i++)Nn(Rn[i],t);i=n;break;case"source":Nn("error",t),i=n;break;case"img":case"image":case"link":Nn("error",t),Nn("load",t),i=n;break;case"details":Nn("toggle",t),i=n;break;case"input":Y(t,n),i=K(t,n),Nn("invalid",t);break;case"option":default:i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=O({},n,{value:void 0}),Nn("invalid",t);break;case"textarea":it(t,n),i=nt(t,n),Nn("invalid",t)}for(a in vt(r,i),u=i)if(u.hasOwnProperty(a)){var c=u[a];"style"===a?yt(t,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&pt(t,c):"children"===a?"string"===typeof c?("textarea"!==r||""!==c)&&ht(t,c):"number"===typeof c&&ht(t,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Nn("scroll",t):null!=c&&_(t,a,c,l))}switch(r){case"input":W(t),J(t,n,!1);break;case"textarea":W(t),at(t);break;case"option":null!=n.value&&t.setAttribute("value",""+Z(n.value));break;case"select":t.multiple=!!n.multiple,null!=(a=n.value)?rt(t,!!n.multiple,a,!1):null!=n.defaultValue&&rt(t,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof i.onClick&&(t.onclick=Jn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break t;case"img":n=!0;break t;default:n=!1}}n&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Hs(e),null;case 6:if(t&&null!=e.stateNode)Rs(t,e,t.memoizedProps,n);else{if("string"!==typeof n&&null===e.stateNode)throw Error(o(166));if(r=na(ra.current),na(ta.current),po(e)){if(n=e.stateNode,r=e.memoizedProps,n[hi]=e,(a=n.nodeValue!==r)&&null!==(t=ro))switch(t.tag){case 3:$n(n.nodeValue,r,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&$n(n.nodeValue,r,0!==(1&t.mode))}a&&(e.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[hi]=e,e.stateNode=n}return Hs(e),null;case 13:if(Ti(la),n=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(io&&null!==no&&0!==(1&e.mode)&&0===(128&e.flags))ho(),fo(),e.flags|=98560,a=!1;else if(a=po(e),null!==n&&null!==n.dehydrated){if(null===t){if(!a)throw Error(o(318));if(!(a=null!==(a=e.memoizedState)?a.dehydrated:null))throw Error(o(317));a[hi]=e}else fo(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Hs(e),a=!1}else null!==oo&&(su(oo),oo=null),a=!0;if(!a)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=r,e):((n=null!==n)!==(null!==t&&null!==t.memoizedState)&&n&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&la.current)?0===Rl&&(Rl=3):yu())),null!==e.updateQueue&&(e.flags|=4),Hs(e),null);case 4:return oa(),Ms(t,e),null===t&&jn(e.stateNode.containerInfo),Hs(e),null;case 10:return So(e.type._context),Hs(e),null;case 19:if(Ti(la),null===(a=e.memoizedState))return Hs(e),null;if(n=0!==(128&e.flags),null===(l=a.rendering))if(n)Ws(a,!1);else{if(0!==Rl||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=ua(t))){for(e.flags|=128,Ws(a,!1),null!==(n=l.updateQueue)&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;null!==r;)t=n,(a=r).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ei(la,1&la.current|2),e.child}t=t.sibling}null!==a.tail&&Qt()>ql&&(e.flags|=128,n=!0,Ws(a,!1),e.lanes=4194304)}else{if(!n)if(null!==(t=ua(l))){if(e.flags|=128,n=!0,null!==(r=t.updateQueue)&&(e.updateQueue=r,e.flags|=4),Ws(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return Hs(e),null}else 2*Qt()-a.renderingStartTime>ql&&1073741824!==r&&(e.flags|=128,n=!0,Ws(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(null!==(r=a.last)?r.sibling=l:e.child=l,a.last=l)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Qt(),e.sibling=null,r=la.current,Ei(la,n?1&r|2:1&r),e):(Hs(e),null);case 22:case 23:return hu(),n=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==n&&(e.flags|=8192),n&&0!==(1&e.mode)?0!==(1073741824&Ml)&&(Hs(e),6&e.subtreeFlags&&(e.flags|=8192)):Hs(e),null;case 24:case 25:return null}throw Error(o(156,e.tag))}function Ks(t,e){switch(eo(e),e.tag){case 1:return Di(e.type)&&Mi(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return oa(),Ti(Ci),Ti(zi),pa(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return sa(e),null;case 13:if(Ti(la),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(o(340));fo()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Ti(la),null;case 4:return oa(),null;case 10:return So(e.type._context),null;case 22:case 23:return hu(),null;default:return null}}Ds=function(t,e){for(var r=e.child;null!==r;){if(5===r.tag||6===r.tag)t.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Ms=function(){},Ls=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,na(ta.current);var o,a=null;switch(r){case"input":i=K(t,i),n=K(t,n),a=[];break;case"select":i=O({},i,{value:void 0}),n=O({},n,{value:void 0}),a=[];break;case"textarea":i=nt(t,i),n=nt(t,n),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof n.onClick&&(t.onclick=Jn)}for(c in vt(r,n),r=null,i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in n){var u=n[c];if(l=null!=i?i[c]:void 0,n.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(a||(a=[]),a.push(c,r)),r=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Nn("scroll",t),a||l===u||(a=[])):(a=a||[]).push(c,u))}r&&(a=a||[]).push("style",r);var c=a;(e.updateQueue=c)&&(e.flags|=4)}},Rs=function(t,e,r,n){r!==n&&(e.flags|=4)};var Ys=!1,Qs=!1,$s="function"===typeof WeakSet?WeakSet:Set,Js=null;function tl(t,e){var r=t.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){Tu(t,e,n)}else r.current=null}function el(t,e,r){try{r()}catch(n){Tu(t,e,n)}}var rl=!1;function nl(t,e,r){var n=e.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(e,r,o)}i=i.next}while(i!==n)}}function il(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function ol(t){var e=t.ref;if(null!==e){var r=t.stateNode;t.tag,t=r,"function"===typeof e?e(t):e.current=t}}function al(t){var e=t.alternate;null!==e&&(t.alternate=null,al(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[hi],delete e[fi],delete e[mi],delete e[yi],delete e[gi])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sl(t){return 5===t.tag||3===t.tag||4===t.tag}function ll(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||sl(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ul(t,e,r){var n=t.tag;if(5===n||6===n)t=t.stateNode,e?8===r.nodeType?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(8===r.nodeType?(e=r.parentNode).insertBefore(t,r):(e=r).appendChild(t),null!==(r=r._reactRootContainer)&&void 0!==r||null!==e.onclick||(e.onclick=Jn));else if(4!==n&&null!==(t=t.child))for(ul(t,e,r),t=t.sibling;null!==t;)ul(t,e,r),t=t.sibling}function cl(t,e,r){var n=t.tag;if(5===n||6===n)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(4!==n&&null!==(t=t.child))for(cl(t,e,r),t=t.sibling;null!==t;)cl(t,e,r),t=t.sibling}var pl=null,hl=!1;function fl(t,e,r){for(r=r.child;null!==r;)dl(t,e,r),r=r.sibling}function dl(t,e,r){if(oe&&"function"===typeof oe.onCommitFiberUnmount)try{oe.onCommitFiberUnmount(ie,r)}catch(s){}switch(r.tag){case 5:Qs||tl(r,e);case 6:var n=pl,i=hl;pl=null,fl(t,e,r),hl=i,null!==(pl=n)&&(hl?(t=pl,r=r.stateNode,8===t.nodeType?t.parentNode.removeChild(r):t.removeChild(r)):pl.removeChild(r.stateNode));break;case 18:null!==pl&&(hl?(t=pl,r=r.stateNode,8===t.nodeType?li(t.parentNode,r):1===t.nodeType&&li(t,r),je(t)):li(pl,r.stateNode));break;case 4:n=pl,i=hl,pl=r.stateNode.containerInfo,hl=!0,fl(t,e,r),pl=n,hl=i;break;case 0:case 11:case 14:case 15:if(!Qs&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){i=n=n.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(r,e,a),i=i.next}while(i!==n)}fl(t,e,r);break;case 1:if(!Qs&&(tl(r,e),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){Tu(r,e,s)}fl(t,e,r);break;case 21:fl(t,e,r);break;case 22:1&r.mode?(Qs=(n=Qs)||null!==r.memoizedState,fl(t,e,r),Qs=n):fl(t,e,r);break;default:fl(t,e,r)}}function ml(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var r=t.stateNode;null===r&&(r=t.stateNode=new $s),e.forEach((function(e){var n=Cu.bind(null,t,e);r.has(e)||(r.add(e),e.then(n,n))}))}}function yl(t,e){var r=e.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n];try{var a=t,s=e,l=s;t:for(;null!==l;){switch(l.tag){case 5:pl=l.stateNode,hl=!1;break t;case 3:case 4:pl=l.stateNode.containerInfo,hl=!0;break t}l=l.return}if(null===pl)throw Error(o(160));dl(a,s,i),pl=null,hl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Tu(i,e,c)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)gl(e,t),e=e.sibling}function gl(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yl(e,t),vl(t),4&n){try{nl(3,t,t.return),il(3,t)}catch(y){Tu(t,t.return,y)}try{nl(5,t,t.return)}catch(y){Tu(t,t.return,y)}}break;case 1:yl(e,t),vl(t),512&n&&null!==r&&tl(r,r.return);break;case 5:if(yl(e,t),vl(t),512&n&&null!==r&&tl(r,r.return),32&t.flags){var i=t.stateNode;try{ht(i,"")}catch(y){Tu(t,t.return,y)}}if(4&n&&null!=(i=t.stateNode)){var a=t.memoizedProps,s=null!==r?r.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,null!==u)try{"input"===l&&"radio"===a.type&&null!=a.name&&Q(i,a),_t(l,s);var c=_t(l,a);for(s=0;s<u.length;s+=2){var p=u[s],h=u[s+1];"style"===p?yt(i,h):"dangerouslySetInnerHTML"===p?pt(i,h):"children"===p?ht(i,h):_(i,p,h,c)}switch(l){case"input":$(i,a);break;case"textarea":ot(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var d=a.value;null!=d?rt(i,!!a.multiple,d,!1):f!==!!a.multiple&&(null!=a.defaultValue?rt(i,!!a.multiple,a.defaultValue,!0):rt(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(y){Tu(t,t.return,y)}}break;case 6:if(yl(e,t),vl(t),4&n){if(null===t.stateNode)throw Error(o(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(y){Tu(t,t.return,y)}}break;case 3:if(yl(e,t),vl(t),4&n&&null!==r&&r.memoizedState.isDehydrated)try{je(e.containerInfo)}catch(y){Tu(t,t.return,y)}break;case 4:default:yl(e,t),vl(t);break;case 13:yl(e,t),vl(t),8192&(i=t.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(jl=Qt())),4&n&&ml(t);break;case 22:if(p=null!==r&&null!==r.memoizedState,1&t.mode?(Qs=(c=Qs)||p,yl(e,t),Qs=c):yl(e,t),vl(t),8192&n){if(c=null!==t.memoizedState,(t.stateNode.isHidden=c)&&!p&&0!==(1&t.mode))for(Js=t,p=t.child;null!==p;){for(h=Js=p;null!==Js;){switch(d=(f=Js).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:tl(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){n=f,r=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){Tu(n,r,y)}}break;case 5:tl(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==d?(d.return=f,Js=d):wl(h)}p=p.sibling}t:for(p=null,h=t;;){if(5===h.tag){if(null===p){p=h;try{i=h.stateNode,c?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,s=void 0!==(u=h.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=mt("display",s))}catch(y){Tu(t,t.return,y)}}}else if(6===h.tag){if(null===p)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){Tu(t,t.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===t)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===t)break t;for(;null===h.sibling;){if(null===h.return||h.return===t)break t;p===h&&(p=null),h=h.return}p===h&&(p=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:yl(e,t),vl(t),4&n&&ml(t);case 21:}}function vl(t){var e=t.flags;if(2&e){try{t:{for(var r=t.return;null!==r;){if(sl(r)){var n=r;break t}r=r.return}throw Error(o(160))}switch(n.tag){case 5:var i=n.stateNode;32&n.flags&&(ht(i,""),n.flags&=-33),cl(t,ll(t),i);break;case 3:case 4:var a=n.stateNode.containerInfo;ul(t,ll(t),a);break;default:throw Error(o(161))}}catch(s){Tu(t,t.return,s)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function _l(t,e,r){Js=t,xl(t,e,r)}function xl(t,e,r){for(var n=0!==(1&t.mode);null!==Js;){var i=Js,o=i.child;if(22===i.tag&&n){var a=null!==i.memoizedState||Ys;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Qs;s=Ys;var u=Qs;if(Ys=a,(Qs=l)&&!u)for(Js=i;null!==Js;)l=(a=Js).child,22===a.tag&&null!==a.memoizedState?Sl(i):null!==l?(l.return=a,Js=l):Sl(i);for(;null!==o;)Js=o,xl(o,e,r),o=o.sibling;Js=i,Ys=s,Qs=u}bl(t)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Js=o):bl(t)}}function bl(t){for(;null!==Js;){var e=Js;if(0!==(8772&e.flags)){var r=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Qs||il(5,e);break;case 1:var n=e.stateNode;if(4&e.flags&&!Qs)if(null===r)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:go(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;null!==a&&No(e,a,n);break;case 3:var s=e.updateQueue;if(null!==s){if(r=null,null!==e.child)switch(e.child.tag){case 5:case 1:r=e.child.stateNode}No(e,s,r)}break;case 5:var l=e.stateNode;if(null===r&&4&e.flags){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var c=e.alternate;if(null!==c){var p=c.memoizedState;if(null!==p){var h=p.dehydrated;null!==h&&je(h)}}}break;default:throw Error(o(163))}Qs||512&e.flags&&ol(e)}catch(f){Tu(e,e.return,f)}}if(e===t){Js=null;break}if(null!==(r=e.sibling)){r.return=e.return,Js=r;break}Js=e.return}}function wl(t){for(;null!==Js;){var e=Js;if(e===t){Js=null;break}var r=e.sibling;if(null!==r){r.return=e.return,Js=r;break}Js=e.return}}function Sl(t){for(;null!==Js;){var e=Js;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{il(4,e)}catch(l){Tu(e,r,l)}break;case 1:var n=e.stateNode;if("function"===typeof n.componentDidMount){var i=e.return;try{n.componentDidMount()}catch(l){Tu(e,i,l)}}var o=e.return;try{ol(e)}catch(l){Tu(e,o,l)}break;case 5:var a=e.return;try{ol(e)}catch(l){Tu(e,a,l)}}}catch(l){Tu(e,e.return,l)}if(e===t){Js=null;break}var s=e.sibling;if(null!==s){s.return=e.return,Js=s;break}Js=e.return}}var kl,Tl=Math.ceil,El=x.ReactCurrentDispatcher,Il=x.ReactCurrentOwner,zl=x.ReactCurrentBatchConfig,Cl=0,Al=null,Pl=null,Dl=0,Ml=0,Ll=ki(0),Rl=0,Bl=null,Ol=0,Fl=0,Nl=0,Vl=null,Ul=null,jl=0,ql=1/0,Zl=null,Gl=!1,Wl=null,Hl=null,Xl=!1,Kl=null,Yl=0,Ql=0,$l=null,Jl=-1,tu=0;function eu(){return 0!==(6&Cl)?Qt():-1!==Jl?Jl:Jl=Qt()}function ru(t){return 0===(1&t.mode)?1:0!==(2&Cl)&&0!==Dl?Dl&-Dl:null!==yo.transition?(0===tu&&(tu=me()),tu):0!==(t=_e)?t:t=void 0===(t=window.event)?16:Ye(t.type)}function nu(t,e,r,n){if(50<Ql)throw Ql=0,$l=null,Error(o(185));ge(t,r,n),0!==(2&Cl)&&t===Al||(t===Al&&(0===(2&Cl)&&(Fl|=r),4===Rl&&lu(t,Dl)),iu(t,n),1===r&&0===Cl&&0===(1&e.mode)&&(ql=Qt()+500,Ni&&ji()))}function iu(t,e){var r=t.callbackNode;!function(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ae(o),s=1<<a,l=i[a];-1===l?0!==(s&r)&&0===(s&n)||(i[a]=fe(s,e)):l<=e&&(t.expiredLanes|=s),o&=~s}}(t,e);var n=he(t,t===Al?Dl:0);if(0===n)null!==r&&Xt(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(null!=r&&Xt(r),1===e)0===t.tag?function(t){Ni=!0,Ui(t)}(uu.bind(null,t)):Ui(uu.bind(null,t)),ai((function(){0===(6&Cl)&&ji()})),r=null;else{switch(xe(n)){case 1:r=Jt;break;case 4:r=te;break;case 16:default:r=ee;break;case 536870912:r=ne}r=Au(r,ou.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function ou(t,e){if(Jl=-1,tu=0,0!==(6&Cl))throw Error(o(327));var r=t.callbackNode;if(Su()&&t.callbackNode!==r)return null;var n=he(t,t===Al?Dl:0);if(0===n)return null;if(0!==(30&n)||0!==(n&t.expiredLanes)||e)e=gu(t,n);else{e=n;var i=Cl;Cl|=2;var a=mu();for(Al===t&&Dl===e||(Zl=null,ql=Qt()+500,fu(t,e));;)try{_u();break}catch(l){du(t,l)}wo(),El.current=a,Cl=i,null!==Pl?e=0:(Al=null,Dl=0,e=Rl)}if(0!==e){if(2===e&&(0!==(i=de(t))&&(n=i,e=au(t,i))),1===e)throw r=Bl,fu(t,0),lu(t,n),iu(t,Qt()),r;if(6===e)lu(t,n);else{if(i=t.current.alternate,0===(30&n)&&!function(t){for(var e=t;;){if(16384&e.flags){var r=e.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!sn(o(),i))return!1}catch(s){return!1}}}if(r=e.child,16384&e.subtreeFlags&&null!==r)r.return=e,e=r;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=gu(t,n))&&(0!==(a=de(t))&&(n=a,e=au(t,a))),1===e))throw r=Bl,fu(t,0),lu(t,n),iu(t,Qt()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(o(345));case 2:case 5:wu(t,Ul,Zl);break;case 3:if(lu(t,n),(130023424&n)===n&&10<(e=jl+500-Qt())){if(0!==he(t,0))break;if(((i=t.suspendedLanes)&n)!==n){eu(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ni(wu.bind(null,t,Ul,Zl),e);break}wu(t,Ul,Zl);break;case 4:if(lu(t,n),(4194240&n)===n)break;for(e=t.eventTimes,i=-1;0<n;){var s=31-ae(n);a=1<<s,(s=e[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=Qt()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Tl(n/1960))-n)){t.timeoutHandle=ni(wu.bind(null,t,Ul,Zl),n);break}wu(t,Ul,Zl);break;default:throw Error(o(329))}}}return iu(t,Qt()),t.callbackNode===r?ou.bind(null,t):null}function au(t,e){var r=Vl;return t.current.memoizedState.isDehydrated&&(fu(t,e).flags|=256),2!==(t=gu(t,e))&&(e=Ul,Ul=r,null!==e&&su(e)),t}function su(t){null===Ul?Ul=t:Ul.push.apply(Ul,t)}function lu(t,e){for(e&=~Nl,e&=~Fl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-ae(e),n=1<<r;t[r]=-1,e&=~n}}function uu(t){if(0!==(6&Cl))throw Error(o(327));Su();var e=he(t,0);if(0===(1&e))return iu(t,Qt()),null;var r=gu(t,e);if(0!==t.tag&&2===r){var n=de(t);0!==n&&(e=n,r=au(t,n))}if(1===r)throw r=Bl,fu(t,0),lu(t,e),iu(t,Qt()),r;if(6===r)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wu(t,Ul,Zl),iu(t,Qt()),null}function cu(t,e){var r=Cl;Cl|=1;try{return t(e)}finally{0===(Cl=r)&&(ql=Qt()+500,Ni&&ji())}}function pu(t){null!==Kl&&0===Kl.tag&&0===(6&Cl)&&Su();var e=Cl;Cl|=1;var r=zl.transition,n=_e;try{if(zl.transition=null,_e=1,t)return t()}finally{_e=n,zl.transition=r,0===(6&(Cl=e))&&ji()}}function hu(){Ml=Ll.current,Ti(Ll)}function fu(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(-1!==r&&(t.timeoutHandle=-1,ii(r)),null!==Pl)for(r=Pl.return;null!==r;){var n=r;switch(eo(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Mi();break;case 3:oa(),Ti(Ci),Ti(zi),pa();break;case 5:sa(n);break;case 4:oa();break;case 13:case 19:Ti(la);break;case 10:So(n.type._context);break;case 22:case 23:hu()}r=r.return}if(Al=t,Pl=t=Lu(t.current,null),Dl=Ml=e,Rl=0,Bl=null,Nl=Fl=Ol=0,Ul=Vl=null,null!==Io){for(e=0;e<Io.length;e++)if(null!==(n=(r=Io[e]).interleaved)){r.interleaved=null;var i=n.next,o=r.pending;if(null!==o){var a=o.next;o.next=i,n.next=a}r.pending=n}Io=null}return t}function du(t,e){for(;;){var r=Pl;try{if(wo(),ha.current=as,va){for(var n=ma.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}va=!1}if(da=0,ga=ya=ma=null,_a=!1,xa=0,Il.current=null,null===r||null===r.return){Rl=1,Bl=e,Pl=null;break}t:{var a=t,s=r.return,l=r,u=e;if(e=Dl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,p=l,h=p.tag;if(0===(1&p.mode)&&(0===h||11===h||15===h)){var f=p.alternate;f?(p.updateQueue=f.updateQueue,p.memoizedState=f.memoizedState,p.lanes=f.lanes):(p.updateQueue=null,p.memoizedState=null)}var d=gs(s);if(null!==d){d.flags&=-257,vs(d,s,l,0,e),1&d.mode&&ys(a,c,e),u=c;var m=(e=d).updateQueue;if(null===m){var y=new Set;y.add(u),e.updateQueue=y}else m.add(u);break t}if(0===(1&e)){ys(a,c,e),yu();break t}u=Error(o(426))}else if(io&&1&l.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),vs(g,s,l,0,e),mo(cs(u,l));break t}}a=u=cs(u,l),4!==Rl&&(Rl=2),null===Vl?Vl=[a]:Vl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e,Oo(a,ds(0,u,e));break t;case 1:l=u;var v=a.type,_=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Hl||!Hl.has(_)))){a.flags|=65536,e&=-e,a.lanes|=e,Oo(a,ms(a,l,e));break t}}a=a.return}while(null!==a)}bu(r)}catch(x){e=x,Pl===r&&null!==r&&(Pl=r=r.return);continue}break}}function mu(){var t=El.current;return El.current=as,null===t?as:t}function yu(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Al||0===(268435455&Ol)&&0===(268435455&Fl)||lu(Al,Dl)}function gu(t,e){var r=Cl;Cl|=2;var n=mu();for(Al===t&&Dl===e||(Zl=null,fu(t,e));;)try{vu();break}catch(i){du(t,i)}if(wo(),Cl=r,El.current=n,null!==Pl)throw Error(o(261));return Al=null,Dl=0,Rl}function vu(){for(;null!==Pl;)xu(Pl)}function _u(){for(;null!==Pl&&!Kt();)xu(Pl)}function xu(t){var e=kl(t.alternate,t,Ml);t.memoizedProps=t.pendingProps,null===e?bu(t):Pl=e,Il.current=null}function bu(t){var e=t;do{var r=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(r=Xs(r,e,Ml)))return void(Pl=r)}else{if(null!==(r=Ks(r,e)))return r.flags&=32767,void(Pl=r);if(null===t)return Rl=6,void(Pl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Pl=e);Pl=e=t}while(null!==e);0===Rl&&(Rl=5)}function wu(t,e,r){var n=_e,i=zl.transition;try{zl.transition=null,_e=1,function(t,e,r,n){do{Su()}while(null!==Kl);if(0!==(6&Cl))throw Error(o(327));r=t.finishedWork;var i=t.finishedLanes;if(null===r)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-ae(r),o=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~o}}(t,a),t===Al&&(Pl=Al=null,Dl=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Xl||(Xl=!0,Au(ee,(function(){return Su(),null}))),a=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||a){a=zl.transition,zl.transition=null;var s=_e;_e=1;var l=Cl;Cl|=4,Il.current=null,function(t,e){if(ti=Ze,fn(t=hn())){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else t:{var n=(r=(r=t.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch(b){r=null;break t}var s=0,l=-1,u=-1,c=0,p=0,h=t,f=null;e:for(;;){for(var d;h!==r||0!==i&&3!==h.nodeType||(l=s+i),h!==a||0!==n&&3!==h.nodeType||(u=s+n),3===h.nodeType&&(s+=h.nodeValue.length),null!==(d=h.firstChild);)f=h,h=d;for(;;){if(h===t)break e;if(f===r&&++c===i&&(l=s),f===a&&++p===n&&(u=s),null!==(d=h.nextSibling))break;f=(h=f).parentNode}h=d}r=-1===l||-1===u?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(ei={focusedElem:t,selectionRange:r},Ze=!1,Js=e;null!==Js;)if(t=(e=Js).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Js=t;else for(;null!==Js;){e=Js;try{var m=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var y=m.memoizedProps,g=m.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?y:go(e.type,y),g);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var x=e.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(b){Tu(e,e.return,b)}if(null!==(t=e.sibling)){t.return=e.return,Js=t;break}Js=e.return}m=rl,rl=!1}(t,r),gl(r,t),dn(ei),Ze=!!ti,ei=ti=null,t.current=r,_l(r,t,i),Yt(),Cl=l,_e=s,zl.transition=a}else t.current=r;if(Xl&&(Xl=!1,Kl=t,Yl=i),a=t.pendingLanes,0===a&&(Hl=null),function(t){if(oe&&"function"===typeof oe.onCommitFiberRoot)try{oe.onCommitFiberRoot(ie,t,void 0,128===(128&t.current.flags))}catch(e){}}(r.stateNode),iu(t,Qt()),null!==e)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Gl)throw Gl=!1,t=Wl,Wl=null,t;0!==(1&Yl)&&0!==t.tag&&Su(),a=t.pendingLanes,0!==(1&a)?t===$l?Ql++:(Ql=0,$l=t):Ql=0,ji()}(t,e,r,n)}finally{zl.transition=i,_e=n}return null}function Su(){if(null!==Kl){var t=xe(Yl),e=zl.transition,r=_e;try{if(zl.transition=null,_e=16>t?16:t,null===Kl)var n=!1;else{if(t=Kl,Kl=null,Yl=0,0!==(6&Cl))throw Error(o(331));var i=Cl;for(Cl|=4,Js=t.current;null!==Js;){var a=Js,s=a.child;if(0!==(16&Js.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Js=c;null!==Js;){var p=Js;switch(p.tag){case 0:case 11:case 15:nl(8,p,a)}var h=p.child;if(null!==h)h.return=p,Js=h;else for(;null!==Js;){var f=(p=Js).sibling,d=p.return;if(al(p),p===c){Js=null;break}if(null!==f){f.return=d,Js=f;break}Js=d}}}var m=a.alternate;if(null!==m){var y=m.child;if(null!==y){m.child=null;do{var g=y.sibling;y.sibling=null,y=g}while(null!==y)}}Js=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Js=s;else t:for(;null!==Js;){if(0!==(2048&(a=Js).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Js=v;break t}Js=a.return}}var _=t.current;for(Js=_;null!==Js;){var x=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Js=x;else t:for(s=_;null!==Js;){if(0!==(2048&(l=Js).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(w){Tu(l,l.return,w)}if(l===s){Js=null;break t}var b=l.sibling;if(null!==b){b.return=l.return,Js=b;break t}Js=l.return}}if(Cl=i,ji(),oe&&"function"===typeof oe.onPostCommitFiberRoot)try{oe.onPostCommitFiberRoot(ie,t)}catch(w){}n=!0}return n}finally{_e=r,zl.transition=e}}return!1}function ku(t,e,r){t=Ro(t,e=ds(0,e=cs(r,e),1),1),e=eu(),null!==t&&(ge(t,1,e),iu(t,e))}function Tu(t,e,r){if(3===t.tag)ku(t,t,r);else for(;null!==e;){if(3===e.tag){ku(e,t,r);break}if(1===e.tag){var n=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Hl||!Hl.has(n))){e=Ro(e,t=ms(e,t=cs(r,t),1),1),t=eu(),null!==e&&(ge(e,1,t),iu(e,t));break}}e=e.return}}function Eu(t,e,r){var n=t.pingCache;null!==n&&n.delete(e),e=eu(),t.pingedLanes|=t.suspendedLanes&r,Al===t&&(Dl&r)===r&&(4===Rl||3===Rl&&(130023424&Dl)===Dl&&500>Qt()-jl?fu(t,0):Nl|=r),iu(t,e)}function Iu(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ce,0===(130023424&(ce<<=1))&&(ce=4194304)));var r=eu();null!==(t=Ao(t,e))&&(ge(t,e,r),iu(t,r))}function zu(t){var e=t.memoizedState,r=0;null!==e&&(r=e.retryLane),Iu(t,r)}function Cu(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(o(314))}null!==n&&n.delete(e),Iu(t,r)}function Au(t,e){return Ht(t,e)}function Pu(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Du(t,e,r,n){return new Pu(t,e,r,n)}function Mu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Lu(t,e){var r=t.alternate;return null===r?((r=Du(t.tag,e,t.key,t.mode)).elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&t.flags,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ru(t,e,r,n,i,a){var s=2;if(n=t,"function"===typeof t)Mu(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case S:return Bu(r.children,i,a,e);case k:s=8,i|=8;break;case T:return(t=Du(12,r,e,2|i)).elementType=T,t.lanes=a,t;case C:return(t=Du(13,r,e,i)).elementType=C,t.lanes=a,t;case A:return(t=Du(19,r,e,i)).elementType=A,t.lanes=a,t;case M:return Ou(r,i,a,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case E:s=10;break t;case I:s=9;break t;case z:s=11;break t;case P:s=14;break t;case D:s=16,n=null;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Du(s,r,e,i)).elementType=t,e.type=n,e.lanes=a,e}function Bu(t,e,r,n){return(t=Du(7,t,n,e)).lanes=r,t}function Ou(t,e,r,n){return(t=Du(22,t,n,e)).elementType=M,t.lanes=r,t.stateNode={isHidden:!1},t}function Fu(t,e,r){return(t=Du(6,t,null,e)).lanes=r,t}function Nu(t,e,r){return(e=Du(4,null!==t.children?t.children:[],t.key,e)).lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Vu(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ye(0),this.expirationTimes=ye(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ye(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uu(t,e,r,n,i,o,a,s,l){return t=new Vu(t,e,r,s,l),1===e?(e=1,!0===o&&(e|=8)):e=0,o=Du(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Do(o),t}function ju(t){if(!t)return Ii;t:{if(jt(t=t._reactInternals)!==t||1!==t.tag)throw Error(o(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Di(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(o(171))}if(1===t.tag){var r=t.type;if(Di(r))return Ri(t,r,e)}return e}function qu(t,e,r,n,i,o,a,s,l){return(t=Uu(r,n,!0,t,0,o,0,s,l)).context=ju(null),r=t.current,(o=Lo(n=eu(),i=ru(r))).callback=void 0!==e&&null!==e?e:null,Ro(r,o,i),t.current.lanes=i,ge(t,i,n),iu(t,n),t}function Zu(t,e,r,n){var i=e.current,o=eu(),a=ru(i);return r=ju(r),null===e.context?e.context=r:e.pendingContext=r,(e=Lo(o,a)).payload={element:t},null!==(n=void 0===n?null:n)&&(e.callback=n),null!==(t=Ro(i,e,a))&&(nu(t,i,a,o),Bo(t,i,a)),a}function Gu(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Wu(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var r=t.retryLane;t.retryLane=0!==r&&r<e?r:e}}function Hu(t,e){Wu(t,e),(t=t.alternate)&&Wu(t,e)}kl=function(t,e,r){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ci.current)xs=!0;else{if(0===(t.lanes&r)&&0===(128&e.flags))return xs=!1,function(t,e,r){switch(e.tag){case 3:As(e),fo();break;case 5:aa(e);break;case 1:Di(e.type)&&Bi(e);break;case 4:ia(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Ei(vo,n._currentValue),n._currentValue=i;break;case 13:if(null!==(n=e.memoizedState))return null!==n.dehydrated?(Ei(la,1&la.current),e.flags|=128,null):0!==(r&e.child.childLanes)?Fs(t,e,r):(Ei(la,1&la.current),null!==(t=Gs(t,e,r))?t.sibling:null);Ei(la,1&la.current);break;case 19:if(n=0!==(r&e.childLanes),0!==(128&t.flags)){if(n)return qs(t,e,r);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(la,la.current),n)break;return null;case 22:case 23:return e.lanes=0,Ts(t,e,r)}return Gs(t,e,r)}(t,e,r);xs=0!==(131072&t.flags)}else xs=!1,io&&0!==(1048576&e.flags)&&Ji(e,Wi,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Zs(t,e),t=e.pendingProps;var i=Pi(e,zi.current);To(e,r),i=ka(null,e,n,t,i,r);var a=Ta();return e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Di(n)?(a=!0,Bi(e)):a=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Do(e),i.updater=jo,e.stateNode=i,i._reactInternals=e,Wo(e,n,t,r),e=Cs(null,e,n,!0,a,r)):(e.tag=0,io&&a&&to(e),bs(null,e,i,r),e=e.child),e;case 16:n=e.elementType;t:{switch(Zs(t,e),t=e.pendingProps,n=(i=n._init)(n._payload),e.type=n,i=e.tag=function(t){if("function"===typeof t)return Mu(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===z)return 11;if(t===P)return 14}return 2}(n),t=go(n,t),i){case 0:e=Is(null,e,n,t,r);break t;case 1:e=zs(null,e,n,t,r);break t;case 11:e=ws(null,e,n,t,r);break t;case 14:e=Ss(null,e,n,go(n.type,t),r);break t}throw Error(o(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,Is(t,e,n,i=e.elementType===n?i:go(n,i),r);case 1:return n=e.type,i=e.pendingProps,zs(t,e,n,i=e.elementType===n?i:go(n,i),r);case 3:t:{if(As(e),null===t)throw Error(o(387));n=e.pendingProps,i=(a=e.memoizedState).element,Mo(t,e),Fo(e,n,null,r);var s=e.memoizedState;if(n=s.element,a.isDehydrated){if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,256&e.flags){e=Ps(t,e,n,r,i=cs(Error(o(423)),e));break t}if(n!==i){e=Ps(t,e,n,r,i=cs(Error(o(424)),e));break t}for(no=ui(e.stateNode.containerInfo.firstChild),ro=e,io=!0,oo=null,r=$o(e,null,n,r),e.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(fo(),n===i){e=Gs(t,e,r);break t}bs(t,e,n,r)}e=e.child}return e;case 5:return aa(e),null===t&&uo(e),n=e.type,i=e.pendingProps,a=null!==t?t.memoizedProps:null,s=i.children,ri(n,i)?s=null:null!==a&&ri(n,a)&&(e.flags|=32),Es(t,e),bs(t,e,s,r),e.child;case 6:return null===t&&uo(e),null;case 13:return Fs(t,e,r);case 4:return ia(e,e.stateNode.containerInfo),n=e.pendingProps,null===t?e.child=Qo(e,null,n,r):bs(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,ws(t,e,n,i=e.elementType===n?i:go(n,i),r);case 7:return bs(t,e,e.pendingProps,r),e.child;case 8:case 12:return bs(t,e,e.pendingProps.children,r),e.child;case 10:t:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,Ei(vo,n._currentValue),n._currentValue=s,null!==a)if(sn(a.value,s)){if(a.children===i.children&&!Ci.current){e=Gs(t,e,r);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var u=l.firstContext;null!==u;){if(u.context===n){if(1===a.tag){(u=Lo(-1,r&-r)).tag=2;var c=a.updateQueue;if(null!==c){var p=(c=c.shared).pending;null===p?u.next=u:(u.next=p.next,p.next=u),c.pending=u}}a.lanes|=r,null!==(u=a.alternate)&&(u.lanes|=r),ko(a.return,r,e),l.lanes|=r;break}u=u.next}}else if(10===a.tag)s=a.type===e.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=r,null!==(l=s.alternate)&&(l.lanes|=r),ko(s,r,e),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}bs(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,To(e,r),n=n(i=Eo(i)),e.flags|=1,bs(t,e,n,r),e.child;case 14:return i=go(n=e.type,e.pendingProps),Ss(t,e,n,i=go(n.type,i),r);case 15:return ks(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:go(n,i),Zs(t,e),e.tag=1,Di(n)?(t=!0,Bi(e)):t=!1,To(e,r),Zo(e,n,i),Wo(e,n,i,r),Cs(null,e,n,!0,t,r);case 19:return qs(t,e,r);case 22:return Ts(t,e,r)}throw Error(o(156,e.tag))};var Xu="function"===typeof reportError?reportError:function(t){console.error(t)};function Ku(t){this._internalRoot=t}function Yu(t){this._internalRoot=t}function Qu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function $u(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Ju(){}function tc(t,e,r,n,i){var o=r._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var t=Gu(a);s.call(t)}}Zu(e,a,t,i)}else a=function(t,e,r,n,i){if(i){if("function"===typeof n){var o=n;n=function(){var t=Gu(a);o.call(t)}}var a=qu(e,n,t,0,null,!1,0,"",Ju);return t._reactRootContainer=a,t[di]=a.current,jn(8===t.nodeType?t.parentNode:t),pu(),a}for(;i=t.lastChild;)t.removeChild(i);if("function"===typeof n){var s=n;n=function(){var t=Gu(l);s.call(t)}}var l=Uu(t,0,!1,null,0,!1,0,"",Ju);return t._reactRootContainer=l,t[di]=l.current,jn(8===t.nodeType?t.parentNode:t),pu((function(){Zu(e,l,r,n)})),l}(r,e,t,i,n);return Gu(a)}Yu.prototype.render=Ku.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(o(409));Zu(t,e,null,null)},Yu.prototype.unmount=Ku.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;pu((function(){Zu(null,t,null,null)})),e[di]=null}},Yu.prototype.unstable_scheduleHydration=function(t){if(t){var e=ke();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Me.length&&0!==e&&e<Me[r].priority;r++);Me.splice(r,0,t),0===r&&Oe(t)}},be=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=pe(e.pendingLanes);0!==r&&(ve(e,1|r),iu(e,Qt()),0===(6&Cl)&&(ql=Qt()+500,ji()))}break;case 13:pu((function(){var e=Ao(t,1);if(null!==e){var r=eu();nu(e,t,1,r)}})),Hu(t,1)}},we=function(t){if(13===t.tag){var e=Ao(t,134217728);if(null!==e)nu(e,t,134217728,eu());Hu(t,134217728)}},Se=function(t){if(13===t.tag){var e=ru(t),r=Ao(t,e);if(null!==r)nu(r,t,e,eu());Hu(t,e)}},ke=function(){return _e},Te=function(t,e){var r=_e;try{return _e=t,e()}finally{_e=r}},wt=function(t,e,r){switch(e){case"input":if($(t,r),e=r.name,"radio"===r.type&&null!=e){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=bi(n);if(!i)throw Error(o(90));H(n),$(n,i)}}}break;case"textarea":ot(t,r);break;case"select":null!=(e=r.value)&&rt(t,!!r.multiple,e,!1)}},zt=cu,Ct=pu;var ec={usingClientEntryPoint:!1,Events:[_i,xi,bi,Et,It,cu]},rc={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nc={bundleType:rc.bundleType,version:rc.version,rendererPackageName:rc.rendererPackageName,rendererConfig:rc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Gt(t))?null:t.stateNode},findFiberByHostInstance:rc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{ie=ic.inject(nc),oe=ic}catch(ct){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,e.createPortal=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qu(e))throw Error(o(200));return function(t,e,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==n?null:""+n,children:t,containerInfo:e,implementation:r}}(t,e,null,r)},e.createRoot=function(t,e){if(!Qu(t))throw Error(o(299));var r=!1,n="",i=Xu;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(r=!0),void 0!==e.identifierPrefix&&(n=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=Uu(t,1,!1,null,0,r,0,n,i),t[di]=e.current,jn(8===t.nodeType?t.parentNode:t),new Ku(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(o(188));throw t=Object.keys(t).join(","),Error(o(268,t))}return t=null===(t=Gt(e))?null:t.stateNode},e.flushSync=function(t){return pu(t)},e.hydrate=function(t,e,r){if(!$u(e))throw Error(o(200));return tc(null,t,e,!0,r)},e.hydrateRoot=function(t,e,r){if(!Qu(t))throw Error(o(405));var n=null!=r&&r.hydratedSources||null,i=!1,a="",s=Xu;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(i=!0),void 0!==r.identifierPrefix&&(a=r.identifierPrefix),void 0!==r.onRecoverableError&&(s=r.onRecoverableError)),e=qu(e,null,t,1,null!=r?r:null,i,0,a,s),t[di]=e.current,jn(t),n)for(t=0;t<n.length;t++)i=(i=(r=n[t])._getVersion)(r._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Yu(e)},e.render=function(t,e,r){if(!$u(e))throw Error(o(200));return tc(null,t,e,!1,r)},e.unmountComponentAtNode=function(t){if(!$u(t))throw Error(o(40));return!!t._reactRootContainer&&(pu((function(){tc(null,null,t,!1,(function(){t._reactRootContainer=null,t[di]=null}))})),!0)},e.unstable_batchedUpdates=cu,e.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!$u(r))throw Error(o(200));if(null==t||void 0===t._reactInternals)throw Error(o(38));return tc(t,e,r,!1,n)},e.version="18.2.0-next-9e3b772b8-20220608"},250:function(t,e,r){"use strict";var n=r(164);e.createRoot=n.createRoot,e.hydrateRoot=n.hydrateRoot},164:function(t,e,r){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=r(463)},374:function(t,e,r){"use strict";var n=r(791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(t,e,r){var n,o={},u=null,c=null;for(n in void 0!==r&&(u=""+r),void 0!==e.key&&(u=""+e.key),void 0!==e.ref&&(c=e.ref),e)a.call(e,n)&&!l.hasOwnProperty(n)&&(o[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps)void 0===o[n]&&(o[n]=e[n]);return{$$typeof:i,type:t,key:u,ref:c,props:o,_owner:s.current}}e.Fragment=o,e.jsx=u,e.jsxs=u},117:function(t,e){"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,y={};function g(t,e,r){this.props=t,this.context=e,this.refs=y,this.updater=r||d}function v(){}function _(t,e,r){this.props=t,this.context=e,this.refs=y,this.updater=r||d}g.prototype.isReactComponent={},g.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},g.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=g.prototype;var x=_.prototype=new v;x.constructor=_,m(x,g.prototype),x.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function T(t,e,n){var i,o={},a=null,s=null;if(null!=e)for(i in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)w.call(e,i)&&!k.hasOwnProperty(i)&&(o[i]=e[i]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:r,type:t,key:a,ref:s,props:o,_owner:S.current}}function E(t){return"object"===typeof t&&null!==t&&t.$$typeof===r}var I=/\/+/g;function z(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function C(t,e,i,o,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case r:case n:l=!0}}if(l)return a=a(l=t),t=""===o?"."+z(l,0):o,b(a)?(i="",null!=t&&(i=t.replace(I,"$&/")+"/"),C(a,e,i,"",(function(t){return t}))):null!=a&&(E(a)&&(a=function(t,e){return{$$typeof:r,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(I,"$&/")+"/")+t)),e.push(a)),1;if(l=0,o=""===o?".":o+":",b(t))for(var u=0;u<t.length;u++){var c=o+z(s=t[u],u);l+=C(s,e,i,c,a)}else if(c=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"===typeof c)for(t=c.call(t),u=0;!(s=t.next()).done;)l+=C(s=s.value,e,i,c=o+z(s,u++),a);else if("object"===s)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function A(t,e,r){if(null==t)return t;var n=[],i=0;return C(t,n,"","",(function(t){return e.call(r,t,i++)})),n}function P(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var D={current:null},M={transition:null},L={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:M,ReactCurrentOwner:S};e.Children={map:A,forEach:function(t,e,r){A(t,(function(){e.apply(this,arguments)}),r)},count:function(t){var e=0;return A(t,(function(){e++})),e},toArray:function(t){return A(t,(function(t){return t}))||[]},only:function(t){if(!E(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=g,e.Fragment=i,e.Profiler=a,e.PureComponent=_,e.StrictMode=o,e.Suspense=c,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=m({},t.props),o=t.key,a=t.ref,s=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,s=S.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)w.call(e,u)&&!k.hasOwnProperty(u)&&(i[u]=void 0===e[u]&&void 0!==l?l[u]:e[u])}var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:r,type:t.type,key:o,ref:a,props:i,_owner:s}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},e.createElement=T,e.createFactory=function(t){var e=T.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=E,e.lazy=function(t){return{$$typeof:h,_payload:{_status:-1,_result:t},_init:P}},e.memo=function(t,e){return{$$typeof:p,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=M.transition;M.transition={};try{t()}finally{M.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return D.current.useCallback(t,e)},e.useContext=function(t){return D.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return D.current.useDeferredValue(t)},e.useEffect=function(t,e){return D.current.useEffect(t,e)},e.useId=function(){return D.current.useId()},e.useImperativeHandle=function(t,e,r){return D.current.useImperativeHandle(t,e,r)},e.useInsertionEffect=function(t,e){return D.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return D.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return D.current.useMemo(t,e)},e.useReducer=function(t,e,r){return D.current.useReducer(t,e,r)},e.useRef=function(t){return D.current.useRef(t)},e.useState=function(t){return D.current.useState(t)},e.useSyncExternalStore=function(t,e,r){return D.current.useSyncExternalStore(t,e,r)},e.useTransition=function(){return D.current.useTransition()},e.version="18.2.0"},791:function(t,e,r){"use strict";t.exports=r(117)},184:function(t,e,r){"use strict";t.exports=r(374)},813:function(t,e){"use strict";function r(t,e){var r=t.length;t.push(e);t:for(;0<r;){var n=r-1>>>1,i=t[n];if(!(0<o(i,e)))break t;t[n]=e,t[r]=i,r=n}}function n(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],r=t.pop();if(r!==e){t[0]=r;t:for(var n=0,i=t.length,a=i>>>1;n<a;){var s=2*(n+1)-1,l=t[s],u=s+1,c=t[u];if(0>o(l,r))u<i&&0>o(c,l)?(t[n]=c,t[u]=r,n=u):(t[n]=l,t[s]=r,n=s);else{if(!(u<i&&0>o(c,r)))break t;t[n]=c,t[u]=r,n=u}}}return e}function o(t,e){var r=t.sortIndex-e.sortIndex;return 0!==r?r:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var u=[],c=[],p=1,h=null,f=3,d=!1,m=!1,y=!1,g="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function x(t){for(var e=n(c);null!==e;){if(null===e.callback)i(c);else{if(!(e.startTime<=t))break;i(c),e.sortIndex=e.expirationTime,r(u,e)}e=n(c)}}function b(t){if(y=!1,x(t),!m)if(null!==n(u))m=!0,M(w);else{var e=n(c);null!==e&&L(b,e.startTime-t)}}function w(t,r){m=!1,y&&(y=!1,v(E),E=-1),d=!0;var o=f;try{for(x(r),h=n(u);null!==h&&(!(h.expirationTime>r)||t&&!C());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=r);r=e.unstable_now(),"function"===typeof s?h.callback=s:h===n(u)&&i(u),x(r)}else i(u);h=n(u)}if(null!==h)var l=!0;else{var p=n(c);null!==p&&L(b,p.startTime-r),l=!1}return l}finally{h=null,f=o,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,T=null,E=-1,I=5,z=-1;function C(){return!(e.unstable_now()-z<I)}function A(){if(null!==T){var t=e.unstable_now();z=t;var r=!0;try{r=T(!0,t)}finally{r?S():(k=!1,T=null)}}else k=!1}if("function"===typeof _)S=function(){_(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,D=P.port2;P.port1.onmessage=A,S=function(){D.postMessage(null)}}else S=function(){g(A,0)};function M(t){T=t,k||(k=!0,S())}function L(t,r){E=g((function(){t(e.unstable_now())}),r)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||d||(m=!0,M(w))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var r=f;f=e;try{return t()}finally{f=r}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var r=f;f=t;try{return e()}finally{f=r}},e.unstable_scheduleCallback=function(t,i,o){var a=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,t){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return t={id:p++,callback:i,priorityLevel:t,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(t.sortIndex=o,r(c,t),null===n(u)&&t===n(c)&&(y?(v(E),E=-1):y=!0,L(b,o-a))):(t.sortIndex=s,r(u,t),m||d||(m=!0,M(w))),t},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(t){var e=f;return function(){var r=f;f=e;try{return t.apply(this,arguments)}finally{f=r}}}},296:function(t,e,r){"use strict";t.exports=r(813)}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,r),o.exports}r.m=t,r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.f={},r.e=function(t){return Promise.all(Object.keys(r.f).reduce((function(e,n){return r.f[n](t,e),e}),[]))},r.u=function(t){return"static/js/"+t+".a74dc707.chunk.js"},r.miniCssF=function(t){},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t={},e="weatherapp-react:";r.l=function(n,i,o,a){if(t[n])t[n].push(i);else{var s,l;if(void 0!==o)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var p=u[c];if(p.getAttribute("src")==n||p.getAttribute("data-webpack")==e+o){s=p;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",e+o),s.src=n),t[n]=[i];var h=function(e,r){s.onerror=s.onload=null,clearTimeout(f);var i=t[n];if(delete t[n],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(t){return t(r)})),e)return e(r)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.p="/weather_app_react_v2/",function(){var t={179:0};r.f.j=function(e,n){var i=r.o(t,e)?t[e]:void 0;if(0!==i)if(i)n.push(i[2]);else{var o=new Promise((function(r,n){i=t[e]=[r,n]}));n.push(i[2]=o);var a=r.p+r.u(e),s=new Error;r.l(a,(function(n){if(r.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var o=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;s.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}}),"chunk-"+e,e)}};var e=function(e,n){var i,o,a=n[0],s=n[1],l=n[2],u=0;if(a.some((function(e){return 0!==t[e]}))){for(i in s)r.o(s,i)&&(r.m[i]=s[i]);if(l)l(r)}for(e&&e(n);u<a.length;u++)o=a[u],r.o(t,o)&&t[o]&&t[o][0](),t[o]=0},n=self.webpackChunkweatherapp_react=self.webpackChunkweatherapp_react||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}(),function(){"use strict";var t=r(791),e=r(250);function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"===typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var o=r(87),a=r.n(o),s=r(184);var l=function(e){var r=i((0,t.useState)(""),2),n=r[0],o=r[1];return(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("input",{className:"Search_input",type:"text",id:"location",name:"location",placeholder:"Search Location or Click on map",value:n,onChange:function(t){return o(t.target.value)}}),(0,s.jsx)("button",{onClick:function(){e.clickHandler(n),o("")},className:"Search_button",children:"Search"})]})};function u(t,e){return function(){return t.apply(e,arguments)}}var c,p=Object.prototype.toString,h=Object.getPrototypeOf,f=(c=Object.create(null),function(t){var e=p.call(t);return c[e]||(c[e]=e.slice(8,-1).toLowerCase())}),d=function(t){return t=t.toLowerCase(),function(e){return f(e)===t}},m=function(t){return function(e){return typeof e===t}},y=Array.isArray,g=m("undefined");var v=d("ArrayBuffer");var _=m("string"),x=m("function"),b=m("number"),w=function(t){return null!==t&&"object"===typeof t},S=function(t){if("object"!==f(t))return!1;var e=h(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},k=d("Date"),T=d("File"),E=d("Blob"),I=d("FileList"),z=d("URLSearchParams");function C(t,e){var r,n,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,o=void 0!==i&&i;if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),y(t))for(r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else{var a,s=o?Object.getOwnPropertyNames(t):Object.keys(t),l=s.length;for(r=0;r<l;r++)a=s[r],e.call(null,t[a],a,t)}}function A(t,e){e=e.toLowerCase();for(var r,n=Object.keys(t),i=n.length;i-- >0;)if(e===(r=n[i]).toLowerCase())return r;return null}var P="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,D=function(t){return!g(t)&&t!==P};var M,L=(M="undefined"!==typeof Uint8Array&&h(Uint8Array),function(t){return M&&t instanceof M}),R=d("HTMLFormElement"),B=function(t){var e=Object.prototype.hasOwnProperty;return function(t,r){return e.call(t,r)}}(),O=d("RegExp"),F=function(t,e){var r=Object.getOwnPropertyDescriptors(t),n={};C(r,(function(r,i){!1!==e(r,i,t)&&(n[i]=r)})),Object.defineProperties(t,n)},N="abcdefghijklmnopqrstuvwxyz",V="0123456789",U={DIGIT:V,ALPHA:N,ALPHA_DIGIT:N+N.toUpperCase()+V};var j={isArray:y,isArrayBuffer:v,isBuffer:function(t){return null!==t&&!g(t)&&null!==t.constructor&&!g(t.constructor)&&x(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:function(t){var e="[object FormData]";return t&&("function"===typeof FormData&&t instanceof FormData||p.call(t)===e||x(t.toString)&&t.toString()===e)},isArrayBufferView:function(t){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&v(t.buffer)},isString:_,isNumber:b,isBoolean:function(t){return!0===t||!1===t},isObject:w,isPlainObject:S,isUndefined:g,isDate:k,isFile:T,isBlob:E,isRegExp:O,isFunction:x,isStream:function(t){return w(t)&&x(t.pipe)},isURLSearchParams:z,isTypedArray:L,isFileList:I,forEach:C,merge:function t(){for(var e=(D(this)&&this||{}).caseless,r={},n=function(n,i){var o=e&&A(r,i)||i;S(r[o])&&S(n)?r[o]=t(r[o],n):S(n)?r[o]=t({},n):y(n)?r[o]=n.slice():r[o]=n},i=0,o=arguments.length;i<o;i++)arguments[i]&&C(arguments[i],n);return r},extend:function(t,e,r){return C(e,(function(e,n){r&&x(e)?t[n]=u(e,r):t[n]=e}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),t},trim:function(t){return t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t},inherits:function(t,e,r,n){t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},toFlatObject:function(t,e,r,n){var i,o,a,s={};if(e=e||{},null==t)return e;do{for(o=(i=Object.getOwnPropertyNames(t)).length;o-- >0;)a=i[o],n&&!n(a,t,e)||s[a]||(e[a]=t[a],s[a]=!0);t=!1!==r&&h(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},kindOf:f,kindOfTest:d,endsWith:function(t,e,r){t=String(t),(void 0===r||r>t.length)&&(r=t.length),r-=e.length;var n=t.indexOf(e,r);return-1!==n&&n===r},toArray:function(t){if(!t)return null;if(y(t))return t;var e=t.length;if(!b(e))return null;for(var r=new Array(e);e-- >0;)r[e]=t[e];return r},forEachEntry:function(t,e){for(var r,n=(t&&t[Symbol.iterator]).call(t);(r=n.next())&&!r.done;){var i=r.value;e.call(t,i[0],i[1])}},matchAll:function(t,e){for(var r,n=[];null!==(r=t.exec(e));)n.push(r);return n},isHTMLForm:R,hasOwnProperty:B,hasOwnProp:B,reduceDescriptors:F,freezeMethods:function(t){F(t,(function(e,r){if(x(t)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;var n=t[r];x(n)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=function(){throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:function(t,e){var r={},n=function(t){t.forEach((function(t){r[t]=!0}))};return y(t)?n(t):n(String(t).split(e)),r},toCamelCase:function(t){return t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,r){return e.toUpperCase()+r}))},noop:function(){},toFiniteNumber:function(t,e){return t=+t,Number.isFinite(t)?t:e},findKey:A,global:P,isContextDefined:D,ALPHABET:U,generateString:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U.ALPHA_DIGIT,r="",n=e.length;t--;)r+=e[Math.random()*n|0];return r},isSpecCompliantForm:function(t){return!!(t&&x(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:function(t){var e=new Array(10);return function t(r,n){if(w(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[n]=r;var i=y(r)?[]:{};return C(r,(function(e,r){var o=t(e,n+1);!g(o)&&(i[r]=o)})),e[n]=void 0,i}}return r}(t,0)}};function q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function G(t){var e=function(t,e){if("object"!==Z(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Z(e)?e:String(e)}function W(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,G(n.key),n)}}function H(t,e,r){return e&&W(t.prototype,e),r&&W(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function X(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}j.inherits(X,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:j.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var K=X.prototype,Y={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(t){Y[t]={value:t}})),Object.defineProperties(X,Y),Object.defineProperty(K,"isAxiosError",{value:!0}),X.from=function(t,e,r,n,i,o){var a=Object.create(K);return j.toFlatObject(t,a,(function(t){return t!==Error.prototype}),(function(t){return"isAxiosError"!==t})),X.call(a,t.message,e,r,n,i),a.cause=t,a.name=t.name,o&&Object.assign(a,o),a};var Q=X,$=null;function J(t){return j.isPlainObject(t)||j.isArray(t)}function tt(t){return j.endsWith(t,"[]")?t.slice(0,-2):t}function et(t,e,r){return t?t.concat(e).map((function(t,e){return t=tt(t),!r&&e?"["+t+"]":t})).join(r?".":""):e}var rt=j.toFlatObject(j,{},null,(function(t){return/^is[A-Z]/.test(t)}));var nt=function(t,e,r){if(!j.isObject(t))throw new TypeError("target must be an object");e=e||new($||FormData);var n=(r=j.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!j.isUndefined(e[t])}))).metaTokens,i=r.visitor||u,o=r.dots,a=r.indexes,s=(r.Blob||"undefined"!==typeof Blob&&Blob)&&j.isSpecCompliantForm(e);if(!j.isFunction(i))throw new TypeError("visitor must be a function");function l(t){if(null===t)return"";if(j.isDate(t))return t.toISOString();if(!s&&j.isBlob(t))throw new Q("Blob is not supported. Use a Buffer instead.");return j.isArrayBuffer(t)||j.isTypedArray(t)?s&&"function"===typeof Blob?new Blob([t]):Buffer.from(t):t}function u(t,r,i){var s=t;if(t&&!i&&"object"===typeof t)if(j.endsWith(r,"{}"))r=n?r:r.slice(0,-2),t=JSON.stringify(t);else if(j.isArray(t)&&function(t){return j.isArray(t)&&!t.some(J)}(t)||(j.isFileList(t)||j.endsWith(r,"[]"))&&(s=j.toArray(t)))return r=tt(r),s.forEach((function(t,n){!j.isUndefined(t)&&null!==t&&e.append(!0===a?et([r],n,o):null===a?r:r+"[]",l(t))})),!1;return!!J(t)||(e.append(et(i,r,o),l(t)),!1)}var c=[],p=Object.assign(rt,{defaultVisitor:u,convertValue:l,isVisitable:J});if(!j.isObject(t))throw new TypeError("data must be an object");return function t(r,n){if(!j.isUndefined(r)){if(-1!==c.indexOf(r))throw Error("Circular reference detected in "+n.join("."));c.push(r),j.forEach(r,(function(r,o){!0===(!(j.isUndefined(r)||null===r)&&i.call(e,r,j.isString(o)?o.trim():o,n,p))&&t(r,n?n.concat(o):[o])})),c.pop()}}(t),e};function it(t){var e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function ot(t,e){this._pairs=[],t&&nt(t,this,e)}var at=ot.prototype;at.append=function(t,e){this._pairs.push([t,e])},at.toString=function(t){var e=t?function(e){return t.call(this,e,it)}:it;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};var st=ot;function lt(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ut(t,e,r){if(!e)return t;var n,i=r&&r.encode||lt,o=r&&r.serialize;if(n=o?o(e,r):j.isURLSearchParams(e)?e.toString():new st(e,r).toString(i)){var a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+n}return t}var ct=function(){function t(){q(this,t),this.handlers=[]}return H(t,[{key:"use",value:function(t,e,r){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(t){this.handlers[t]&&(this.handlers[t]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(t){j.forEach(this.handlers,(function(e){null!==e&&t(e)}))}}]),t}(),pt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ht={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:st,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},isStandardBrowserEnv:function(){var t;return("undefined"===typeof navigator||"ReactNative"!==(t=navigator.product)&&"NativeScript"!==t&&"NS"!==t)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),isStandardBrowserWebWorkerEnv:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};var ft=function(t){function e(t,r,n,i){var o=t[i++],a=Number.isFinite(+o),s=i>=t.length;return o=!o&&j.isArray(n)?n.length:o,s?(j.hasOwnProp(n,o)?n[o]=[n[o],r]:n[o]=r,!a):(n[o]&&j.isObject(n[o])||(n[o]=[]),e(t,r,n[o],i)&&j.isArray(n[o])&&(n[o]=function(t){var e,r,n={},i=Object.keys(t),o=i.length;for(e=0;e<o;e++)n[r=i[e]]=t[r];return n}(n[o])),!a)}if(j.isFormData(t)&&j.isFunction(t.entries)){var r={};return j.forEachEntry(t,(function(t,n){e(function(t){return j.matchAll(/\w+|\[(\w*)]/g,t).map((function(t){return"[]"===t[0]?"":t[1]||t[0]}))}(t),n,r,0)})),r}return null},dt={"Content-Type":void 0};var mt={transitional:pt,adapter:["xhr","http"],transformRequest:[function(t,e){var r,n=e.getContentType()||"",i=n.indexOf("application/json")>-1,o=j.isObject(t);if(o&&j.isHTMLForm(t)&&(t=new FormData(t)),j.isFormData(t))return i&&i?JSON.stringify(ft(t)):t;if(j.isArrayBuffer(t)||j.isBuffer(t)||j.isStream(t)||j.isFile(t)||j.isBlob(t))return t;if(j.isArrayBufferView(t))return t.buffer;if(j.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return nt(t,new ht.classes.URLSearchParams,Object.assign({visitor:function(t,e,r,n){return ht.isNode&&j.isBuffer(t)?(this.append(e,t.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((r=j.isFileList(t))||n.indexOf("multipart/form-data")>-1){var a=this.env&&this.env.FormData;return nt(r?{"files[]":t}:t,a&&new a,this.formSerializer)}}return o||i?(e.setContentType("application/json",!1),function(t,e,r){if(j.isString(t))try{return(e||JSON.parse)(t),j.trim(t)}catch(n){if("SyntaxError"!==n.name)throw n}return(r||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional||mt.transitional,r=e&&e.forcedJSONParsing,n="json"===this.responseType;if(t&&j.isString(t)&&(r&&!this.responseType||n)){var i=!(e&&e.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(o){if(i){if("SyntaxError"===o.name)throw Q.from(o,Q.ERR_BAD_RESPONSE,this,null,this.response);throw o}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ht.classes.FormData,Blob:ht.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};j.forEach(["delete","get","head"],(function(t){mt.headers[t]={}})),j.forEach(["post","put","patch"],(function(t){mt.headers[t]=j.merge(dt)}));var yt=mt,gt=j.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),vt=Symbol("internals");function _t(t){return t&&String(t).trim().toLowerCase()}function xt(t){return!1===t||null==t?t:j.isArray(t)?t.map(xt):String(t)}function bt(t,e,r,n,i){return j.isFunction(n)?n.call(this,e,r):(i&&(e=r),j.isString(e)?j.isString(n)?-1!==e.indexOf(n):j.isRegExp(n)?n.test(e):void 0:void 0)}var wt=function(t,e){function r(t){q(this,r),t&&this.set(t)}return H(r,[{key:"set",value:function(t,e,r){var n=this;function i(t,e,r){var i=_t(e);if(!i)throw new Error("header name must be a non-empty string");var o=j.findKey(n,i);(!o||void 0===n[o]||!0===r||void 0===r&&!1!==n[o])&&(n[o||e]=xt(t))}var o=function(t,e){return j.forEach(t,(function(t,r){return i(t,r,e)}))};return j.isPlainObject(t)||t instanceof this.constructor?o(t,e):j.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z]+$/.test(t.trim())?o(function(t){var e,r,n,i={};return t&&t.split("\n").forEach((function(t){n=t.indexOf(":"),e=t.substring(0,n).trim().toLowerCase(),r=t.substring(n+1).trim(),!e||i[e]&&gt[e]||("set-cookie"===e?i[e]?i[e].push(r):i[e]=[r]:i[e]=i[e]?i[e]+", "+r:r)})),i}(t),e):null!=t&&i(e,t,r),this}},{key:"get",value:function(t,e){if(t=_t(t)){var r=j.findKey(this,t);if(r){var n=this[r];if(!e)return n;if(!0===e)return function(t){for(var e,r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;e=n.exec(t);)r[e[1]]=e[2];return r}(n);if(j.isFunction(e))return e.call(this,n,r);if(j.isRegExp(e))return e.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(t,e){if(t=_t(t)){var r=j.findKey(this,t);return!(!r||void 0===this[r]||e&&!bt(0,this[r],r,e))}return!1}},{key:"delete",value:function(t,e){var r=this,n=!1;function i(t){if(t=_t(t)){var i=j.findKey(r,t);!i||e&&!bt(0,r[i],i,e)||(delete r[i],n=!0)}}return j.isArray(t)?t.forEach(i):i(t),n}},{key:"clear",value:function(t){for(var e=Object.keys(this),r=e.length,n=!1;r--;){var i=e[r];t&&!bt(0,this[i],i,t,!0)||(delete this[i],n=!0)}return n}},{key:"normalize",value:function(t){var e=this,r={};return j.forEach(this,(function(n,i){var o=j.findKey(r,i);if(o)return e[o]=xt(n),void delete e[i];var a=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(t,e,r){return e.toUpperCase()+r}))}(i):String(i).trim();a!==i&&delete e[i],e[a]=xt(n),r[a]=!0})),this}},{key:"concat",value:function(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=this.constructor).concat.apply(t,[this].concat(r))}},{key:"toJSON",value:function(t){var e=Object.create(null);return j.forEach(this,(function(r,n){null!=r&&!1!==r&&(e[n]=t&&j.isArray(r)?r.join(", "):r)})),e}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(t){var e=i(t,2);return e[0]+": "+e[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(t){return t instanceof this?t:new this(t)}},{key:"concat",value:function(t){for(var e=new this(t),r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.forEach((function(t){return e.set(t)})),e}},{key:"accessor",value:function(t){var e=(this[vt]=this[vt]={accessors:{}}).accessors,r=this.prototype;function n(t){var n=_t(t);e[n]||(!function(t,e){var r=j.toCamelCase(" "+e);["get","set","has"].forEach((function(n){Object.defineProperty(t,n+r,{value:function(t,r,i){return this[n].call(this,e,t,r,i)},configurable:!0})}))}(r,t),e[n]=!0)}return j.isArray(t)?t.forEach(n):n(t),this}}]),r}();wt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),j.freezeMethods(wt.prototype),j.freezeMethods(wt);var St=wt;function kt(t,e){var r=this||yt,n=e||r,i=St.from(n.headers),o=n.data;return j.forEach(t,(function(t){o=t.call(r,o,i.normalize(),e?e.status:void 0)})),i.normalize(),o}function Tt(t){return!(!t||!t.__CANCEL__)}function Et(t,e,r){Q.call(this,null==t?"canceled":t,Q.ERR_CANCELED,e,r),this.name="CanceledError"}j.inherits(Et,Q,{__CANCEL__:!0});var It=Et;var zt=ht.isStandardBrowserEnv?{write:function(t,e,r,n,i,o){var a=[];a.push(t+"="+encodeURIComponent(e)),j.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),j.isString(n)&&a.push("path="+n),j.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Ct(t,e){return t&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}var At=ht.isStandardBrowserEnv?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(t){var n=t;return e&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=n(window.location.href),function(e){var r=j.isString(e)?n(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0};var Pt=function(t,e){t=t||10;var r,n=new Array(t),i=new Array(t),o=0,a=0;return e=void 0!==e?e:1e3,function(s){var l=Date.now(),u=i[a];r||(r=l),n[o]=s,i[o]=l;for(var c=a,p=0;c!==o;)p+=n[c++],c%=t;if((o=(o+1)%t)===a&&(a=(a+1)%t),!(l-r<e)){var h=u&&l-u;return h?Math.round(1e3*p/h):void 0}}};function Dt(t,e){var r=0,n=Pt(50,250);return function(i){var o=i.loaded,a=i.lengthComputable?i.total:void 0,s=o-r,l=n(s);r=o;var u={loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:l||void 0,estimated:l&&a&&o<=a?(a-o)/l:void 0,event:i};u[e?"download":"upload"]=!0,t(u)}}var Mt="undefined"!==typeof XMLHttpRequest,Lt={http:$,xhr:Mt&&function(t){return new Promise((function(e,r){var n,i=t.data,o=St.from(t.headers).normalize(),a=t.responseType;function s(){t.cancelToken&&t.cancelToken.unsubscribe(n),t.signal&&t.signal.removeEventListener("abort",n)}j.isFormData(i)&&(ht.isStandardBrowserEnv||ht.isStandardBrowserWebWorkerEnv)&&o.setContentType(!1);var l=new XMLHttpRequest;if(t.auth){var u=t.auth.username||"",c=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(u+":"+c))}var p=Ct(t.baseURL,t.url);function h(){if(l){var n=St.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders());!function(t,e,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?e(new Q("Request failed with status code "+r.status,[Q.ERR_BAD_REQUEST,Q.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):t(r)}((function(t){e(t),s()}),(function(t){r(t),s()}),{data:a&&"text"!==a&&"json"!==a?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:n,config:t,request:l}),l=null}}if(l.open(t.method.toUpperCase(),ut(p,t.params,t.paramsSerializer),!0),l.timeout=t.timeout,"onloadend"in l?l.onloadend=h:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(h)},l.onabort=function(){l&&(r(new Q("Request aborted",Q.ECONNABORTED,t,l)),l=null)},l.onerror=function(){r(new Q("Network Error",Q.ERR_NETWORK,t,l)),l=null},l.ontimeout=function(){var e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",n=t.transitional||pt;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),r(new Q(e,n.clarifyTimeoutError?Q.ETIMEDOUT:Q.ECONNABORTED,t,l)),l=null},ht.isStandardBrowserEnv){var f=(t.withCredentials||At(p))&&t.xsrfCookieName&&zt.read(t.xsrfCookieName);f&&o.set(t.xsrfHeaderName,f)}void 0===i&&o.setContentType(null),"setRequestHeader"in l&&j.forEach(o.toJSON(),(function(t,e){l.setRequestHeader(e,t)})),j.isUndefined(t.withCredentials)||(l.withCredentials=!!t.withCredentials),a&&"json"!==a&&(l.responseType=t.responseType),"function"===typeof t.onDownloadProgress&&l.addEventListener("progress",Dt(t.onDownloadProgress,!0)),"function"===typeof t.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",Dt(t.onUploadProgress)),(t.cancelToken||t.signal)&&(n=function(e){l&&(r(!e||e.type?new It(null,t,l):e),l.abort(),l=null)},t.cancelToken&&t.cancelToken.subscribe(n),t.signal&&(t.signal.aborted?n():t.signal.addEventListener("abort",n)));var d=function(t){var e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(p);d&&-1===ht.protocols.indexOf(d)?r(new Q("Unsupported protocol "+d+":",Q.ERR_BAD_REQUEST,t)):l.send(i||null)}))}};j.forEach(Lt,(function(t,e){if(t){try{Object.defineProperty(t,"name",{value:e})}catch(r){}Object.defineProperty(t,"adapterName",{value:e})}}));var Rt={getAdapter:function(t){for(var e,r,n=(t=j.isArray(t)?t:[t]).length,i=0;i<n&&(e=t[i],!(r=j.isString(e)?Lt[e.toLowerCase()]:e));i++);if(!r){if(!1===r)throw new Q("Adapter ".concat(e," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(j.hasOwnProp(Lt,e)?"Adapter '".concat(e,"' is not available in the build"):"Unknown adapter '".concat(e,"'"))}if(!j.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:Lt};function Bt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new It(null,t)}function Ot(t){return Bt(t),t.headers=St.from(t.headers),t.data=kt.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Rt.getAdapter(t.adapter||yt.adapter)(t).then((function(e){return Bt(t),e.data=kt.call(t,t.transformResponse,e),e.headers=St.from(e.headers),e}),(function(e){return Tt(e)||(Bt(t),e&&e.response&&(e.response.data=kt.call(t,t.transformResponse,e.response),e.response.headers=St.from(e.response.headers))),Promise.reject(e)}))}var Ft=function(t){return t instanceof St?t.toJSON():t};function Nt(t,e){e=e||{};var r={};function n(t,e,r){return j.isPlainObject(t)&&j.isPlainObject(e)?j.merge.call({caseless:r},t,e):j.isPlainObject(e)?j.merge({},e):j.isArray(e)?e.slice():e}function i(t,e,r){return j.isUndefined(e)?j.isUndefined(t)?void 0:n(void 0,t,r):n(t,e,r)}function o(t,e){if(!j.isUndefined(e))return n(void 0,e)}function a(t,e){return j.isUndefined(e)?j.isUndefined(t)?void 0:n(void 0,t):n(void 0,e)}function s(r,i,o){return o in e?n(r,i):o in t?n(void 0,r):void 0}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:function(t,e){return i(Ft(t),Ft(e),!0)}};return j.forEach(Object.keys(t).concat(Object.keys(e)),(function(n){var o=l[n]||i,a=o(t[n],e[n],n);j.isUndefined(a)&&o!==s||(r[n]=a)})),r}var Vt="1.3.4",Ut={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){Ut[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}}));var jt={};Ut.transitional=function(t,e,r){function n(t,e){return"[Axios v"+Vt+"] Transitional option '"+t+"'"+e+(r?". "+r:"")}return function(r,i,o){if(!1===t)throw new Q(n(i," has been removed"+(e?" in "+e:"")),Q.ERR_DEPRECATED);return e&&!jt[i]&&(jt[i]=!0,console.warn(n(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(r,i,o)}};var qt={assertOptions:function(t,e,r){if("object"!==typeof t)throw new Q("options must be an object",Q.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(t),i=n.length;i-- >0;){var o=n[i],a=e[o];if(a){var s=t[o],l=void 0===s||a(s,o,t);if(!0!==l)throw new Q("option "+o+" must be "+l,Q.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new Q("Unknown option "+o,Q.ERR_BAD_OPTION)}},validators:Ut},Zt=qt.validators,Gt=function(){function t(e){q(this,t),this.defaults=e,this.interceptors={request:new ct,response:new ct}}return H(t,[{key:"request",value:function(t,e){"string"===typeof t?(e=e||{}).url=t:e=t||{};var r,n=e=Nt(this.defaults,e),i=n.transitional,o=n.paramsSerializer,a=n.headers;void 0!==i&&qt.assertOptions(i,{silentJSONParsing:Zt.transitional(Zt.boolean),forcedJSONParsing:Zt.transitional(Zt.boolean),clarifyTimeoutError:Zt.transitional(Zt.boolean)},!1),void 0!==o&&qt.assertOptions(o,{encode:Zt.function,serialize:Zt.function},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase(),(r=a&&j.merge(a.common,a[e.method]))&&j.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete a[t]})),e.headers=St.concat(r,a);var s=[],l=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(l=l&&t.synchronous,s.unshift(t.fulfilled,t.rejected))}));var u,c=[];this.interceptors.response.forEach((function(t){c.push(t.fulfilled,t.rejected)}));var p,h=0;if(!l){var f=[Ot.bind(this),void 0];for(f.unshift.apply(f,s),f.push.apply(f,c),p=f.length,u=Promise.resolve(e);h<p;)u=u.then(f[h++],f[h++]);return u}p=s.length;var d=e;for(h=0;h<p;){var m=s[h++],y=s[h++];try{d=m(d)}catch(g){y.call(this,g);break}}try{u=Ot.call(this,d)}catch(g){return Promise.reject(g)}for(h=0,p=c.length;h<p;)u=u.then(c[h++],c[h++]);return u}},{key:"getUri",value:function(t){return ut(Ct((t=Nt(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}]),t}();j.forEach(["delete","get","head","options"],(function(t){Gt.prototype[t]=function(e,r){return this.request(Nt(r||{},{method:t,url:e,data:(r||{}).data}))}})),j.forEach(["post","put","patch"],(function(t){function e(e){return function(r,n,i){return this.request(Nt(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}Gt.prototype[t]=e(),Gt.prototype[t+"Form"]=e(!0)}));var Wt=Gt,Ht=function(){function t(e){if(q(this,t),"function"!==typeof e)throw new TypeError("executor must be a function.");var r;this.promise=new Promise((function(t){r=t}));var n=this;this.promise.then((function(t){if(n._listeners){for(var e=n._listeners.length;e-- >0;)n._listeners[e](t);n._listeners=null}})),this.promise.then=function(t){var e,r=new Promise((function(t){n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},e((function(t,e,i){n.reason||(n.reason=new It(t,e,i),r(n.reason))}))}return H(t,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}},{key:"unsubscribe",value:function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}}}],[{key:"source",value:function(){var e;return{token:new t((function(t){e=t})),cancel:e}}}]),t}();var Xt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Xt).forEach((function(t){var e=i(t,2),r=e[0],n=e[1];Xt[n]=r}));var Kt=Xt;var Yt=function t(e){var r=new Wt(e),n=u(Wt.prototype.request,r);return j.extend(n,Wt.prototype,r,{allOwnKeys:!0}),j.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return t(Nt(e,r))},n}(yt);Yt.Axios=Wt,Yt.CanceledError=It,Yt.CancelToken=Ht,Yt.isCancel=Tt,Yt.VERSION=Vt,Yt.toFormData=nt,Yt.AxiosError=Q,Yt.Cancel=Yt.CanceledError,Yt.all=function(t){return Promise.all(t)},Yt.spread=function(t){return function(e){return t.apply(null,e)}},Yt.isAxiosError=function(t){return j.isObject(t)&&!0===t.isAxiosError},Yt.mergeConfig=Nt,Yt.AxiosHeaders=St,Yt.formToJSON=function(t){return ft(j.isHTMLForm(t)?new FormData(t):t)},Yt.HttpStatusCode=Kt,Yt.default=Yt;var Qt=Yt,$t=(Qt.Axios,Qt.AxiosError,Qt.CanceledError);Qt.isCancel,Qt.CancelToken,Qt.VERSION,Qt.all,Qt.Cancel,Qt.isAxiosError,Qt.spread,Qt.toFormData,Qt.AxiosHeaders,Qt.HttpStatusCode,Qt.formToJSON,Qt.mergeConfig;var Jt=function(e){console.log(e);var r=(0,t.useMemo)((function(){return 9*(e.weatherData.temp-273.15)/5+32}),[e.weatherData]),n=(0,t.useMemo)((function(){return e.weatherData.temp-273.15}),[e.weatherData]),i=String(e.weatherData.locationTime.getDate()).padStart(2,"0"),o=String(e.weatherData.locationTime.getMonth()+1).padStart(2,"0")+"/"+i+"/"+e.weatherData.locationTime.getFullYear();return(0,s.jsxs)("div",{className:"weather_container",children:[(0,s.jsx)("p",{children:o}),(0,s.jsx)("h1",{children:e.weatherData.name}),(0,s.jsxs)("p",{style:{fontWeight:"bold"},children:[Math.round(n),"\u2103 / ",Math.round(r),"\u2109"]}),(0,s.jsx)("p",{children:e.weatherData.weather_description}),(0,s.jsx)("p",{children:(0,s.jsx)("img",{src:"https://openweathermap.org/img/wn/".concat(e.weatherData.weather_icon,"@2x.png"),alt:"weather icon"})})]})};var te=function(){var e=(0,t.useRef)(),r=i((0,t.useState)(null),2),n=r[0],o=r[1],u=i((0,t.useState)(null),2),c=u[0],p=u[1],h=i((0,t.useState)(""),2),f=h[0],d=h[1],m=i((0,t.useState)(""),2),y=m[0],g=m[1],v=i((0,t.useState)(null),2),_=v[0],x=v[1],b=i((0,t.useState)(!1),2),w=b[0],S=b[1],k=i((0,t.useState)(""),2),T=k[0],E=k[1],I=(0,t.useRef)(c),z=(0,t.useRef)(f);function C(t){var e=t.lngLat,r=e.lng,n=e.lat;p({lng:r,lat:n})}return(0,t.useEffect)((function(){var t,e,r=new AbortController;return(null===(t=I.current)||void 0===t?void 0:t.lng)!==(null===c||void 0===c?void 0:c.lng)&&(null===(e=I.current)||void 0===e?void 0:e.lat)!==(null===c||void 0===c?void 0:c.lat)&&(I.current=c,Qt.get("https://api.openweathermap.org/data/2.5/weather?lat=".concat(I.current.lat,"&lon=").concat(I.current.lng,"&appid=8c4711fa26eb45ad7a7d5cee8b1ca1d2"),{signal:r.signal}).then((function(t){g(t.data.coord)})).catch((function(t){console.log(t),t instanceof $t&&console.log("request cancelled")}))),z.current!==f&&(z.current=f,Qt.get("https://api.openweathermap.org/data/2.5/weather?q=".concat(z.current,"&appid=8c4711fa26eb45ad7a7d5cee8b1ca1d2"),{signal:r.signal}).then((function(t){g(t.data.coord)})).catch((function(t){"ERR_BAD_REQUEST"===t.code&&(E("Location not Found"),console.clear(),x(null)),t instanceof $t&&(console.clear(),console.log("request cancelled"))}))),function(){r.abort()}}),[c,f]),(0,t.useEffect)((function(){y&&(S(!0),E(""),Qt.get("https://api.openweathermap.org/data/2.5/weather?lat=".concat(y.lat,"&lon=").concat(y.lon,"&appid=","8c4711fa26eb45ad7a7d5cee8b1ca1d2")).then((function(t){var e=t.data,r={name:e.name,weather_description:e.weather[0].description,weather_icon:e.weather[0].icon,temp:e.main.temp,locationTime:new Date(1e3*(e.sys.sunrise+e.timezone))};n.setCenter({lng:y.lon,lat:y.lat}),n.setZoom(10),S(!1),x(r)})).catch((function(t){S(!1)})))}),[y]),(0,t.useEffect)((function(){a().accessToken="pk.eyJ1Ijoiamxvd2UxMjEwIiwiYSI6ImNsZGJheG14dTByNnMzdm5uNmY2dWVjdWYifQ.fTdpaOtdQ4noHCHnEQ7Cmg",o(new(a().Map)({container:e.current,style:"mapbox://styles/mapbox/streets-v12",center:[-96,40],zoom:4}))}),[]),(0,t.useEffect)((function(){if(n)return n.addControl(new(a().NavigationControl)),n.on("click",C),function(){n.off("click",C)}}),[n]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{style:{height:"500px"},id:"map",ref:e}),(0,s.jsx)(l,{clickHandler:function(t){t.trim()&&d(t)}}),w&&(0,s.jsx)("p",{children:"Loading..."}),T&&(0,s.jsx)("p",{children:T}),!w&&_&&(0,s.jsx)(Jt,{weatherData:_})]})},ee=function(t){t&&t instanceof Function&&r.e(787).then(r.bind(r,787)).then((function(e){var r=e.getCLS,n=e.getFID,i=e.getFCP,o=e.getLCP,a=e.getTTFB;r(t),n(t),i(t),o(t),a(t)}))};e.createRoot(document.getElementById("root")).render((0,s.jsx)(te,{})),ee()}()}();
//# sourceMappingURL=main.906381cf.js.map